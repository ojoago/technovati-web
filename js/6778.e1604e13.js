"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[6778],{1187:function(e,l,t){t.d(l,{Z:function(){return o}});var a=t(3396);const n=["disabled","innerHTML"];var s={__name:"PaginationLinks",props:{link:Object},emits:["next"],setup(e){return(l,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("li",{class:"page-item",onClick:t[0]||(t[0]=t=>l.$emit("next",e.link))},[(0,a._)("span",{class:"page-link pointer",href:"#",disabled:!e.link.url,innerHTML:e.link.label},null,8,n)])]))}};const u=s;var o=u},6778:function(e,l,t){t.r(l),t.d(l,{default:function(){return S}});var a=t(3396),n=t(7139),s=t(9242),u=t(4870),o=t(6091),i=t(2191),r=t(1187);const d=e=>((0,a.dD)("data-v-696812ca"),e=e(),(0,a.Cn)(),e),c={class:"container my-2"},p={class:"card"},m={class:"card-body"},_=d((()=>(0,a._)("h3",{class:"mx-4"},"Fund Request",-1))),g={class:"table-responsive"},v={class:"table-hover table-stripped table-bordered table"},f=d((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"SN"),(0,a._)("th",{width:"40%"},"Purpose"),(0,a._)("th",null,"Amount Requested"),(0,a._)("th",null,"Amount Approved"),(0,a._)("th",null,"Status"),(0,a._)("th",null,"Date "),(0,a._)("th",null,"Image "),(0,a._)("th",null,[(0,a._)("i",{class:"bi bi-gear-fill"})])])],-1))),b=["src"],w={class:"dropdown"},k=d((()=>(0,a._)("button",{type:"button",class:"btn btn-primary btn-sm dropdown-toggle","data-bs-toggle":"dropdown"},[(0,a._)("i",{class:"bi bi-tools"})],-1))),h={class:"dropdown-menu"},y=["onClick"],q=["onClick"],x={class:"flex justify-center mt-4"},D={class:"relative justify-center rounded-md shadow pagination"},C={class:"row"},z={class:"col-md-12"},Z={class:"form-group"},H=d((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Purpose "),(0,a._)("span",{class:"text-danger"},"*")],-1))),R={key:0,class:"text-danger"},M={class:"col-md-12"},j={class:"form-group"},A=d((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Amount "),(0,a._)("span",{class:"text-danger"},"*")],-1))),I={key:0,class:"text-danger"},O={class:"col-md-12"},U={class:"form-group"},L=d((()=>(0,a._)("label",{class:"form-label"},"Receipt ",-1))),T={key:0,class:"text-danger"};var F={__name:"FundRequest",setup(e){const l=(0,u.iH)(null);l.value=i.Z?.state?.user?.data?.pid;const t=(0,u.iH)(!1),d=()=>{t.value=!0},F=()=>{t.value=!1,P()},N=(0,u.iH)({purpose:"",requested_amount:"",image:""}),P=()=>{N.value={purpose:"",requested_amount:"",image:""}};function S(e){N.value={purpose:e.purpose,requested_amount:e.requested_amount,pid:e.pid,image:""},t.value=!0}const E=(0,u.iH)({}),K=(0,u.iH)({});function V(){i.Z.dispatch("getMethod",{url:"/load-fund-request"}).then((e=>{K.value=200==e?.status?e.data:{}}))}V();const Y=e=>{const l=e.target.files[0];if(l){var t=l["name"].substring(l["name"].lastIndexOf(".")+1);if(!["png","jpeg","jpg"].includes(t))return e.target.value=null,void i.Z.commit("notify",{message:"Only Image is allowed",type:"warning"});if(l.size>1048576)return e.target.value=null,void i.Z.commit("notify",{message:"Image cannot be more 1MB",type:"warning"});const a=new FileReader;a.onload=()=>{N.value.image=a.result},a.readAsDataURL(l)}};function B(){E.value={},i.Z.dispatch("postMethod",{url:"/request-fund",param:N.value}).then((e=>{422==e?.status?E.value=e.data:201==e?.status&&(F(),V())}))}function W(e){i.Z.dispatch("deleteMethod",{url:"/delete-fund-request/"+e,prompt:"are you sure, you want to cancel this request?"}).then((e=>{201==e?.status&&V()}))}function $(e){e.url&&!e.active&&V(e.url)}return(e,u)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",c,[(0,a._)("div",p,[(0,a._)("div",m,[_,(0,a._)("button",{class:"btn btn-sm btn-primary m-2",onClick:d},"Request"),(0,a._)("div",g,[(0,a._)("table",v,[f,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.value?.data,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,n.zw)(t+1),1),(0,a._)("td",null,(0,n.zw)(e.purpose),1),(0,a._)("td",null,(0,n.zw)(e.requested),1),(0,a._)("td",null,(0,n.zw)(e.approved),1),(0,a._)("td",null,(0,n.zw)(e.request_status),1),(0,a._)("td",null,(0,n.zw)(e.date),1),(0,a._)("td",null,[(0,a._)("img",{src:e.image,alt:"",class:"img img-responsive tend-image"},null,8,b)]),(0,a._)("td",null,[(0,a._)("div",w,[k,(0,a._)("ul",h,[(0,a._)("li",null,[0==e?.status&&e?.user_pid==l.value?((0,a.wg)(),(0,a.iD)("a",{key:0,class:"dropdown-item pointer bg-warning",onClick:l=>S(e)},"Edit",8,y)):(0,a.kq)("",!0)]),(0,a._)("li",null,[0==e?.status&&e?.user_pid==l.value?((0,a.wg)(),(0,a.iD)("a",{key:0,class:"dropdown-item pointer bg-danger",onClick:l=>W(e.pid)},"Cancel",8,q)):(0,a.kq)("",!0)])])])])])))),128))])]),(0,a._)("div",x,[(0,a._)("nav",D,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.value.links,((e,l)=>((0,a.wg)(),(0,a.j4)(r.Z,{link:e,key:l,onNext:l=>$(e)},null,8,["link","onNext"])))),128))])])])])])]),(0,a.Wm)(o.Z,{isOpen:t.value,"modal-class":"modal-sm",title:"Add Request Expense",onSubmit:B,onModalClose:F},{content:(0,a.w5)((()=>[(0,a._)("form",null,[(0,a._)("div",C,[(0,a._)("div",z,[(0,a._)("div",Z,[H,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":u[0]||(u[0]=e=>N.value.purpose=e),class:"form-control form-control-sm",placeholder:"e.g feeding"},null,512),[[s.nr,N.value.purpose]]),E.value?.purpose?((0,a.wg)(),(0,a.iD)("p",R,(0,n.zw)(E.value?.purpose[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",M,[(0,a._)("div",j,[A,(0,a.wy)((0,a._)("input",{type:"number",step:"0.1",placeholder:"e.g 20000","onUpdate:modelValue":u[1]||(u[1]=e=>N.value.requested_amount=e),class:"form-control form-control-sm"},null,512),[[s.nr,N.value.requested_amount]]),E.value?.requested_amount?((0,a.wg)(),(0,a.iD)("p",I,(0,n.zw)(E.value?.requested_amount[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",O,[(0,a._)("div",U,[L,(0,a._)("input",{type:"file",class:"form-control form-control-sm",id:"image",onChange:Y,accept:"image/*",required:""},null,32),E.value?.image?((0,a.wg)(),(0,a.iD)("p",T,(0,n.zw)(E.value?.image[0]),1)):(0,a.kq)("",!0)])])])])])),_:1},8,["isOpen"])]))}},N=t(89);const P=(0,N.Z)(F,[["__scopeId","data-v-696812ca"]]);var S=P}}]);
//# sourceMappingURL=6778.e1604e13.js.map