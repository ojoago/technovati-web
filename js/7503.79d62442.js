"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[7503],{1187:function(e,t,l){l.d(t,{Z:function(){return i}});var a=l(3396);const o=["disabled","innerHTML"];var n={__name:"PaginationLinks",props:{link:Object},emits:["next"],setup(e){return(t,l)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("li",{class:"page-item",onClick:l[0]||(l[0]=l=>t.$emit("next",e.link))},[(0,a._)("span",{class:"page-link pointer",href:"#",disabled:!e.link.url,innerHTML:e.link.label},null,8,o)])]))}};const s=n;var i=s},7503:function(e,t,l){l.r(t),l.d(t,{default:function(){return de}});var a=l(3396),o=l(7139),n=l(9242),s=l(4870),i=l(2191),d=l(1187),c=l(6091),u=l(6368);const r={class:"container mt-2"},p={class:"card"},m=(0,a._)("h3",null,"Announcements",-1),v={class:"card-body"},_={class:"table-responsive"},b=(0,a._)("input",{type:"text",class:"form-control form-control-sm",placeholder:"Search"},null,-1),g={class:"table-hover table-stripped table-bordered table",width:"100%"},y=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{width:"5%"},"SN"),(0,a._)("th",{width:"20%"},"Title"),(0,a._)("th",{width:"45%"}," Body"),(0,a._)("th",{width:"15%"},"Category"),(0,a._)("th",{width:"15%"},"Date"),(0,a._)("th",{width:"5%"},[(0,a._)("i",{class:"bi bi-gear-fill"})])])],-1),f={class:"line-break"},w={class:"line-break",style:{width:"10% !important"}},h={class:""},k={class:""},D={key:0,class:"dropdown"},x=(0,a._)("button",{type:"button",class:"btn btn-primary btn-sm dropdown-toggle","data-bs-toggle":"dropdown"},[(0,a._)("i",{class:"bi bi-tools"})],-1),C={class:"dropdown-menu"},V=["onClick"],z=["onClick"],U=["onClick"],Z={class:"flex justify-center mt-4"},q={class:"relative justify-center rounded-md shadow pagination"},H={id:"anForm"},M={class:"row"},S={class:"col-md-12"},T=(0,a._)("label",{class:"form-label"},"Title",-1),N={key:0,class:"text-danger"},P={class:"col-md-12"},j={class:"form-group"},A=(0,a._)("label",{class:"form-label"},"Body",-1),R={key:0,class:"text-danger"},G={class:"form-group"},L=(0,a._)("label",{class:"form-label"},"Category",-1),O=(0,a._)("option",{value:"",selected:""},"Make Selection",-1),W=(0,a._)("option",{value:"1"},"General",-1),B=(0,a._)("option",{value:"2"},"Department",-1),J=(0,a._)("option",{value:"3"},"Staff",-1),K=[O,W,B,J],Y={key:0,class:"text-danger"},E={class:"col-md-12"},F=(0,a._)("label",{class:"form-label"},"Publish ?",-1),$={class:"form-group"},I={key:0,class:"text-danger"},Q={key:0,class:"col-md-12"},X={class:"form-group"},ee=(0,a._)("label",{class:"form-label"},"Staff",-1),te={key:0,class:"text-danger"},le={key:1,class:"col-md-12"},ae={class:"form-group"},oe=(0,a._)("label",{class:"form-label"},"Departments",-1),ne={key:0,class:"text-danger"};var se={__name:"AnouncementView",setup(e){const t=(0,s.iH)({}),l=(0,s.iH)({}),O=(0,s.iH)(!1),W=()=>{O.value=!1,se()},B=()=>{O.value=!0},J=(0,s.iH)({title:"",body:"",category:"",staff:"",department:"",status:0}),se=()=>{J.value={title:"",body:"",category:"",staff:"",department:"",status:0}},ie=e=>{J.value={title:e.title,body:e.body,pid:e.pid,department:e.department,staff:e.staff,category:e.category,status:e.status},O.value=!0},de=e=>{i.Z.dispatch("deleteMethod",{url:"/delete-memo-record/"+e}).then((e=>{200==e?.status&&(i.Z.commit("notify",{message:"Reloading Records...",type:"secondary"}),re())}))},ce=e=>{i.Z.dispatch("putMethod",{url:"/publish-announcement/"+e}).then((e=>{201==e?.status&&(i.Z.commit("notify",{message:"Reloading Records...",type:"secondary"}),re())}))};function ue(){t.value=[],i.Z.dispatch("postMethod",{url:"/make-announcement",param:J.value}).then((e=>{422==e?.status?t.value=e.data:201==e?.status&&(se(),re(),O.value=!1)})).catch((e=>{console.log(e)}))}function re(){i.Z.dispatch("getMethod",{url:"/load-announcements"}).then((e=>{l.value=200==e?.status?e.data:{}})).catch((e=>{console.log(e)}))}re();const pe=(0,s.iH)([]);function me(){i.Z.dispatch("loadDropdown","users").then((({data:e})=>{pe.value=e})).catch((e=>{console.log(e)}))}me();const ve=(0,s.iH)([]);function _e(){i.Z.dispatch("loadDropdown","departments").then((({data:e})=>{ve.value=e})).catch((e=>{console.log(e)}))}function be(e){e.url&&!e.active&&re(e.url)}return _e(),(e,i)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",r,[(0,a._)("div",p,[(0,a._)("div",{class:"card-header"},[m,(0,a._)("button",{class:"btn btn-sm btn-primary",onClick:B},"Add New")]),(0,a._)("div",v,[(0,a._)("div",_,[b,(0,a._)("table",g,[y,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.value.data,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,o.zw)(t+1),1),(0,a._)("td",f,(0,o.zw)(e.title),1),(0,a._)("td",w,(0,o.zw)(e.body),1),(0,a._)("td",h,(0,o.zw)(e.announce_category),1),(0,a._)("td",k,(0,o.zw)(e.created_at),1),(0,a._)("td",null,[0==e?.status?((0,a.wg)(),(0,a.iD)("div",D,[x,(0,a._)("ul",C,[(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-success",onClick:t=>ce(e.pid)},"Publish",8,V)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-warning",onClick:t=>ie(e)},"Edit",8,z)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-danger",onClick:t=>de(e.pid)},"Delete",8,U)])])])):(0,a.kq)("",!0)])])))),128))])]),(0,a._)("div",Z,[(0,a._)("nav",q,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.value.links,((e,t)=>((0,a.wg)(),(0,a.j4)(d.Z,{link:e,key:t,onNext:t=>be(e)},null,8,["link","onNext"])))),128))])])])])])]),(0,a.Wm)(c.Z,{isOpen:O.value,"modal-class":"modal-md",title:"Make Announcement",onSubmit:ue,onModalClose:W},{content:(0,a.w5)((()=>[(0,a._)("form",H,[(0,a._)("div",M,[(0,a._)("div",S,[T,(0,a.wy)((0,a._)("input",{class:"form-control form-control-sm",placeholder:"meeting by 2pm","onUpdate:modelValue":i[0]||(i[0]=e=>J.value.title=e)},null,512),[[n.nr,J.value.title]]),t.value?.title?((0,a.wg)(),(0,a.iD)("p",N,(0,o.zw)(t.value?.title[0]),1)):(0,a.kq)("",!0)]),(0,a._)("div",P,[(0,a._)("div",j,[A,(0,a.wy)((0,a._)("textarea",{type:"text","onUpdate:modelValue":i[1]||(i[1]=e=>J.value.body=e),class:"form-control",placeholder:"e.g attend or get queried"},null,512),[[n.nr,J.value.body]]),t.value?.body?((0,a.wg)(),(0,a.iD)("p",R,(0,o.zw)(t.value?.body[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",G,[L,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":i[2]||(i[2]=e=>J.value.category=e),class:"form-control form-control-sm"},K,512),[[n.bM,J.value.category]]),t.value?.category?((0,a.wg)(),(0,a.iD)("p",Y,(0,o.zw)(t.value?.category[0]),1)):(0,a.kq)("",!0)]),(0,a._)("div",E,[F,(0,a._)("div",$,[(0,a.wy)((0,a._)("input",{type:"radio","onUpdate:modelValue":i[3]||(i[3]=e=>J.value.status=e),value:"1"},null,512),[[n.G2,J.value.status]]),(0,a.Uk)(" yes "),(0,a.wy)((0,a._)("input",{type:"radio","onUpdate:modelValue":i[4]||(i[4]=e=>J.value.status=e),value:"0"},null,512),[[n.G2,J.value.status]]),(0,a.Uk)(" No ")]),t.value?.status?((0,a.wg)(),(0,a.iD)("p",I,(0,o.zw)(t.value?.status[0]),1)):(0,a.kq)("",!0)]),3==J.value.category?((0,a.wg)(),(0,a.iD)("div",Q,[(0,a._)("div",X,[ee,(0,a._)("div",null,[(0,a.Wm)((0,s.SU)(u.J),{modelValue:J.value.staff,"onUpdate:modelValue":i[5]||(i[5]=e=>J.value.staff=e),options:pe.value,multiple:!0,"close-on-select":!0,placeholder:"Pick staff",label:"text","track-by":"id"},null,8,["modelValue","options"])]),t.value?.staff?((0,a.wg)(),(0,a.iD)("p",te,(0,o.zw)(t.value?.staff[0]),1)):(0,a.kq)("",!0)])])):(0,a.kq)("",!0),2==J.value.category?((0,a.wg)(),(0,a.iD)("div",le,[(0,a._)("div",ae,[oe,(0,a._)("div",null,[(0,a.Wm)((0,s.SU)(u.J),{modelValue:J.value.department,"onUpdate:modelValue":i[6]||(i[6]=e=>J.value.department=e),options:ve.value,multiple:!0,"close-on-select":!0,placeholder:"Pick Department",label:"text","track-by":"id"},null,8,["modelValue","options"])]),t.value?.department?((0,a.wg)(),(0,a.iD)("p",ne,(0,o.zw)(t.value?.department[0]),1)):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)])])])),_:1},8,["isOpen"])]))}};const ie=se;var de=ie}}]);
//# sourceMappingURL=7503.79d62442.js.map