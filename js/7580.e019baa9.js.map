{"version":3,"file":"js/7580.e019baa9.js","mappings":"ihDAkGA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAASC,EAAAA,EAAAA,IAAI,CAAC,GACdC,GAAWD,EAAAA,EAAAA,IAAI,CAAC,GAEhBE,GAAgBF,EAAAA,EAAAA,IAAI,CACtBG,YAAa,GACbC,QAAS,GACTC,QAAS,GACTC,MAAO,KAeX,SAASC,IACLR,EAAOS,MAAQ,GACfC,EAAAA,EAAMC,SAAS,aAAc,CAAEC,IAAK,gCAAiCC,MAAOV,EAAcM,QAASK,MAAMC,IACjF,KAAhBA,GAAMC,OACNhB,EAAOS,MAAQM,EAAKA,KAEC,KAAhBA,GAAMC,QACXC,EAAkBd,EAAcM,MACpC,GAER,CAEA,SAASQ,EAAkBC,GACvBC,aAAaC,QAAQ,qBAAsBC,KAAKC,UAAUJ,EAAM,KAAM,IACtEf,EAAcM,MAAMF,MAAQ,GAE5BJ,EAAcM,MAAMH,QAAU,GAC9BR,EAAOyB,KAAK,CAAEC,KAAM,qBAAsBC,MAAO,CAAEC,QAASR,EAAKd,cACrE,CAEA,SAASuB,EAAUT,GACff,EAAcM,MAAML,YAAcc,EAAKU,IACvCzB,EAAcM,MAAMJ,QAAUa,EAAKb,QACnCK,EAAAA,EAAMC,SAAS,YAAa,CAAEC,IAAK,qCAAqCM,EAAKb,UAAWS,MAAMC,IAEtFZ,EAAcM,MAAMF,MADJ,KAAhBQ,GAAMC,OACsBD,EAAKA,KAEL,EAChC,IACDc,OAAMC,IACLC,QAAQC,IAAIF,EAAE,GAEtB,CAGA,SAASG,IACLvB,EAAAA,EAAMC,SAAS,YAAa,CAAEC,IAAK,+BAAgCE,MAAMC,IACjD,KAAhBA,GAAMC,SACNd,EAASO,MAAQM,EAAKA,KAC1B,IACDc,OAAMC,IACLC,QAAQC,IAAIF,EAAE,GAEtB,CATAG,IAWA,MAAMC,GAAQjC,EAAAA,EAAAA,IAAI,CAAC,GACnB,SAASkC,IACLzB,EAAAA,EAAMC,SAAS,eAAgB,SAASG,MAAK,EAAGC,WAC5CmB,EAAMzB,MAAQM,CAAI,IACnBc,OAAMC,IACLC,QAAQC,IAAIF,EAAE,GAEtB,C,OACAK,I,+wDCxKA,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://Technovati/./src/views/inventory/PendingItemRequest.vue","webpack://Technovati/./src/views/inventory/PendingItemRequest.vue?f891"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"container mt-2\">\r\n            <div class=\"card\">\r\n                <div class=\"card-header\">Inventory Item Request</div>\r\n                <div class=\"card-body\">\r\n                    {{ requestDetail }}\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-8\" id=\"_main\">\r\n                            <input type=\"text\" class=\" form-control form-control-sm\" placeholder=\"search Item\">\r\n                            <div class=\"table-responsive\">\r\n                                <table class=\"table-hover table-stripped table-bordered table\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>SN</th>\r\n                                            <th>Request Note</th>\r\n                                            <th>Requested By</th>\r\n                                            <th>Items</th>\r\n                                            <th>Receiver</th>\r\n                                            <th>time</th>\r\n                                            <th align=\"center\"> <i class=\"bi bi-gear-fill\"></i> </th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr v-for=\"(item, loop) in requests?.data\" :key=\"loop\">\r\n                                            <td>{{ loop + 1 }}</td>\r\n                                            <td>{{ item.comment }}</td>\r\n                                            <td>{{ item?.request?.username }}</td>\r\n                                            <td>{{ item.items_count }}</td>\r\n                                            <td>{{ item?.receiver?.username ?? item?.user?.username }}</td>\r\n                                            <td>{{ item.request_time }}</td>\r\n\r\n                                            <td>\r\n                                                <button v-if=\"item.status == 0\" @click=\"loadItems(item)\"\r\n                                                    type=\"button\" class=\"btn btn-primary btn-sm\">\r\n                                                    <i class=\"bi bi-plus\"></i>\r\n                                                </button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4\" id=\"_side\">\r\n                            \r\n                            <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                <legend class=\"float-none w-auto px-2 h5\">Request Item List</legend>\r\n                                <form id=\"itemForm\" v-if=\"requestDetail?.items.length\">\r\n                                    <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                        <div class=\"col-md-12\" v-for=\"(item, loop) in requestDetail?.items\"\r\n                                            :key=\"loop\">\r\n                                            <label class=\"form-label\">{{ item.name }} </label>\r\n                                            <div class=\"input-group\">\r\n                                                <span class=\"bg-light p-1\">#{{ item.quantity }}</span>\r\n                                                <input type=\"number\" v-model=\"item.quantity_requested\"\r\n                                                    class=\"form-control\" placeholder=\"e.g 5\">\r\n                                                <!-- <button type=\"button\" class=\"btn btn-danger btn-sm\"\r\n                                                    @click=\"removeitem(loop)\"> <i class=\"bi bi-patch-minus\"></i>\r\n                                                </button> -->\r\n                                            </div>\r\n                                        </div>\r\n                                    </fieldset>\r\n\r\n                                    <div class=\"row\">\r\n                                        <div class=\"col-md-12\">\r\n                                            <label class=\"form-label\">Comment</label>\r\n                                            <textarea type=\"text\" v-model=\"requestDetail.comment\"\r\n                                                class=\"form-control form-control-sm\"\r\n                                                placeholder=\"e.g UIU\"></textarea>\r\n                                            <p class=\"text-danger \" v-if=\"errors?.comment\">{{ errors?.comment[0]\r\n                                                }} </p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"float-end\">\r\n                                        <button type=\"button\" class=\"btn btn-success btn-sm mt-2\"\r\n                                            @click=\"processRawMaterialRequest\">Process</button>\r\n                                    </div>\r\n                                </form>\r\n\r\n                            </fieldset>\r\n                              \r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport store from \"@/store\";\r\nimport { ref } from \"vue\";\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst router = useRouter()\r\nconst errors = ref({});\r\nconst requests = ref({});\r\n\r\nconst requestDetail = ref({\r\n    request_pid: '',\r\n    waybill: '',\r\n    comment: '',\r\n    items: [],\r\n});\r\n\r\n\r\n// const removeitem = (i) => {\r\n//     // let len = request.value.items.length;\r\n//     // if (len === 1) {\r\n//     //     store.commit('notify', { message: 'Qualification requires at least one instituion', type: 'warning' })\r\n//     //     return;\r\n//     // }\r\n    \r\n//     requestDetail.value.items.splice(i, 1);\r\n// }\r\n\r\n\r\nfunction processRawMaterialRequest() {\r\n    errors.value = []\r\n    store.dispatch('postMethod', { url: '/process-pending-item-request', param: requestDetail.value }).then((data) => {\r\n        if (data?.status == 422) {\r\n            errors.value = data.data\r\n        } \r\n        else if (data?.status == 201) {\r\n            requestDetailPage(requestDetail.value)\r\n        }\r\n    })\r\n}\r\n\r\nfunction requestDetailPage(item) {\r\n    localStorage.setItem('TVATI_MY_RQ_DETAIL', JSON.stringify(item, null, 2))\r\n    requestDetail.value.items = []\r\n    // requestDetail.value.request_pid = ''\r\n    requestDetail.value.comment = ''\r\n    router.push({ path: 'my-request-details', query: { request: item.request_pid } })\r\n}\r\n\r\nfunction loadItems(item) {\r\n    requestDetail.value.request_pid = item.pid;\r\n    requestDetail.value.waybill = item.waybill;\r\n    store.dispatch('getMethod', { url: '/load-pending-item-request-detail/'+item.waybill }).then((data) => {\r\n        if (data?.status == 200) {\r\n            requestDetail.value.items = data.data;\r\n        }else{\r\n            requestDetail.value.items = [];\r\n        }\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\n\r\nloadRequest()\r\nfunction loadRequest() {\r\n    store.dispatch('getMethod', { url: '/load-pending-item-request' }).then((data) => {\r\n        if (data?.status == 200) {\r\n            requests.value = data.data;\r\n        }\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\n\r\nconst users = ref({})\r\nfunction dropdownSupplier() {\r\n    store.dispatch('loadDropdown', 'users').then(({ data }) => {\r\n        users.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\ndropdownSupplier()\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    #side{\r\n        display: none;\r\n    }\r\n\r\n</style>","import script from \"./PendingItemRequest.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PendingItemRequest.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PendingItemRequest.vue?vue&type=style&index=0&id=00759b90&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-00759b90\"]])\n\nexport default __exports__"],"names":["router","useRouter","errors","ref","requests","requestDetail","request_pid","waybill","comment","items","processRawMaterialRequest","value","store","dispatch","url","param","then","data","status","requestDetailPage","item","localStorage","setItem","JSON","stringify","push","path","query","request","loadItems","pid","catch","e","console","log","loadRequest","users","dropdownSupplier","__exports__"],"sourceRoot":""}