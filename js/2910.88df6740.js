"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[2910],{5658:function(e,l,a){function t(){function e(e,a="axios"){const t=[];if("axios"==a&&e)for(let n in e){if(-1!==n.indexOf(".")){let a=l(n);t[a]=e[n][0]}else t[n]=e[n][0];t[n]=e[n][0]}return t}function l(e){const l=e.split(".").filter((e=>e)),a=e.split(".").filter((e=>!isNaN(e)));return l[2]+a.map(Number)}return{transformValidationErrors:e}}a.d(l,{Z:function(){return t}})},2910:function(e,l,a){a.r(l),a.d(l,{default:function(){return ee}});a(560);var t=a(3396),n=a(9242),o=a(7139),u=a(4870),c=a(2191),s=a(6204);const r={class:"switch-field"},i=["id","name","value"],d=["id","name","value"];var m={__name:"CustomRadio",props:(0,t.Vf)({name:{type:String,default:"1"},value1:{type:String,default:"1"},value2:{type:String,default:"0"},label1:{type:String,default:"On"},label2:{type:String,default:"Off"},checked:{type:Number,default:1},selected:{type:[Number,String]}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=(0,t.tT)(e,"modelValue");return(a,u)=>((0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("label",null,[(0,t.wy)((0,t._)("input",{onInput:u[0]||(u[0]=e=>a.$emit("update:modelValue",e.target.value)),"onUpdate:modelValue":u[1]||(u[1]=e=>l.value=e),type:"radio",id:`radio${e.name}`,name:`switch${e.name}`,value:e.value1},null,40,i),[[n.G2,l.value]]),(0,t.Uk)(" "+(0,o.zw)(e.label1),1)]),(0,t._)("label",null,[(0,t.wy)((0,t._)("input",{onInput:u[2]||(u[2]=e=>a.$emit("update:modelValue",e.target.value)),"onUpdate:modelValue":u[3]||(u[3]=e=>l.value=e),type:"radio",id:`radio${e.name}`,name:`switch${e.name}`,value:e.value2},null,40,d),[[n.G2,l.value]]),(0,t.Uk)(" "+(0,o.zw)(e.label2),1)])]))}},p=a(89);const v=(0,p.Z)(m,[["__scopeId","data-v-89c25f14"]]);var f=v,_=a(5658);const b={class:"container mt-2"},g={class:"card"},y=(0,t._)("div",{class:"card-header"},[(0,t._)("h3",null,"Add Journal")],-1),h={class:"card-body"},w={class:"border rounded-3 p-1 m-1"},V=(0,t._)("legend",{class:"float-none w-auto px-2 small"},"Entries",-1),k={class:"row"},D={class:"col-md-3"},S={class:"form-group"},U=(0,t._)("label",{class:"form-label small"},"Date",-1),T={key:0,class:"text-danger"},C={class:"col-md-9"},I={class:"form-group"},$=(0,t._)("label",{class:"form-label small"},"Comment",-1),x={key:0,class:"text-danger"},E={class:"col-md-5"},A={class:"form-group"},J=(0,t._)("label",{class:"form-label small"},"Account",-1),N={key:0,class:"text-danger"},z={class:"col-md-4"},Z={class:"form-group"},O=(0,t._)("label",{class:"form-label small"},"Amount",-1),q=["onUpdate:modelValue"],H={key:0,class:"text-danger"},G={class:"col-md-3"},M={class:"form-group"},W=(0,t._)("label",{class:"form-label small"},"Type ",-1),j={class:"input-group"},K=(0,t._)("i",{class:"mx-1"},"|",-1),R=["onClick"],Y=(0,t._)("i",{class:"bi bi-file-minus-fill"},null,-1),B=[Y],F=(0,t._)("i",{class:"bi bi-plus"},null,-1),L=[F],P=(0,t._)("hr",null,null,-1);var Q={__name:"JournalEntryView",setup(e){const{transformValidationErrors:l}=(0,_.Z)(),a=(0,u.iH)({date:"",comments:"",entries:[{account:"",amount:"",type:"cr",check:1}]}),r=()=>{a.value={date:"",comments:"",entries:[{account:"",amount:"",type:"cr",check:1}]}};let i=1;const d=()=>{i++,a.value.entries.push({account:"",amount:"",type:m(i),check:"cr"==m(i)?1:0})};function m(e){return e%2===0?"dr":"cr"}const p=e=>{a.value.entries.splice(e,1)},v=(0,u.iH)({});function Y(){v.value=[],c.Z.dispatch("postMethod",{url:"/add-journal",param:a.value}).then((e=>{422==e?.status?v.value=l(e.data):201==e?.status&&(localStorage.setItem("TVATI_EDIT_JVC",JSON.stringify({},null,2)),r())})).catch((e=>{console.log(e)}))}const F=(0,u.iH)({});function Q(){c.Z.dispatch("loadDropdown","accounts").then((({data:e})=>{F.value=e})).catch((e=>{console.log(e)}))}return Q(),(0,t.bv)((()=>{let e=localStorage.getItem("TVATI_EDIT_JVC")?JSON.parse(localStorage.getItem("TVATI_EDIT_JVC")):"null";if("null"!=e){a.value=e;let l=[];e.entries.forEach((e=>{console.log(e),l.push({account:" "==e.credit_account?e.debit_account:e.credit_account,amount:" "==e.credit_account?e.debit_amount:e.credit_amount,type:" "==e.credit_account?"dr":"cr",check:1,id:e.id})})),a.value.entries=l}})),(e,l)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",b,[(0,t._)("div",g,[y,(0,t._)("div",h,[(0,t._)("form",null,[(0,t._)("fieldset",w,[V,(0,t._)("div",k,[(0,t._)("div",D,[(0,t._)("div",S,[U,(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.date=e),type:"date",class:"form-control form-control-sm",placeholder:"e.g 2000000"},null,512),[[n.nr,a.value.date]]),v.value?.date?((0,t.wg)(),(0,t.iD)("p",T,(0,o.zw)(v.value?.date),1)):(0,t.kq)("",!0)])]),(0,t._)("div",C,[(0,t._)("div",I,[$,(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.comments=e),type:"text",class:"form-control form-control-sm",placeholder:"e.g all entries for today"},null,512),[[n.nr,a.value.comments]]),v.value?.comments?((0,t.wg)(),(0,t.iD)("p",x,(0,o.zw)(v.value?.comments),1)):(0,t.kq)("",!0)])])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.value.entries,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l,class:"row"},[(0,t._)("div",E,[(0,t._)("div",A,[J,(0,t.Wm)((0,u.SU)(s.Z),{modelValue:e.account,"onUpdate:modelValue":l=>e.account=l,options:F.value,settings:{width:"100%"},placeholder:"Select Account"},null,8,["modelValue","onUpdate:modelValue","options"]),v.value[`account${l}`]?((0,t.wg)(),(0,t.iD)("p",N,(0,o.zw)(v.value[`account${l}`]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",z,[(0,t._)("div",Z,[O,(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":l=>e.amount=l,step:"0.5",type:"number",class:"form-control form-control-sm",placeholder:"e.g 2000000"},null,8,q),[[n.nr,e.amount]]),v.value[`amount${l}`]?((0,t.wg)(),(0,t.iD)("p",H,(0,o.zw)(v.value[`amount${l}`]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",G,[(0,t._)("div",M,[W,(0,t._)("div",j,[(0,t.Wm)(f,{modelValue:e.type,"onUpdate:modelValue":l=>e.type=l,value1:"cr",label1:"Credit",value2:"dr",label2:"Debit",name:`${l}`,checked:e.check},null,8,["modelValue","onUpdate:modelValue","name","checked"]),K,(0,t.Uk)(),(0,t._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e=>p(l)},B,8,R)])])])])))),128))]),(0,t._)("button",{onClick:l[2]||(l[2]=l=>d(e.item)),type:"button",class:"btn btn-primary btn-sm"},L),P,(0,t._)("button",{onClick:Y,type:"button",class:"btn btn-primary btn-sm"}," Submit ")])])])])]))}};const X=Q;var ee=X}}]);
//# sourceMappingURL=2910.88df6740.js.map