"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[6570],{1187:function(e,l,a){a.d(l,{Z:function(){return i}});var t=a(3396);const s=["disabled","innerHTML"];var n={__name:"PaginationLinks",props:{link:Object},emits:["next"],setup(e){return(l,a)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("li",{class:"page-item",onClick:a[0]||(a[0]=a=>l.$emit("next",e.link))},[(0,t._)("span",{class:"page-link pointer",href:"#",disabled:!e.link.url,innerHTML:e.link.label},null,8,s)])]))}};const o=n;var i=o},6570:function(e,l,a){a.r(l),a.d(l,{default:function(){return ee}});var t=a(3396),s=a(7139),n=a(9242),o=a(4870),i=a(2191),d=a(1187),r=a(6368),c=a(6091);const u={class:"container mt-2"},m={class:"card"},p=(0,t._)("h3",null,"Memo",-1),g={class:"card-body"},v={class:"table-responsive"},b={class:"table-hover table-stripped table-bordered table"},_=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"SN"),(0,t._)("th",null,"Author"),(0,t._)("th",null,"Subject"),(0,t._)("th",null,"Body"),(0,t._)("th",null,"File"),(0,t._)("th",null,"Status"),(0,t._)("th",null,[(0,t._)("i",{class:"bi bi-gear-fill"})])])],-1),f={class:"line-break"},y={class:"line-break"},h={class:"line-break"},w=["href","download"],k={key:0,class:"dropdown"},D=(0,t._)("button",{type:"button",class:"btn btn-primary btn-sm dropdown-toggle","data-bs-toggle":"dropdown"},[(0,t._)("i",{class:"bi bi-tools"})],-1),j={class:"dropdown-menu"},x=["onClick"],C=["onClick"],Z=["onClick"],M={class:"flex justify-center mt-4"},z={class:"relative justify-center rounded-md shadow pagination"},q={id:"memoForm"},H={class:"row"},V={class:"col-md-12"},U={class:"form-group"},S=(0,t._)("label",{class:"form-label"},"subject",-1),R={key:0,class:"text-danger"},O={class:"col-md-12"},F={class:"form-group"},L=(0,t._)("label",{class:"form-label"},"Body",-1),N={key:0,class:"text-danger"},P={class:"col-md-12"},T={class:"form-group"},A=(0,t._)("label",{class:"form-label"},[(0,t.Uk)("File "),(0,t._)("span",{class:"text-danger"},"*")],-1),B={key:0,class:"text-danger"},E={key:0,class:"col-md-12"},I={class:"form-group"},W=(0,t._)("label",{class:"form-label"},"Staff",-1),J={key:0,class:"text-danger"},K={key:1,class:"col-md-12"},Y={class:"form-group"},$=(0,t._)("label",{class:"form-label"},"Departments",-1),G={key:0,class:"text-danger"};var Q={__name:"MemoView",setup(e){const l=(0,o.iH)(!1),a=()=>{l.value=!0},Q=()=>{l.value=!1,ee()},X=(0,o.iH)({subject:"",body:"",category:"1",staff:"",departments:"",image:""}),ee=()=>{X.value={subject:"",body:"",category:"1",staff:"",departments:"",image:""}},le=e=>{const l=e.target.files[0];if(l){var a=l["name"].substring(l["name"].lastIndexOf(".")+1);if(!["png","jpeg","jpg","docs","pdf"].includes(a))return e.target.value=null,void i.Z.commit("notify",{message:"Only Image is allowed",type:"warning"});if(l.size>1048576)return e.target.value=null,void i.Z.commit("notify",{message:"Image cannot be more 1MB",type:"warning"});const t=new FileReader;t.onload=()=>{X.value.image=t.result},t.readAsDataURL(l)}},ae=(0,o.iH)({}),te=(0,o.iH)({});function se(){ae.value=[],i.Z.dispatch("postMethod",{url:"/create-memo",param:X.value}).then((e=>{422==e?.status?(ae.value=e.data,console.log(e.data)):201==e?.status&&(Q(),de())}))}const ne=e=>{X.value={subject:e.subject,body:e.body,category:e.category,staff:e.staff,departments:e.departments,pid:e.pid},l.value=!0},oe=e=>{i.Z.dispatch("deleteMethod",{url:"/delete-memo-record/"+e}).then((e=>{200==e?.status&&(i.Z.commit("notify",{message:"Reloading Records...",type:"secondary"}),de())}))},ie=e=>{i.Z.dispatch("putMethod",{url:"/publish-memo/"+e}).then((e=>{201==e?.status&&(i.Z.commit("notify",{message:"Reloading Records...",type:"secondary"}),de())}))};function de(e="/load-memo"){i.Z.dispatch("getMethod",{url:e}).then((e=>{te.value=200==e?.status?e.data:{}})).catch((e=>{console.log(e)}))}de();const re=(0,o.iH)([]);function ce(){i.Z.dispatch("loadDropdown","users").then((({data:e})=>{re.value=e})).catch((e=>{console.log(e)}))}ce();const ue=(0,o.iH)([]);function me(){i.Z.dispatch("loadDropdown","departments").then((({data:e})=>{ue.value=e})).catch((e=>{console.log(e)}))}function pe(e){e.url&&!e.active&&de(e.url)}return me(),(e,i)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",u,[(0,t._)("div",m,[(0,t._)("div",{class:"card-header"},[p,(0,t._)("button",{class:"btn btn-sm btn-primary",onClick:a},"Add New")]),(0,t._)("div",g,[(0,t._)("div",v,[(0,t._)("table",b,[_,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(te.value.data,((e,l)=>((0,t.wg)(),(0,t.iD)("tr",{key:l},[(0,t._)("td",null,(0,s.zw)(l+1),1),(0,t._)("td",f,(0,s.zw)(e?.author?.username),1),(0,t._)("td",y,(0,s.zw)(e.subject),1),(0,t._)("td",h,(0,s.zw)(e.body),1),(0,t._)("td",null,(0,s.zw)(e.memo_status),1),(0,t._)("td",null,[e.path?((0,t.wg)(),(0,t.iD)("a",{key:0,href:e.path,target:"_blank",rel:"noopener noreferrer",download:e?.path}," Download",8,w)):(0,t.kq)("",!0)]),(0,t._)("td",null,[0==e.status?((0,t.wg)(),(0,t.iD)("div",k,[D,(0,t._)("ul",j,[(0,t._)("li",null,[(0,t._)("a",{class:"dropdown-item pointer bg-success",onClick:l=>ie(e.pid)},"Publish",8,x)]),(0,t._)("li",null,[(0,t._)("a",{class:"dropdown-item pointer bg-warning",onClick:l=>ne(e)},"Edit",8,C)]),(0,t._)("li",null,[(0,t._)("a",{class:"dropdown-item pointer bg-danger",onClick:l=>oe(e.pid)},"Delete",8,Z)])])])):(0,t.kq)("",!0)])])))),128))])]),(0,t._)("div",M,[(0,t._)("nav",z,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(te.value.links,((e,l)=>((0,t.wg)(),(0,t.j4)(d.Z,{link:e,key:l,onNext:l=>pe(e)},null,8,["link","onNext"])))),128))])])])])])]),(0,t.Wm)(c.Z,{isOpen:l.value,onSubmit:se,"modal-class":"modal-lg",title:"Create Memo",onModalClose:Q},{content:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t._)("form",q,[(0,t._)("div",H,[(0,t._)("div",V,[(0,t._)("div",U,[S,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=e=>X.value.subject=e),class:"form-control",placeholder:"Enter subject"},null,512),[[n.nr,X.value.subject]]),ae.value?.subject?((0,t.wg)(),(0,t.iD)("p",R,(0,s.zw)(ae.value?.subject[0]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",O,[(0,t._)("div",F,[L,(0,t.wy)((0,t._)("textarea",{type:"text","onUpdate:modelValue":i[1]||(i[1]=e=>X.value.body=e),class:"form-control",placeholder:"Enter Message"},null,512),[[n.nr,X.value.body]]),ae.value?.body?((0,t.wg)(),(0,t.iD)("p",N,(0,s.zw)(ae.value?.body[0]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",P,[(0,t._)("div",T,[A,(0,t._)("input",{type:"file",class:"form-control form-control-sm",id:"image",onChange:le,accept:".pdf,.docs,.png,.jpg,.jpeg",a:"",required:""},null,32),ae.value?.image?((0,t.wg)(),(0,t.iD)("p",B,(0,s.zw)(ae.value?.image[0]),1)):(0,t.kq)("",!0)])]),3==X.value.category?((0,t.wg)(),(0,t.iD)("div",E,[(0,t._)("div",I,[W,(0,t._)("div",null,[(0,t.Wm)((0,o.SU)(r.J),{modelValue:X.value.staff,"onUpdate:modelValue":i[2]||(i[2]=e=>X.value.staff=e),options:re.value,multiple:!0,"close-on-select":!0,placeholder:"Pick staff",label:"text","track-by":"id"},null,8,["modelValue","options"])]),ae.value?.staff?((0,t.wg)(),(0,t.iD)("p",J,(0,s.zw)(ae.value?.staff[0]),1)):(0,t.kq)("",!0)])])):(0,t.kq)("",!0),2==X.value.category?((0,t.wg)(),(0,t.iD)("div",K,[(0,t._)("div",Y,[$,(0,t._)("div",null,[(0,t.Wm)((0,o.SU)(r.J),{modelValue:X.value.departments,"onUpdate:modelValue":i[3]||(i[3]=e=>X.value.departments=e),options:ue.value,multiple:!0,"close-on-select":!0,placeholder:"Pick Department",label:"text","track-by":"id"},null,8,["modelValue","options"])]),ae.value?.departments?((0,t.wg)(),(0,t.iD)("p",G,(0,s.zw)(ae.value?.departments[0]),1)):(0,t.kq)("",!0)])])):(0,t.kq)("",!0)])])])])),_:1},8,["isOpen"])]))}};const X=Q;var ee=X}}]);
//# sourceMappingURL=6570.9de483d1.js.map