"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[7415],{1187:function(e,l,a){a.d(l,{Z:function(){return o}});var t=a(3396);const n=["disabled","innerHTML"];var s={__name:"PaginationLinks",props:{link:Object},emits:["next"],setup(e){return(l,a)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("li",{class:"page-item",onClick:a[0]||(a[0]=a=>l.$emit("next",e.link))},[(0,t._)("span",{class:"page-link pointer",href:"#",disabled:!e.link.url,innerHTML:e.link.label},null,8,n)])]))}};const u=s;var o=u},7415:function(e,l,a){a.r(l),a.d(l,{default:function(){return G}});var t=a(3396),n=a(7139),s=a(9242),u=a(2191),o=a(4870),i=a(1187),d=a(6091);const r={class:"container-fluid mt-2"},v={class:"card"},c={class:"card-body"},_=(0,t._)("h3",{class:"card-title"},"Staff Leave ",-1),m={class:"border rounded-3 p-2 m-1"},p=(0,t._)("legend",{class:"float-none w-auto px-2"},"Leave Request",-1),b={class:"table-responsive"},k={class:"table-hover table-stripped table-bordered table"},w=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"SN"),(0,t._)("th",null,"Name"),(0,t._)("th",null,"Leave"),(0,t._)("th",null,"From"),(0,t._)("th",null,"to"),(0,t._)("th",null,"Days"),(0,t._)("th",null,"note"),(0,t._)("th",null,"status"),(0,t._)("th",null,"manager comment"),(0,t._)("th",null,"hr comment"),(0,t._)("th",null,[(0,t._)("i",{class:"bi bi-gear-fill"})])])],-1),f={key:0,class:"dropdown"},g=["onClick"],h=(0,t._)("span",null,"Response",-1),y=[h],x={class:"flex justify-center mt-4"},z={class:"relative justify-center rounded-md shadow pagination"},H={class:"row"},q={key:0,class:"col-md-12"},D={class:"form-group"},L=(0,t._)("label",{class:"form-label"},[(0,t.Uk)("Comment "),(0,t._)("span",{class:"text-danger"},"*")],-1),U={key:0,class:"text-danger"},C={class:"col-md-12"},Z={class:"form-group"},M=(0,t._)("label",{class:"form-label"},[(0,t.Uk)("Approve? "),(0,t._)("span",{class:"text-danger"},"*")],-1),N=(0,t._)("br",null,null,-1),j=(0,t._)("label",{for:"yes"},"Yes ",-1),R=["value"],T=(0,t._)("label",{for:"no"},"No ",-1),O=["value"],S={key:0,class:"text-danger"};var V={__name:"ManagerLeaveRequest",setup(e){const l=(0,o.iH)(null);l.value=u.Z?.state?.user?.data?.pid;const a=(0,o.iH)(0);a.value=u.Z.state.approvalLevel;const h=(0,o.iH)({}),V=(0,o.iH)(!1),Y=()=>{V.value=!1},G=(0,o.iH)({comment:"",leave_pid:"",status:"",level:a.value}),K=(0,o.iH)([1,5]);2==a.value?K.value=[2,6]:3==a.value?K.value=[3,7]:4==a.value&&(K.value=[4,8]);const A=()=>{G.value={comment:"",leave_pid:"",status:""}},F=(0,o.iH)({}),P=e=>{G.value.leave_pid=e,V.value=!0},W=()=>{h.value=[],u.Z.dispatch("postMethod",{url:"/respond-to-leave-request",param:G.value}).then((e=>{422==e?.status?h.value=e.data:201==e?.status&&($(),A())}))};function $(e="/manage-leave-request"){u.Z.dispatch("getMethod",{url:e}).then((e=>{200==e?.status&&(F.value=e.data)}))}function B(e){e.url&&!e.active&&$(e.url)}return $(),(e,u)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",r,[(0,t._)("div",v,[(0,t._)("div",c,[_,(0,t._)("fieldset",m,[p,(0,t._)("div",b,[(0,t._)("table",k,[w,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(F.value.data,((e,s)=>((0,t.wg)(),(0,t.iD)("tr",{key:s},[(0,t._)("td",null,(0,n.zw)(s+1),1),(0,t._)("td",null,(0,n.zw)(e.staff.username),1),(0,t._)("td",null,(0,n.zw)(e.leave.leave),1),(0,t._)("td",null,(0,n.zw)(e.begin),1),(0,t._)("td",null,(0,n.zw)(e.end),1),(0,t._)("td",null,(0,n.zw)(e.days),1),(0,t._)("td",null,(0,n.zw)(e.note),1),(0,t._)("td",null,(0,n.zw)(e.request_status),1),(0,t._)("td",null,(0,n.zw)(e.line_manager_comment),1),(0,t._)("td",null,(0,n.zw)(e.hr_comment),1),(0,t._)("td",null,[0==e.status&&e.line_manager==l.value||e.status==a.value-1&&!e.expired?((0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("button",{type:"button",class:"btn btn-primary btn-sm",onClick:l=>P(e.pid)},y,8,g)])):(0,t.kq)("",!0)])])))),128))])]),(0,t._)("div",x,[(0,t._)("nav",z,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(F.value.links,((e,l)=>((0,t.wg)(),(0,t.j4)(i.Z,{link:e,key:l,onNext:l=>B(e)},null,8,["link","onNext"])))),128))])])])])])])]),(0,t.Wm)(d.Z,{isOpen:V.value,onSubmit:W,"modal-class":"modal-sm",title:"Request Leave",onModalClose:Y},{content:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t._)("form",null,[(0,t._)("div",H,[a.value<3||"null"==a.value?((0,t.wg)(),(0,t.iD)("div",q,[(0,t._)("div",D,[L,(0,t.wy)((0,t._)("textarea",{type:"text",cols:"4","onUpdate:modelValue":u[0]||(u[0]=e=>G.value.comment=e),class:"form-control form-control-sm",placeholder:"e.g go and refresh "},null,512),[[s.nr,G.value.comment]]),h.value?.comment?((0,t.wg)(),(0,t.iD)("p",U,(0,n.zw)(h.value?.comment[0]),1)):(0,t.kq)("",!0)])])):(0,t.kq)("",!0),(0,t._)("div",C,[(0,t._)("div",Z,[M,(0,t.Uk)(),N,j,(0,t.Uk)("   "),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":u[1]||(u[1]=e=>G.value.status=e),type:"radio",id:"yes",name:"status",value:K.value[0]},null,8,R),[[s.G2,G.value.status]]),(0,t.Uk)("       "),T,(0,t.Uk)("   "),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":u[2]||(u[2]=e=>G.value.status=e),type:"radio",id:"no",name:"status",value:K.value[1]},null,8,O),[[s.G2,G.value.status]]),h.value?.status?((0,t.wg)(),(0,t.iD)("p",S,(0,n.zw)(h.value?.status[0]),1)):(0,t.kq)("",!0)])])])])])])),_:1},8,["isOpen"])]))}};const Y=V;var G=Y}}]);
//# sourceMappingURL=7415.4ac4d836.js.map