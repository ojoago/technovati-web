"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[8022],{5658:function(l,a,e){function t(){function l(l,e="axios"){const t=[];if("axios"==e&&l)for(let o in l){if(-1!==o.indexOf(".")){let e=a(o);t[e]=l[o][0]}else t[o]=l[o][0];t[o]=l[o][0]}return t}function a(l){const a=l.split(".").filter((l=>l)),e=l.split(".").filter((l=>!isNaN(l)));return a[2]+e.map(Number)}return{transformValidationErrors:l}}e.d(a,{Z:function(){return t}})},8022:function(l,a,e){e.r(a),e.d(a,{default:function(){return xa}});e(560);var t=e(3396),o=e(7139),s=e(9242),n=e(4870),u=e(2191),c=e(6204),i=e(2524),d=e(5658);const r={class:"container mt-2"},p={class:"card"},m={class:"card-header"},_={class:"row"},v=(0,t._)("div",{class:"col-md-6"},[(0,t._)("h3",null,"Add Sales")],-1),b={class:"col-md-6"},g=(0,t._)("option",{value:"",selected:""},"Select Store",-1),y=["value"],f=["value"],h={class:"card-body"},w=(0,t._)("input",{type:"text",class:"form-control form-control-sm",placeholder:"search Item"},null,-1),x={class:"table-responsive"},k={class:"table-hover table-stripped table-bordered table"},D=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",{width:"5%"},"SN"),(0,t._)("th",null,"Name"),(0,t._)("th",null,"Quantity"),(0,t._)("th",{align:"center"},[(0,t._)("i",{class:"bi bi-gear-fill"})])])],-1),q=["onClick"],V=(0,t._)("i",{class:"bi bi-plus"},null,-1),S=[V],U={key:0,id:"itemForm"},z=(0,t._)("hr",null,null,-1),C={class:"row"},H={class:"col-md-5"},T={class:"border rounded-3 p-1",id:"requestBody"},Z=(0,t._)("legend",{class:"float-none w-auto px-2 h5"},"Request Items",-1),A={class:"border rounded-3 p-2 m-1"},$={class:"col-md-12"},I={class:"form-label"},E={class:"col-md-6"},N={class:"form-group"},Y=(0,t._)("label",{class:"form-label"},"Qty",-1),B={class:"input-group"},K={class:"bg-light p-1"},M=["onUpdate:modelValue"],F={key:0,class:"text-danger"},O={class:"col-md-6"},P={class:"form-group"},R=(0,t._)("label",{for:"",class:"form-label"},"Rate",-1),L={class:"input-group"},Q=["onUpdate:modelValue"],W=["onClick"],G=(0,t._)("i",{class:"bi bi-file-minus-fill"},null,-1),J=[G],j={key:0,class:"text-danger"},X={class:"row"},ll={class:"col-md-12"},al=(0,t._)("label",{class:"form-label"},"Customer",-1),el={key:0,class:"text-danger"},tl={class:"col-md-7"},ol={class:"border rounded-3 p-2 m-1"},sl={class:"float-none w-auto px-2"},nl=(0,t._)("br",null,null,-1),ul={class:"row"},cl={class:"col-md-12"},il={class:"form-group"},dl=(0,t._)("label",{for:""},"Bill to",-1),rl={key:0,class:"text-danger"},pl={class:"col-md-12"},ml={class:"form-group"},_l=(0,t._)("label",{for:""},"Ship to",-1),vl={key:0,class:"text-danger"},bl={class:"col-md-6"},gl={class:"form-group"},yl=(0,t._)("label",{class:"form-label small"},"Discount",-1),fl={key:0,class:"text-danger"},hl={class:"col-md-6"},wl={class:"form-group"},xl=(0,t._)("label",{class:"form-label small"},"Tax",-1),kl={class:"input-group"},Dl=(0,t._)("option",{value:"1",selected:""},"%",-1),ql=(0,t._)("option",{value:"2"},"Flat",-1),Vl=[Dl,ql],Sl={key:0,class:"text-danger"},Ul={class:"row"},zl={class:"col-md-6"},Cl={class:"form-group"},Hl=(0,t._)("label",{class:"small"},"Total",-1),Tl=["value"],Zl={class:"col-md-6"},Al={class:"form-group"},$l=(0,t._)("label",{class:"small"},"Tax Value",-1),Il={key:0,class:"text-danger"},El={class:"form-group"},Nl=(0,t._)("label",{class:"small"},"Grand Total",-1),Yl=["value"],Bl=(0,t._)("hr",null,null,-1),Kl={class:"col-md-12"},Ml=(0,t._)("label",{class:"form-label small"},"Record Sale In",-1),Fl=(0,t._)("option",{value:"",selected:""},"Select Type",-1),Ol=["value"],Pl={key:0,class:"text-danger"},Rl={class:"col-md-5"},Ll={class:"form-group"},Ql=(0,t._)("label",{class:"form-label small"},"Account",-1),Wl={key:0,class:"text-danger"},Gl={class:"col-md-4"},Jl={class:"form-group"},jl=(0,t._)("label",{class:"form-label small"},"Amount",-1),Xl=["onUpdate:modelValue"],la={key:0,class:"text-danger"},aa={class:"col-md-3"},ea={class:"form-group"},ta=(0,t._)("label",{class:"form-label small"},"Date",-1),oa={class:"input-group"},sa=["onUpdate:modelValue"],na=["onClick"],ua=(0,t._)("i",{class:"bi bi-patch-minus"},null,-1),ca=[ua],ia={key:0,class:"text-danger"},da=(0,t._)("i",{class:"bi bi-plus"},null,-1),ra=[da],pa=(0,t._)("hr",null,null,-1),ma={class:"row"},_a={class:"col-md-6"},va={class:"form-group"},ba=(0,t._)("label",{class:"small"},"Paid",-1),ga={class:"col-md-6"},ya={class:"form-group"},fa=(0,t._)("label",{class:"small"},"Balance",-1);var ha={__name:"AddSales",setup(l){const{numberFormat:a}=(0,i.H)(),{transformValidationErrors:e}=(0,d.Z)(),V=(0,n.iH)({}),G=(0,n.iH)({}),Dl=(0,n.iH)({account_type_pid:"",customer_pid:"",store_pid:"",sales_date:"",tax:0,tax_value:0,tax_type:1,sales_no:"",due_date:"",bill_to:"",ship_to:"",discount:0,sub_total:0,paid:0,balance:0,items:[],accounts:[{account_pid:"",amount:"",date:"",note:""}]}),ql=()=>{Dl.value={account_type_pid:"",customer_pid:"",store_pid:"",sales_date:"",tax:0,tax_value:0,tax_type:1,sales_no:"",due_date:"",bill_to:"",ship_to:"",discount:0,sub_total:0,paid:0,balance:0,items:[],accounts:[{account_pid:"",amount:"",date:"",note:""}]}},ua=l=>{var a=Dl.value.items.findIndex((a=>a.item_pid==l.pid));-1===a?Dl.value.items.push({item_pid:l.pid,quantity:1,rate:"",qnt:l?.quantity,name:l.name}):Dl.value.items[a].quantity<l?.quantity?(Dl.value.items[a].quantity++,ha()):u.Z.commit("notify",{message:`quantity remaining is : ${Dl.value.items[a].quantity}`,type:"warninig"})},da=l=>{Dl.value.items.splice(l,1),ha()},ha=()=>{Dl.value.sub_total=0,Dl.value.items.forEach((l=>{l.quantity>0&&l.rate>0&&(Dl.value.sub_total+=l.quantity*l.rate),xa()}))},wa=(0,n.iH)(0),xa=()=>{let l=0;Dl.value.accounts.forEach((a=>{a.amount>0&&(l+=a.amount)})),1==Dl.value.tax_type?Dl.value.tax_value=Dl.value.tax*Dl.value.sub_total/100:Dl.value.tax_value=Dl.value.tax+Dl.value.sub_total;let e=Dl.value.sub_total+Dl.value.tax_value-Dl.value.discount-l;wa.value=a(Dl.value.sub_total+Dl.value.tax_value-Dl.value.discount),Dl.value.paid=a(l),Dl.value.balance=a(e);let t=Dl.value.tax_value;Dl.value.tax_value=a(t)},ka=()=>{Dl.value.accounts.push({account_pid:"",amount:"",date:"",note:""})},Da=l=>{let a=Dl.value.accounts.length;1!==a?Dl.value.accounts.splice(l,1):u.Z.commit("notify",{message:"One Account is required",type:"warning"})},qa=()=>{V.value=[],Dl.value.store_pid=Va.value,u.Z.dispatch("postMethod",{url:"/add-sales",param:Dl.value}).then((l=>{422==l?.status?V.value=e(l.data):201==l?.status&&ql()})).catch((l=>{console.log(l)}))},Va=(0,n.iH)(null);function Sa(l){ql(),Va.value=l,u.Z.dispatch("getMethod",{url:"/load-cr-out-items/"+l}).then((l=>{G.value=200==l?.status?l.data:[]})).catch((l=>{console.log(l)}))}Dl.value.items&&za();const Ua=(0,n.iH)([]);function za(){u.Z.dispatch("loadDropdown","customers").then((({data:l})=>{Ua.value=l})).catch((l=>{console.log(l)}))}const Ca=(0,n.iH)({});function Ha(){u.Z.dispatch("loadDropdown","stores").then((({data:l})=>{1==l.length&&Sa(l[0].id),Ca.value=l})).catch((l=>{console.log(l)}))}Ha();const Ta=(0,n.iH)({});function Za(l){Dl.value.accounts=[{account_pid:"",amount:"",date:"",note:""}],u.Z.dispatch("loadDropdown","type-accounts/"+l).then((({data:l})=>{Ta.value=l})).catch((l=>{console.log(l)}))}Za();const Aa=(0,n.iH)({});function $a(){u.Z.dispatch("loadDropdown","account-types").then((({data:l})=>{Aa.value=l})).catch((l=>{console.log(l)}))}return $a(),(0,t.bv)((()=>{let l=localStorage.getItem("TVATI_EDIT_SLS")?JSON.parse(localStorage.getItem("TVATI_EDIT_SLS")):"null";"null"!=l&&(Sa(l.store_pid),Za(l.account_type_pid),Dl.value=l,Dl.value.old_accounts=l.accounts,ha())})),(l,e)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",r,[(0,t._)("div",p,[(0,t._)("div",m,[(0,t._)("div",_,[v,(0,t._)("div",b,[(0,t._)("select",{class:"form-control",onChange:e[0]||(e[0]=l=>Sa(l.target.value))},[g,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Ca.value,(l=>((0,t.wg)(),(0,t.iD)(t.HY,{key:l.id},[1==Ca.value.length?((0,t.wg)(),(0,t.iD)("option",{key:0,selected:"",value:l.id},(0,o.zw)(l.text),9,y)):((0,t.wg)(),(0,t.iD)("option",{key:1,value:l.id},(0,o.zw)(l.text),9,f))],64)))),128))],32)])])]),(0,t._)("div",h,[w,(0,t._)("div",x,[(0,t._)("table",k,[D,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(G.value?.data,((l,a)=>((0,t.wg)(),(0,t.iD)("tr",{key:a},[(0,t._)("td",null,(0,o.zw)(a+1),1),(0,t._)("td",null,(0,o.zw)(l.name),1),(0,t._)("td",null,(0,o.zw)(l?.quantity??0)+" "+(0,o.zw)(l.unit),1),(0,t._)("td",null,[l?.quantity>0?((0,t.wg)(),(0,t.iD)("button",{key:0,onClick:a=>ua(l),type:"button",class:"btn btn-primary btn-sm"},S,8,q)):(0,t.kq)("",!0)])])))),128))])])]),Dl.value.items.length?((0,t.wg)(),(0,t.iD)("form",U,[z,(0,t._)("div",C,[(0,t._)("div",H,[(0,t._)("fieldset",T,[Z,(0,t._)("fieldset",A,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Dl.value.items,((l,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"row",key:a},[(0,t._)("div",$,[(0,t._)("label",I,(0,o.zw)(l.name),1)]),(0,t._)("div",E,[(0,t._)("div",N,[Y,(0,t._)("div",B,[(0,t._)("span",K,"#"+(0,o.zw)(l.qnt),1),(0,t.wy)((0,t._)("input",{type:"number","onUpdate:modelValue":a=>l.quantity=a,onChange:ha,class:"form-control",placeholder:"e.g 100"},null,40,M),[[s.nr,l.quantity]])]),V.value[`items.${a}.quantity`]?((0,t.wg)(),(0,t.iD)("p",F,(0,o.zw)(V.value[`items.${a}.quantity`]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",O,[(0,t._)("div",P,[R,(0,t._)("div",L,[(0,t.wy)((0,t._)("input",{type:"number","onUpdate:modelValue":a=>l.rate=a,onChange:ha,class:"form-control",placeholder:"e.g 30000"},null,40,Q),[[s.nr,l.rate]]),(0,t._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:l=>da(a)},J,8,W)]),V.value[`items.${a}.rate`]?((0,t.wg)(),(0,t.iD)("p",j,(0,o.zw)(V.value[`items.${a}.rate`]),1)):(0,t.kq)("",!0)])])])))),128))]),(0,t._)("div",X,[(0,t._)("div",ll,[al,(0,t.Wm)((0,n.SU)(c.Z),{modelValue:Dl.value.customer_pid,"onUpdate:modelValue":e[1]||(e[1]=l=>Dl.value.customer_pid=l),options:Ua.value,settings:{width:"100%"},placeholder:"Select Customer"},null,8,["modelValue","options"]),V.value?.customer_pid?((0,t.wg)(),(0,t.iD)("p",el,(0,o.zw)(V.value?.customer_pid),1)):(0,t.kq)("",!0)])])])]),(0,t._)("div",tl,[(0,t._)("fieldset",ol,[(0,t._)("legend",sl,[(0,t.Uk)("Payment, "),(0,t._)("small",null,"Sub Total "+(0,o.zw)((0,n.SU)(a)(Dl.value.sub_total)),1)]),nl,(0,t._)("div",ul,[(0,t._)("div",cl,[(0,t._)("div",il,[dl,(0,t.wy)((0,t._)("textarea",{class:"form-control form-control-sm",placeholder:"Bill to","onUpdate:modelValue":e[2]||(e[2]=l=>Dl.value.bill_to=l)},null,512),[[s.nr,Dl.value.bill_to]]),V.value?.bill_to?((0,t.wg)(),(0,t.iD)("p",rl,(0,o.zw)(V.value?.bill_to),1)):(0,t.kq)("",!0)])]),(0,t._)("div",pl,[(0,t._)("div",ml,[_l,(0,t.wy)((0,t._)("textarea",{class:"form-control form-control-sm",placeholder:"Ship to","onUpdate:modelValue":e[3]||(e[3]=l=>Dl.value.ship_to=l)},null,512),[[s.nr,Dl.value.ship_to]]),V.value?.ship_to?((0,t.wg)(),(0,t.iD)("p",vl,(0,o.zw)(V.value?.ship_to),1)):(0,t.kq)("",!0)])]),(0,t._)("div",bl,[(0,t._)("div",gl,[yl,(0,t.wy)((0,t._)("input",{type:"number",step:"0.5",onChange:xa,"onUpdate:modelValue":e[4]||(e[4]=l=>Dl.value.discount=l),class:"form-control form-control-sm",placeholder:"Discount"},null,544),[[s.nr,Dl.value.discount]]),V.value?.discount?((0,t.wg)(),(0,t.iD)("p",fl,(0,o.zw)(V.value?.discount),1)):(0,t.kq)("",!0)])]),(0,t._)("div",hl,[(0,t._)("div",wl,[xl,(0,t._)("div",kl,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":e[5]||(e[5]=l=>Dl.value.tax=l),onChange:xa,placeholder:"e.g 3%"},null,544),[[s.nr,Dl.value.tax]]),(0,t.wy)((0,t._)("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>Dl.value.tax_type=l),onChange:xa,class:"",style:{width:"60px !important"}},Vl,544),[[s.bM,Dl.value.tax_type]])]),V.value.tax?((0,t.wg)(),(0,t.iD)("p",Sl,(0,o.zw)(V.value.tax),1)):(0,t.kq)("",!0)])])]),(0,t._)("div",Ul,[(0,t._)("div",zl,[(0,t._)("div",Cl,[Hl,(0,t._)("input",{type:"text",readonly:"",value:wa.value,class:"form-control form-control-sm",placeholder:"Total"},null,8,Tl)])]),(0,t._)("div",Zl,[(0,t._)("div",Al,[$l,(0,t.wy)((0,t._)("input",{type:"text",readonly:"","onUpdate:modelValue":e[7]||(e[7]=l=>Dl.value.tax_value=l),class:"form-control form-control-sm",placeholder:"Tax Value"},null,512),[[s.nr,Dl.value.tax_value]]),V.value?.tax_value?((0,t.wg)(),(0,t.iD)("p",Il,(0,o.zw)(V.value?.tax_value),1)):(0,t.kq)("",!0)])])]),(0,t._)("div",El,[Nl,(0,t._)("input",{type:"text",readonly:"",value:wa.value,class:"form-control form-control-sm",placeholder:"Select Account"},null,8,Yl)]),Bl,(0,t._)("div",Kl,[Ml,(0,t.wy)((0,t._)("select",{class:"form-control","onUpdate:modelValue":e[8]||(e[8]=l=>Dl.value.account_type_pid=l),onChange:e[9]||(e[9]=l=>Za(l.target.value))},[Fl,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Aa.value,(l=>((0,t.wg)(),(0,t.iD)("option",{key:l.id,value:l.id},(0,o.zw)(l.text),9,Ol)))),128))],544),[[s.bM,Dl.value.account_type_pid]]),V.value?.account_pid?((0,t.wg)(),(0,t.iD)("p",Pl,(0,o.zw)(V.value?.account_pid),1)):(0,t.kq)("",!0)]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Dl.value.accounts,((l,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"row",key:a},[(0,t._)("div",Rl,[(0,t._)("div",Ll,[Ql,(0,t.Wm)((0,n.SU)(c.Z),{modelValue:l.account_pid,"onUpdate:modelValue":a=>l.account_pid=a,options:Ta.value,settings:{width:"100%"},placeholder:"Select Account"},null,8,["modelValue","onUpdate:modelValue","options"]),V.value[`accounts.${a}.account_pid`]?((0,t.wg)(),(0,t.iD)("p",Wl,(0,o.zw)(V.value[`accounts.${a}.account_pid`]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",Gl,[(0,t._)("div",Jl,[jl,(0,t.wy)((0,t._)("input",{type:"number","onUpdate:modelValue":a=>l.amount=a,onChange:xa,step:".05",class:"form-control form-control-sm",placeholder:"e.g 200000"},null,40,Xl),[[s.nr,l.amount]]),V.value[`accounts.${a}.amount`]?((0,t.wg)(),(0,t.iD)("p",la,(0,o.zw)(V.value[`accounts.${a}.amount`]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",aa,[(0,t._)("div",ea,[ta,(0,t._)("div",oa,[(0,t.wy)((0,t._)("input",{type:"date","onUpdate:modelValue":a=>l.date=a,step:".05",class:"form-control form-control-sm",placeholder:"Select Account"},null,8,sa),[[s.nr,l.date]]),(0,t._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:l=>Da(a)},ca,8,na)]),V.value[`accounts.${a}.date`]?((0,t.wg)(),(0,t.iD)("p",ia,(0,o.zw)(V.value[`accounts.${a}.date`]),1)):(0,t.kq)("",!0)])])])))),128)),(0,t._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:ka},ra),pa,(0,t._)("div",ma,[(0,t._)("div",_a,[(0,t._)("div",va,[ba,(0,t.wy)((0,t._)("input",{type:"text",readonly:"","onUpdate:modelValue":e[10]||(e[10]=l=>Dl.value.paid=l),class:"form-control form-control-sm",placeholder:"Amount Paid"},null,512),[[s.nr,Dl.value.paid]])])]),(0,t._)("div",ga,[(0,t._)("div",ya,[fa,(0,t.wy)((0,t._)("input",{type:"text",readonly:"","onUpdate:modelValue":e[11]||(e[11]=l=>Dl.value.balance=l),class:"form-control form-control-sm",placeholder:"Balance"},null,512),[[s.nr,Dl.value.balance]])])])])]),(0,t._)("div",{class:"text-center"},[(0,t._)("button",{type:"button",class:"btn btn-success mt-2 mb-2",onClick:qa},"Submit")])])])])):(0,t.kq)("",!0)])])])]))}};const wa=ha;var xa=wa}}]);
//# sourceMappingURL=8022.6f100fe5.js.map