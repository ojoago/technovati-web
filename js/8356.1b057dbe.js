"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[8356],{8356:function(e,a,l){l.r(a),l.d(a,{default:function(){return N}});l(560);var t=l(3396),s=l(7139),o=l(9242),d=l(2191),i=l(4870),c=l(6091);const n={class:"container mt-2"},u={class:"card"},r=(0,t._)("div",{class:"card-header h3"},"Daily Record",-1),v={class:"card-body"},m={class:"row"},p={class:"col-md-6"},_={class:"table-responsive"},w={class:"table-hover table-stripped table-bordered table"},b=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"TEAM"),(0,t._)("th",null,"TEAM lead"),(0,t._)("th",null,"Member"),(0,t._)("th",null,[(0,t._)("i",{class:"bi bi-gear"})])])],-1),h=["onClick"],f={class:"col-md-6"},y={key:0,class:"border rounded-3 p-2 m-1"},g={class:"float-none w-auto px-2 h5"},k={id:"workForm"},D={class:"border rounded-3 p-2 m-1"},H={key:0,class:"text-danger"},z={class:"row"},x={class:"col-md-6"},M={class:"form-group mb-3"},C=(0,t._)("option",{selected:"",value:""},"Select Activity",-1),Z={key:0,class:"text-danger"},q={class:"col-md-6"},A={class:"form-group"},V={key:0,class:"text-danger"},U={class:"form-label"},S={class:"input-group"},T=["onUpdate:modelValue"],F={id:"deviceForm"},K={class:"row"},R={class:"col-md-12"},Y={class:"form-group"},E=(0,t._)("label",{class:"form-label"},"Activity",-1),O={key:0,class:"text-danger"},W={class:"col-md-12"},j={class:"form-group"},B=(0,t._)("label",{class:"form-label"},"Description",-1),G={key:0,class:"text-danger"},I="modal-xs";var J={__name:"DailyRecordView",setup(e){const a=(0,i.iH)(!1),l=()=>{a.value=!0},J=()=>{a.value=!1},L=(0,i.iH)({}),N=(0,i.iH)({activity:"",description:""}),P=(0,i.iH)(null);function Q(){L.value=[];let e=document.querySelector("#deviceForm");d.Z.dispatch("postMethod",{url:"/create-activity",param:N.value,form:e}).then((e=>{422==e?.status?L.value=e.data:201==e?.status&&(J(),ue())}))}P.value=d.Z?.state?.activeRole;const X=(0,i.iH)({});function $(){d.Z.dispatch("getMethod",{url:"/load-team/"+P.value}).then((e=>{200==e?.status&&(X.value=e.data)}))}$();const ee=(0,i.iH)({}),ae=(0,i.iH)({});function le(e){ae.value=e,te.value.team_lead=e?.lead?.pid,te.value.team_pid=e?.pid,ee.value={},d.Z.dispatch("getMethod",{url:"/load-team-member/"+e?.pid}).then((e=>{200==e?.status&&(ee.value=e.data)}))}const te=(0,i.iH)({team_pid:"",team_lead:"",device:"",date:"",record:[]}),se=()=>{te.value={team_pid:"",team_lead:"",device:"",date:"",record:[]},oe.value={}},oe=(0,i.iH)({});function de(){te.value.record.push(oe.value),L.value="",d.Z.dispatch("postMethod",{url:"submit-work-sheet",param:te.value}).then((e=>{422==e?.status?L.value=e.data:201==e?.status&&se()})).catch((e=>{console.log(e)}))}const ie=(0,i.iH)({});function ce(){d.Z.dispatch("loadDropdown","users").then((({data:e})=>{ie.value=e})).catch((e=>{console.log(e)}))}ce();const ne=(0,i.iH)({});function ue(){d.Z.dispatch("loadDropdown","device").then((({data:e})=>{ne.value=e})).catch((e=>{console.log(e)}))}return ue(),(e,d)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",n,[(0,t._)("div",u,[r,(0,t._)("div",v,[(0,t._)("button",{class:"btn btn-sm btn-primary m-2",onClick:l},"Add Device"),(0,t._)("div",m,[(0,t._)("div",p,[(0,t._)("div",_,[(0,t._)("table",w,[b,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(X.value.data,((e,a)=>((0,t.wg)(),(0,t.iD)("tr",{key:a},[(0,t._)("td",null,(0,s.zw)(e.team),1),(0,t._)("td",null,(0,s.zw)(e?.lead?.username),1),(0,t._)("td",null,(0,s.zw)(e.teams_count),1),(0,t._)("td",null,[(0,t._)("i",{class:"bi bi-forward pointer",onClick:a=>le(e)},null,8,h)])])))),128))])])])]),(0,t._)("div",f,[ee.value.length?((0,t.wg)(),(0,t.iD)("fieldset",y,[(0,t._)("legend",g,(0,s.zw)(ae.value.team)+" Members",1),(0,t._)("form",k,[(0,t._)("fieldset",D,[L.value?.team_lead?((0,t.wg)(),(0,t.iD)("p",H,(0,s.zw)(L.value?.team_lead[0]),1)):(0,t.kq)("",!0),(0,t._)("div",z,[(0,t._)("div",x,[(0,t._)("div",M,[(0,t.wy)((0,t._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":d[0]||(d[0]=e=>te.value.device=e)},[C,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(ne.value,(e=>((0,t.wg)(),(0,t.iD)("option",{key:e.id},(0,s.zw)(e.text),1)))),128))],512),[[o.bM,te.value.device]]),L.value?.device?((0,t.wg)(),(0,t.iD)("p",Z,(0,s.zw)(L.value?.device[0]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",q,[(0,t._)("div",A,[(0,t.wy)((0,t._)("input",{type:"date","onUpdate:modelValue":d[1]||(d[1]=e=>te.value.date=e),class:"form-control form-control-sm",placeholder:"e.g 10"},null,512),[[o.nr,te.value.date]]),L.value?.date?((0,t.wg)(),(0,t.iD)("p",V,(0,s.zw)(L.value?.date[0]),1)):(0,t.kq)("",!0)])])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(ee.value,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"col-md-12",key:a},[(0,t._)("label",U,(0,s.zw)(2==e.type?e.casual.username:e.user.username)+" "+(0,s.zw)(2==e.type?e.casual.staff_id:e.user.staff_id),1),(0,t._)("div",S,[(0,t.wy)((0,t._)("input",{type:"number","onUpdate:modelValue":a=>oe.value[e.pid]=a,class:"form-control form-control-sm",placeholder:"e.g 10"},null,8,T),[[o.nr,oe.value[e.pid]]])])])))),128))]),(0,t._)("div",{class:"float-end"},[(0,t._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:de},"Submit")])])])):(0,t.kq)("",!0)])])])])]),(0,t.Wm)(c.Z,{isOpen:a.value,"modal-class":I,title:"Create Activity ",onSubmit:Q,onModalClose:J},{content:(0,t.w5)((()=>[(0,t._)("form",F,[(0,t._)("div",K,[(0,t._)("div",R,[(0,t._)("div",Y,[E,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":d[2]||(d[2]=e=>N.value.activity=e),class:"form-control",placeholder:"e.g activity A"},null,512),[[o.nr,N.value.activity]]),L.value?.activity?((0,t.wg)(),(0,t.iD)("p",O,(0,s.zw)(L.value?.activity[0]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",W,[(0,t._)("div",j,[B,(0,t.wy)((0,t._)("textarea",{type:"text","onUpdate:modelValue":d[3]||(d[3]=e=>N.value.description=e),class:"form-control",placeholder:"describe the device"},null,512),[[o.nr,N.value.description]]),L.value?.description?((0,t.wg)(),(0,t.iD)("p",G,(0,s.zw)(L.value?.description[0]),1)):(0,t.kq)("",!0)])])])])])),_:1},8,["isOpen"])]))}};const L=J;var N=L}}]);
//# sourceMappingURL=8356.1b057dbe.js.map