"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[6374],{5658:function(e,l,t){function a(){function e(e,t="axios"){const a=[];if("axios"==t&&e)for(let o in e){if(-1!==o.indexOf(".")){let t=l(o);a[t]=e[o][0]}else a[o]=e[o][0];a[o]=e[o][0]}return a}function l(e){const l=e.split(".").filter((e=>e)),t=e.split(".").filter((e=>!isNaN(e)));return l[2]+t.map(Number)}return{transformValidationErrors:e}}t.d(l,{Z:function(){return a}})},6374:function(e,l,t){t.r(l),t.d(l,{default:function(){return Te}});t(560);var a=t(3396),o=t(7139),n=t(9242),s=t(4870),c=t(2191),u=t(6204),d=t(2524),i=t(5658);const r={class:"container mt-2"},p={class:"card"},m=(0,a._)("div",{class:"card-header"},[(0,a._)("h3",null,"Expense")],-1),_={class:"card-body"},v={action:""},b={class:"col-md-4"},g={class:"form-group"},f=(0,a._)("label",{class:"form-label small"},"Record Expense In",-1),y=(0,a._)("option",{value:"",selected:""},"Select Type",-1),w=["value"],h={key:0,class:"text-danger"},k={class:"border rounded-3 p-2 m-1"},D=(0,a._)("legend",{class:"float-none w-auto px-2"},"Expense Details",-1),x={class:"col-md-4"},V={class:"form-group"},U=(0,a._)("label",{class:"form-label small"},"Expense Type",-1),S={key:0,class:"text-danger"},T={class:"col-md-3"},C={class:"form-group"},E=(0,a._)("label",{class:"form-label small"},"Amount",-1),$=["onUpdate:modelValue"],q={key:0,class:"text-danger"},z={class:"col-md-5"},H={class:"form-group"},Z=(0,a._)("label",{class:"form-label small"},"Description",-1),A={class:"input-group"},I=["onUpdate:modelValue"],N=["onClick"],K=(0,a._)("i",{class:"bi bi-patch-minus"},null,-1),O=[K],Y={key:0,class:"text-danger"},M=(0,a._)("i",{class:"bi bi-plus"},null,-1),P=[M],W={class:"row"},F={class:"col-md-4"},J={class:"border rounded-3 p-2 m-1"},R=(0,a._)("legend",{class:"float-none w-auto px-2"},"Summary",-1),j=["value"],B={class:"form-group"},G=(0,a._)("label",{for:""},"Date",-1),L={key:0,class:"text-danger"},Q={class:"form-group"},X=(0,a._)("label",{for:""},"Discount",-1),ee={key:0,class:"text-danger"},le={class:"col-md-8"},te={class:"border rounded-3 p-2 m-1"},ae=(0,a._)("legend",{class:"float-none w-auto px-2"},"Payment",-1),oe=(0,a._)("option",{value:"",selected:""},"Select Type",-1),ne=["value"],se={class:"col-md-4"},ce={class:"form-group"},ue=(0,a._)("label",{class:"form-label small"},"Account",-1),de={key:0,class:"text-danger"},ie={class:"col-md-4"},re={class:"form-group"},pe=(0,a._)("label",{class:"form-label small"},"Amount",-1),me=["onUpdate:modelValue"],_e={key:0,class:"text-danger"},ve={class:"col-md-4"},be={class:"form-group"},ge=(0,a._)("label",{class:"form-label small"},"Date",-1),fe={class:"input-group"},ye=["onUpdate:modelValue"],we=["onClick"],he=(0,a._)("i",{class:"bi bi-patch-minus"},null,-1),ke=[he],De={key:0,class:"text-danger"},xe=(0,a._)("i",{class:"bi bi-plus"},null,-1),Ve=[xe];var Ue={__name:"AddExpense",setup(e){const{numberFormat:l}=(0,d.H)(),{transformValidationErrors:t}=(0,i.Z)(),K=(0,s.iH)({account_type_pid:"",payment_account:"",sub_total:0,discount:0,date:"",details:[{account_pid:"",description:"",amount:0}],accounts:[{date:"",account_pid:"",amount:"",note:""}]}),M=()=>{K.value={payment_account:"",account_type_pid:"",sub_total:0,discount:0,paid:0,details:[{account_pid:"",description:"",amount:0}],accounts:[{date:"",account_pid:"",description:"",amount:0}]}},he=()=>{K.value.details.push({account_pid:"",description:"",amount:0})},xe=e=>{let l=K.value.details.length;1!==l?(K.value.details.splice(e,1),Ue()):c.Z.commit("notify",{message:"One Item is required to proceed",type:"warning"})},Ue=()=>{K.value.sub_total=K.value.details.reduce(((e,{amount:l})=>Number(e)+Number(l)),0)},Se=()=>{K.value.accounts.push({account_pid:"",description:"",amount:""})},Te=e=>{let l=K.value.accounts.length;1!==l?K.value.accounts.splice(e,1):c.Z.commit("notify",{message:"One Account is required",type:"warning"})},Ce=()=>{Ee.value=[],c.Z.dispatch("postMethod",{url:"/add-expense",param:K.value}).then((e=>{422==e?.status?(Ee.value=t(e.data),console.log(Ee.value)):201==e?.status&&M()})).catch((e=>{console.log(e)}))},Ee=(0,s.iH)({}),$e=(0,s.iH)({});function qe(){c.Z.dispatch("loadDropdown","account-types").then((({data:e})=>{$e.value=e})).catch((e=>{console.log(e)}))}qe();const ze=(0,s.iH)({});function He(e){c.Z.dispatch("loadDropdown","type-accounts/"+e).then((({data:e})=>{ze.value=e})).catch((e=>{console.log(e)}))}const Ze=(0,s.iH)({});function Ae(e){c.Z.dispatch("loadDropdown","type-accounts/"+e).then((({data:e})=>{Ze.value=e})).catch((e=>{console.log(e)}))}Ne();const Ie=(0,s.iH)({});function Ne(){c.Z.dispatch("loadDropdown","suppliers").then((({data:e})=>{Ie.value=e})).catch((e=>{console.log(e)}))}return(0,a.bv)((()=>{let e=localStorage.getItem("TVATI_EDIT_ESP")?JSON.parse(localStorage.getItem("TVATI_EDIT_ESP")):"null";"null"!=e&&(He(e.account_type_pid),Ae(e.payment_account),K.value=e)})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",r,[(0,a._)("div",p,[m,(0,a._)("div",_,[(0,a._)("fieldset",null,[(0,a._)("form",v,[(0,a._)("div",b,[(0,a._)("div",g,[f,(0,a.wy)((0,a._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=e=>K.value.account_type_pid=e),onChange:t[1]||(t[1]=e=>He(e.target.value))},[y,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($e.value,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,o.zw)(e.text),9,w)))),128))],544),[[n.bM,K.value.account_type_pid]]),Ee.value?.account_type_pid?((0,a.wg)(),(0,a.iD)("p",h,(0,o.zw)(Ee.value?.account_type_pid),1)):(0,a.kq)("",!0)])]),(0,a._)("fieldset",k,[D,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.value.details,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"row",key:l},[(0,a._)("div",x,[(0,a._)("div",V,[U,(0,a.Wm)((0,s.SU)(u.Z),{modelValue:e.account_pid,"onUpdate:modelValue":l=>e.account_pid=l,options:ze.value,settings:{width:"100%"},placeholder:"Select Type"},null,8,["modelValue","onUpdate:modelValue","options"]),Ee.value[`details.${l}.account_pid`]?((0,a.wg)(),(0,a.iD)("p",S,(0,o.zw)(Ee.value[`details.${l}.account_pid`]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",T,[(0,a._)("div",C,[E,(0,a.wy)((0,a._)("input",{type:"number",step:"0.5",onChange:Ue,class:"form-control form-control-sm","onUpdate:modelValue":l=>e.amount=l,placeholder:"e.g 300000"},null,40,$),[[n.nr,e.amount]]),Ee.value[`details.${l}.amount`]?((0,a.wg)(),(0,a.iD)("p",q,(0,o.zw)(Ee.value[`details.${l}.amount`]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",z,[(0,a._)("div",H,[Z,(0,a._)("div",A,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":l=>e.description=l,placeholder:"e.g new consignment"},null,8,I),[[n.nr,e.description]]),(0,a._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e=>xe(l)},O,8,N)]),Ee.value[`details.${l}.description`]?((0,a.wg)(),(0,a.iD)("p",Y,(0,o.zw)(Ee.value[`details.${l}.description`]),1)):(0,a.kq)("",!0)])])])))),128)),(0,a._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:he},P)]),(0,a._)("div",W,[(0,a._)("div",F,[(0,a._)("fieldset",J,[R,(0,a._)("input",{type:"text",value:(0,s.SU)(l)(K.value.sub_total),class:"form-control form-control-sm",disabled:"",placeholder:"Sub Total"},null,8,j),(0,a._)("div",B,[G,(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>K.value.date=e),class:"form-control form-control-sm"},null,512),[[n.nr,K.value.date]]),Ee.value?.date?((0,a.wg)(),(0,a.iD)("p",L,(0,o.zw)(Ee.value?.date),1)):(0,a.kq)("",!0)]),(0,a._)("div",Q,[X,(0,a.wy)((0,a._)("input",{type:"number",step:"0.5","onUpdate:modelValue":t[3]||(t[3]=e=>K.value.discount=e),class:"form-control form-control-sm",placeholder:"Discount"},null,512),[[n.nr,K.value.discount]]),Ee.value?.discount?((0,a.wg)(),(0,a.iD)("p",ee,(0,o.zw)(Ee.value?.discount),1)):(0,a.kq)("",!0)])])]),(0,a._)("div",le,[(0,a._)("fieldset",te,[ae,(0,a.wy)((0,a._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[4]||(t[4]=e=>K.value.payment_account=e),onChange:t[5]||(t[5]=e=>Ae(e.target.value))},[oe,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($e.value,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,o.zw)(e.text),9,ne)))),128))],544),[[n.bM,K.value.payment_account]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.value.accounts,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"row",key:l},[(0,a._)("div",se,[(0,a._)("div",ce,[ue,(0,a.Wm)((0,s.SU)(u.Z),{modelValue:e.account_pid,"onUpdate:modelValue":l=>e.account_pid=l,options:Ze.value,settings:{width:"100%"},placeholder:"Select Account"},null,8,["modelValue","onUpdate:modelValue","options"]),Ee.value[`accounts.${l}.account_pid`]?((0,a.wg)(),(0,a.iD)("p",de,(0,o.zw)(Ee.value[`accounts.${l}.account_pid`]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",ie,[(0,a._)("div",re,[pe,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":l=>e.amount=l,step:".05",class:"form-control form-control-sm",placeholder:"Enter Amount"},null,8,me),[[n.nr,e.amount]]),Ee.value[`accounts.${l}.amount`]?((0,a.wg)(),(0,a.iD)("p",_e,(0,o.zw)(Ee.value[`accounts.${l}.amount`]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",ve,[(0,a._)("div",be,[ge,(0,a._)("div",fe,[(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":l=>e.date=l,class:"form-control form-control-sm"},null,8,ye),[[n.nr,e.date]]),(0,a._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e=>Te(l)},ke,8,we)]),Ee.value[`accounts.${l}.date`]?((0,a.wg)(),(0,a.iD)("p",De,(0,o.zw)(Ee.value[`accounts.${l}.date`]),1)):(0,a.kq)("",!0)])])])))),128)),(0,a._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:Se},Ve)])])]),(0,a._)("button",{type:"button",class:"btn btn-primary mt-2",onClick:Ce},"Submit")])])])])])]))}};const Se=Ue;var Te=Se}}]);
//# sourceMappingURL=6374.d32f90c4.js.map