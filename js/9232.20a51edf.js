"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[9232],{6757:function(e,t,l){l.d(t,{Z:function(){return y}});var a=l(3396),n=l(7139),u=l(2191),i=l(6091),o=l(4870);const s=e=>((0,a.dD)("data-v-4b9f5ed4"),e=e(),(0,a.Cn)(),e),c={class:"attendance-card shadow"},r={class:"card-title h6 text-center"},d={class:"col-outer"},v={class:"col-inner"},g=s((()=>(0,a._)("hr",null,null,-1))),_={class:"col-inner"},w=s((()=>(0,a._)("hr",null,null,-1))),m={key:0,class:"container text-center"},h=["src"],k=s((()=>(0,a._)("div",null,null,-1)));var p={__name:"AttendanceComponent",setup(e){const t=(0,o.iH)(!1),l=(0,o.iH)(null);l.value=(new Date).toDateString();const s=(0,o.iH)();function p(){s.value=(new Date).toLocaleTimeString()}setInterval((()=>p()),1e3);const b=(0,o.iH)("--:--"),f=(0,o.iH)("--:--"),y=(0,o.iH)(null),C=()=>{t.value=!1,S()},D=()=>{t.value=!0,A()},H=(0,o.iH)(null),z=(0,o.iH)(null),x=(0,o.iH)(null),U=(0,o.iH)(!1),O=(0,o.iH)(!0);let T=null;const Z=(0,o.iH)({}),A=async()=>{try{x.value=null,U.value=!0,O.value=!0,T=await navigator.mediaDevices.getUserMedia({video:!0}),H.value.srcObject=T}catch(e){console.error("Error accessing webcam:",e)}},M=async()=>{q(),I();const e=z.value.getContext("2d");e.drawImage(H.value,0,0,z.value.width,z.value.height),S(),x.value=z.value.toDataURL("image/png"),Z.value.image=x,W()},q=()=>{const e=navigator.platform;let t;t=e.toLowerCase().includes("win")?"Windows":e.toLowerCase().includes("mac")?"macOS":e.toLowerCase().includes("linux")?"Linux":"Unknown OS",Z.value.platform=t},I=()=>{const e=navigator.userAgent;let t;t=e.includes("Chrome")?"Google Chrome":e.includes("Firefox")?"Mozilla Firefox":e.includes("Safari")?"Apple Safari":e.includes("Edge")?"Microsoft Edge":e.includes("Opera")||e.includes("OPR/")?"Opera":e.includes("Brave")?"Brave":"Unknown Browser",Z.value.browser=t},S=()=>{T&&T.getTracks().forEach((e=>e.stop())),O.value=!1},E=(0,o.iH)(null),L=(0,o.iH)(null);(0,a.bv)((()=>{B()}));const B=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{E.value={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy},Z.value.coordinates=E,console.log(e)}),(e=>{L.value=`Error getting location: ${e.message}`,Z.value.coordinates=null}),{enableHighAccuracy:!0}):(Z.value.coordinates=null,L.value="Geolocation is not supported by your browser.")};function W(){u.Z.dispatch("postMethod",{url:"/clock-in",param:Z.value}).then((e=>{201==e?.status&&(y.value=!0,b.value=e?.data?.time_in,t.value=!1)}))}const j=()=>{u.Z.dispatch("getMethod",{url:"/last-check-in"}).then((e=>{200==e?.status&&N(e?.data)}))};(0,a.bv)((()=>{j()}));const R=()=>{u.Z.dispatch("putMethod",{url:"/clock-out",prompt:"are you sure you want to clock out?"}).then((e=>{201==e?.status&&N(e?.data)}))},N=e=>{null==e?y.value=!1:(b.value=e?.time_in,y.value=!0,null!=e.time_out&&(f.value=e?.time_out,y.value=null))};return(e,u)=>{const o=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",c,[(0,a._)("h5",r,[(0,a.Uk)((0,n.zw)(l.value)+" ",1),(0,a._)("span",null,"| "+(0,n.zw)(s.value),1)]),(0,a._)("div",d,[(0,a._)("div",v,[(0,a.Uk)(" Time in "),g,(0,a.Uk)(" "+(0,n.zw)(b.value),1)]),(0,a._)("div",_,[(0,a.Uk)(" time out "),w,(0,a.Uk)(" "+(0,n.zw)(f.value),1)])]),0==y.value?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:D,class:"btn btn-sm btn-primary actionBtn"},"Clock In")):(0,a.kq)("",!0),1==y.value?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:R,class:"btn btn-sm btn-danger actionBtn"},"Clock Out")):(0,a.kq)("",!0)]),(0,a.Wm)(i.Z,{isOpen:t.value,"modal-class":"modal-sm",title:"Take Attendance",onModalClose:C},{content:(0,a.w5)((()=>[(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[O.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:A,class:"btn btn-sm btn-success"},"Retake"))])),_:1}),U.value?((0,a.wg)(),(0,a.iD)("div",m,[O.value?((0,a.wg)(),(0,a.iD)("video",{key:0,ref_key:"video",ref:H,width:"250",height:"250",autoplay:""},null,512)):(0,a.kq)("",!0),(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[O.value?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:M,class:"text-center btn btn-sm btn-success"},"CAPTURE")):(0,a.kq)("",!0)])),_:1}),(0,a._)("canvas",{ref_key:"canvas",ref:z,width:"250",height:"250",style:{display:"none"}},null,512),x.value?((0,a.wg)(),(0,a.iD)("img",{key:1,src:x.value,alt:"Captured Image"},null,8,h)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])),footer:(0,a.w5)((()=>[k])),_:1},8,["isOpen"])])}}},b=l(89);const f=(0,b.Z)(p,[["__scopeId","data-v-4b9f5ed4"]]);var y=f},9232:function(e,t,l){l.r(t),l.d(t,{default:function(){return y}});var a=l(3396),n=l(7139),u=l(2191),i=l(6757),o=l(4870);const s=e=>((0,a.dD)("data-v-688f0020"),e=e(),(0,a.Cn)(),e),c={class:"container"},r={class:"card"},d={class:"card-header"},v={class:"card-body"},g={class:"table-responsive"},_={class:"table-hover table-stripped table-bordered table"},w=s((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"S/N"),(0,a._)("th",null,"Time In"),(0,a._)("th",null,"Time Out"),(0,a._)("th",null,"status"),(0,a._)("th",null,"platform"),(0,a._)("th",null,"ip"),(0,a._)("th",null,"path")])],-1))),m=["src"],h={class:"flex justify-center mt-4"},k={class:"relative justify-center rounded-md shadow pagination"};var p={__name:"AttendanceView",setup(e){l();const t=(0,o.iH)({});function l(e="/load-attendance"){u.Z.dispatch("getMethod",{url:e}).then((e=>{200==e?.status&&(t.value=e.data)}))}function s(e){e.url&&!e.active&&l(e.url)}return(e,l)=>{const u=(0,a.up)("pagination-links");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",c,[(0,a._)("div",r,[(0,a._)("div",d,[(0,a.Uk)(" Attendance "),(0,a.Wm)(i.Z)]),(0,a._)("div",v,[(0,a._)("div",g,[(0,a._)("table",_,[w,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value.data,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,n.zw)(t+1),1),(0,a._)("td",null,(0,n.zw)(e.week_day)+" "+(0,n.zw)(e.time_in),1),(0,a._)("td",null,(0,n.zw)(e.time_out),1),(0,a._)("td",null,(0,n.zw)(e.attendance_status),1),(0,a._)("td",null,(0,n.zw)(e.platform),1),(0,a._)("td",null,(0,n.zw)(e.ip),1),(0,a._)("td",null,[(0,a._)("img",{src:e.path,alt:"",class:"img img-responsive tend-image",id:"student-img"},null,8,m)])])))),128))])]),(0,a._)("div",h,[(0,a._)("nav",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value.links,((e,t)=>((0,a.wg)(),(0,a.j4)(u,{link:e,key:t,onNext:t=>s(e)},null,8,["link","onNext"])))),128))])])])])])])])}}},b=l(89);const f=(0,b.Z)(p,[["__scopeId","data-v-688f0020"]]);var y=f}}]);
//# sourceMappingURL=9232.20a51edf.js.map