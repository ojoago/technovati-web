"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[2982],{1187:function(e,l,t){t.d(l,{Z:function(){return o}});var a=t(3396);const s=["disabled","innerHTML"];var n={__name:"PaginationLinks",props:{link:Object},emits:["next"],setup(e){return(l,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("li",{class:"page-item",onClick:t[0]||(t[0]=t=>l.$emit("next",e.link))},[(0,a._)("span",{class:"page-link pointer",href:"#",disabled:!e.link.url,innerHTML:e.link.label},null,8,s)])]))}};const u=n;var o=u},2982:function(e,l,t){t.r(l),t.d(l,{default:function(){return G}});var a=t(3396),s=t(7139),n=t(9242),u=t(4870),o=t(2191),i=t(1187),r=t(6091);const d=e=>((0,a.dD)("data-v-6d6ca8aa"),e=e(),(0,a.Cn)(),e),c={class:"container my-2"},v={class:"card"},p={class:"card-body"},_=d((()=>(0,a._)("h3",{class:"mx-3"},"Staff fund Request",-1))),m={class:"table-responsive"},b={class:"table-hover table-stripped table-bordered table"},f=d((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"SN"),(0,a._)("th",{width:"40%"},"Purpose"),(0,a._)("th",null,"Amount Requested"),(0,a._)("th",null,"Amount Approved"),(0,a._)("th",null,"Status"),(0,a._)("th",null,"Date "),(0,a._)("th",null,"Image "),(0,a._)("th",null,[(0,a._)("i",{class:"bi bi-gear-fill"})])])],-1))),k=["src"],g=["onClick"],h={key:1},w=["onClick"],y=["onClick"],q={class:"flex justify-center mt-4"},C={class:"relative justify-center rounded-md shadow pagination"},D={class:"row"},x={class:"col-md-12"},H={class:"form-label"},U={class:"col-md-12"},z={class:"form-group"},A=d((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Approve Amount: "),(0,a._)("span",{class:"text-danger"},"*")],-1))),Z=d((()=>(0,a._)("br",null,null,-1))),M={key:0,class:"text-danger"},R={class:"col-md-12"},j={class:"form-group"},L=d((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Approve? "),(0,a._)("span",{class:"text-danger"},"*")],-1))),N=d((()=>(0,a._)("br",null,null,-1))),S=d((()=>(0,a._)("label",{for:"yes"},"Yes",-1))),T=d((()=>(0,a._)("label",{for:"no"},"No",-1))),O={key:0,class:"text-danger"};var V={__name:"ManageFundRequest",setup(e){const l=(0,u.iH)(!1),t=()=>{l.value=!1,$.value={}},d=(0,u.iH)(null),V=(0,u.iH)(null);d.value=o.Z?.state?.user?.data?.pid,V.value=o.Z?.state?.approvalLevel;const Y=(0,u.iH)([1,5]);2==V.value?Y.value=[2,6]:3==V.value?Y.value=[3,7]:4==V.value&&(Y.value=[4,8]);const $=(0,u.iH)({});function G(e){$.value=e,l.value=!0}function I(){o.Z.dispatch("postMethod",{url:"/approve-fund-amount",param:$.value}).then((e=>{422==e?.status?K.value=e.data:201==e?.status&&(K.value={},t())}))}const K=(0,u.iH)({});function P(e="/load-staff-fund-request"){o.Z.dispatch("getMethod",{url:e}).then((e=>{K.value=200==e?.status?e.data:{}}))}function F(e,l){o.Z.dispatch("putMethod",{url:`/update-fund-request-status/${e}/${l}`,prompt:"Are you sure, you want to update the status of this request?"}).then((e=>{201==e?.status&&P()}))}function W(e){e.url&&!e.active&&P(e.url)}return P(),(e,u)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",c,[(0,a._)("div",v,[(0,a._)("div",p,[_,(0,a._)("div",m,[(0,a._)("table",b,[f,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.value?.data,((e,l)=>((0,a.wg)(),(0,a.iD)("tr",{key:l},[(0,a._)("td",null,(0,s.zw)(l+1),1),(0,a._)("td",null,(0,s.zw)(e.purpose),1),(0,a._)("td",null,(0,s.zw)(e.requested),1),(0,a._)("td",null,(0,s.zw)(e.approved),1),(0,a._)("td",null,(0,s.zw)(e.request_status),1),(0,a._)("td",null,(0,s.zw)(e.date),1),(0,a._)("td",null,[(0,a._)("img",{src:e.image,alt:"",class:"img img-responsive tend-image"},null,8,k)]),(0,a._)("td",null,[2==V.value&&1==e.status?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-sm btn-success",onClick:l=>G(e)},"Respond",8,g)):e.status+1==V.value||e.line_manager==d.value&&0==e.status?((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("button",{class:"btn btn-sm btn-success",onClick:l=>F(e.pid,Y.value[0])},"Approve",8,w),(0,a._)("button",{class:"btn btn-sm btn-secondary",onClick:l=>F(e.pid,Y.value[1])},"Reject",8,y)])):(0,a.kq)("",!0)])])))),128))])]),(0,a._)("div",q,[(0,a._)("nav",C,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.value.links,((e,l)=>((0,a.wg)(),(0,a.j4)(i.Z,{link:e,key:l,onNext:l=>W(e)},null,8,["link","onNext"])))),128))])])])])])]),(0,a.Wm)(r.Z,{isOpen:l.value,onSubmit:I,"modal-class":"modal-sm",title:"Request Leave",onModalClose:t},{content:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("form",null,[(0,a._)("div",D,[(0,a._)("div",x,[(0,a._)("label",H,"Amount Requested "+(0,s.zw)($.value.requested),1)]),(0,a._)("div",U,[(0,a._)("div",z,[A,(0,a.Uk)(),Z,(0,a.wy)((0,a._)("input",{type:"number",step:".5","onUpdate:modelValue":u[0]||(u[0]=e=>$.value.approved_amount=e),class:"form-control form-control-sm",placeholder:"e.g 5000"},null,512),[[n.nr,$.value.approved_amount]]),e.errors?.status?((0,a.wg)(),(0,a.iD)("p",M,(0,s.zw)(e.errors?.status[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",R,[(0,a._)("div",j,[L,(0,a.Uk)(),N,S,(0,a.Uk)("   "),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":u[1]||(u[1]=e=>$.value.status=e),type:"radio",id:"yes",value:"2"},null,512),[[n.G2,$.value.status]]),(0,a.Uk)("       "),T,(0,a.Uk)("   "),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":u[2]||(u[2]=e=>$.value.status=e),type:"radio",id:"no",value:"6"},null,512),[[n.G2,$.value.status]]),e.errors?.status?((0,a.wg)(),(0,a.iD)("p",O,(0,s.zw)(e.errors?.status[0]),1)):(0,a.kq)("",!0)])])])])])])),_:1},8,["isOpen"])]))}},Y=t(89);const $=(0,Y.Z)(V,[["__scopeId","data-v-6d6ca8aa"]]);var G=$}}]);
//# sourceMappingURL=2982.b5664ecf.js.map