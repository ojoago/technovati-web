{"version":3,"file":"js/4105.41e199df.js","mappings":"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","sources":["webpack://Technovati/./src/composables/formatError.js","webpack://Technovati/./src/components/PaginationLinks.vue","webpack://Technovati/./src/views/leave/LeaveView.vue","webpack://Technovati/./src/views/leave/LeaveView.vue?842f"],"sourcesContent":["\r\nexport function formatError() {\r\n    function transformValidationErrors(response , handleType = 'axios'){\r\n        const errors = []\r\n        if(handleType == 'axios'){\r\n            if(response){\r\n                for (let key in response) {\r\n                    if(key.indexOf('.') !== -1){\r\n                        let k = trimKey(key);\r\n                        errors[k] = response[key][0]\r\n                    }else{\r\n                        errors[key] = response[key][0]\r\n                    }\r\n                    errors[key] = response[key][0]\r\n                }\r\n            }\r\n        }\r\n        return errors\r\n    }\r\n    \r\n    function trimKey(key){\r\n        const parts = key.split('.').filter(part => (part));\r\n        const part = key.split('.').filter(part => !isNaN(part));\r\n       \r\n        // const numericValues = parts.map(Number);\r\n        return parts[2]+part.map(Number);\r\n\r\n// console.log(numericValues);\r\n    }\r\n\r\n    return {\r\n        transformValidationErrors\r\n    }\r\n}","import script from \"./PaginationLinks.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PaginationLinks.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div>\r\n        <div class=\"container-fluid mt-2\">\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                    <h3 class=\"card-title\">Leave Configuration</h3>\r\n\r\n                    <!-- Default Tabs -->\r\n                    <ul class=\"nav nav-tabs d-flex\" id=\"myTabjustified\" role=\"tablist\">\r\n                        <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                            <button class=\"nav-link w-100 active\" id=\"config-tab\" data-bs-toggle=\"tab\"\r\n                                data-bs-target=\"#config\" type=\"button\" role=\"tab\" aria-controls=\"config\"\r\n                                aria-selected=\"true\">Config</button>\r\n                        </li>\r\n                        <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                            <button class=\"nav-link w-100\" id=\"request-tab\" data-bs-toggle=\"tab\"\r\n                                data-bs-target=\"#request\" type=\"button\" role=\"tab\" aria-controls=\"request\"\r\n                                aria-selected=\"false\">Assign Leave</button>\r\n                        </li>\r\n\r\n                    </ul>\r\n                    <div class=\"tab-content pt-2\" id=\"myTabjustifiedContent\">\r\n                        <div class=\"tab-pane fade show active\" id=\"config\" role=\"tabpanel\" aria-labelledby=\"config-tab\">\r\n\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-4\">\r\n                                    <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                        <legend class=\"float-none w-auto px-2\">Add Leave</legend>\r\n                                        <form id=\"lform\">\r\n                                            <div class=\"row\">\r\n                                                <div class=\"col-md-12\">\r\n                                                    <div class=\"form-group\">\r\n                                                        <label class=\"form-label\">Leave <span\r\n                                                                class=\"text-danger\">*</span></label>\r\n                                                        <input type=\"text\" v-model=\"leave.leave\" class=\"form-control\"\r\n                                                            placeholder=\"e.g annual leave\">\r\n                                                        <p class=\"text-danger \" v-if=\"errors?.leave\">{{ errors?.leave\r\n                                                            }}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"col-md-12\">\r\n                                                    <div class=\"form-group\">\r\n                                                        <label class=\"form-label\">Days</label>\r\n                                                        <input type=\"number\" v-model=\"leave.days\" class=\"form-control\"\r\n                                                            placeholder=\"e.g 15 \">\r\n                                                        <p class=\"text-danger \" v-if=\"errors?.days\">{{ errors?.days\r\n                                                            }}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"col-md-12\">\r\n                                                    <div class=\"form-group\">\r\n                                                        <label class=\"form-label\">Description </label>\r\n                                                        <textarea type=\"text\" v-model=\"leave.description\"\r\n                                                            class=\"form-control\"\r\n                                                            placeholder=\"e.g any description\"></textarea>\r\n                                                        <p class=\"text-danger \" v-if=\"errors?.description\">{{\r\n                                                            errors?.description }}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <button type=\"button\" class=\"btn btn-success btn-sm mt-2\"\r\n                                                @click=\"createLeave\">Submit</button>\r\n                                        </form>\r\n                                    </fieldset>\r\n                                </div>\r\n                                <div class=\"col-md-8\">\r\n                                    <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                        <legend class=\"float-none w-auto px-2\">Leaves</legend>\r\n                                        <div class=\"table-responsive\">\r\n                                            <table class=\"table-hover table-stripped table-bordered table\">\r\n                                                <thead>\r\n                                                    <tr>\r\n                                                        <th>SN</th>\r\n                                                        <th>Leave</th>\r\n                                                        <th>Days</th>\r\n                                                        <th>Description</th>\r\n                                                        <th> <i class=\"bi bi-gear-fill\"></i> </th>\r\n                                                    </tr>\r\n                                                </thead>\r\n                                                <tbody v-if=\"leaves.data\">\r\n                                                    <tr v-for=\"(lv, loop) in leaves.data\" :key=\"loop\">\r\n                                                        <td>{{ loop + 1 }}</td>\r\n                                                        <td>{{ lv.leave }}</td>\r\n                                                        <td>{{ lv.days }}</td>\r\n                                                        <td>{{ lv.description }}</td>\r\n                                                        <td>\r\n                                                            <div class=\"dropdown\">\r\n                                                                <button type=\"button\"\r\n                                                                    class=\"btn btn-primary btn-sm dropdown-toggle\"\r\n                                                                    data-bs-toggle=\"dropdown\">\r\n                                                                    <i class=\"bi bi-tools\"></i>\r\n                                                                </button>\r\n                                                                <ul class=\"dropdown-menu\">\r\n                                                                    <li class=\"bg-warning\"><a\r\n                                                                            class=\"dropdown-item pointer\"\r\n                                                                            @click=\"editLeave(lv)\">Edit</a> </li>\r\n                                                                    <li class=\"bg-danger\"><a\r\n                                                                            class=\"dropdown-item pointer\"\r\n                                                                            @click=\"deleteLeave(lv.pid)\">Delete</a>\r\n                                                                    </li>\r\n                                                                </ul>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                                <tfoot v-else class=\"text-center\" style=\"width: 100%\" width=\"100%\">\r\n                                                    <tr>\r\n                                                        <td colspan=\"50\"><small class=\"small\">No Record Yet</small>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                </tfoot>\r\n                                            </table>\r\n                                            <div class=\"flex justify-center mt-4\">\r\n                                                <nav class=\"relative justify-center rounded-md shadow pagination\">\r\n                                                    <pagination-links v-for=\"(link, i) of leaves.links\" :link=\"link\"\r\n                                                        :key=\"i\" @next=\"nextPage(link)\"></pagination-links>\r\n                                                </nav>\r\n                                            </div>\r\n                                        </div>\r\n                                    </fieldset>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"tab-pane fade\" id=\"request\" role=\"tabpanel\" aria-labelledby=\"request-tab\">\r\n                            <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                <legend class=\"float-none w-auto px-2\">Assign Leave </legend>\r\n                                <button class=\"btn btn-primary btn-sm mb-2\" @click=\"assignFunc\">Assign</button>\r\n                                <div class=\"table-responsive\">\r\n                                    <table class=\"table-hover table-stripped table-bordered table\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>SN</th>\r\n                                                <th>Leave</th>\r\n                                                <th>Days</th>\r\n                                                <th>Designation</th>\r\n                                                <!-- <th> <i class=\"bi bi-gear-fill\"></i> </th> -->\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody v-if=\"dlvx\">\r\n                                            <tr v-for=\"(lv, loop) in dlvx\" :key=\"loop\">\r\n                                                <td>{{ loop + 1 }}</td>\r\n                                                <td>{{ lv.leave }}</td>\r\n                                                <td>{{ lv.days }}</td>\r\n                                                <td>{{ lv.name }}</td>\r\n\r\n                                                <!-- <td>\r\n                                                    <div class=\"dropdown\">\r\n                                                        <button type=\"button\" class=\"btn btn-primary btn-sm\">\r\n                                                            Remove\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </td> -->\r\n                                            </tr>\r\n                                        </tbody>\r\n                                        <tfoot v-else class=\"text-center\" style=\"width: 100%\" width=\"100%\">\r\n                                            <tr>\r\n                                                <td colspan=\"50\"><small class=\"small\">No Record Yet</small> </td>\r\n                                            </tr>\r\n                                        </tfoot>\r\n                                    </table>\r\n                                </div>\r\n                            </fieldset>\r\n                        </div>\r\n                    </div>\r\n                    <!-- End  Tabs -->\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n        \r\n        <o-modal :isOpen=\"assignModal\" @submit=\"assignLeave\" modal-class=\"modal-sm\" title=\"Assign Leave\"\r\n            @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <div>\r\n                    <form id=\"aForm\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-group\">\r\n                                    <label class=\"form-label\">Leave <span class=\"text-danger\">*</span></label>\r\n                                    <select v-model=\"assign.leave_pid\" class=\"form-control form-control-sm\">\r\n                                        <option value=\"\" selected>Make Selection</option>\r\n                                        <option v-for=\"(leave, i) in lvx\" :key=\"i\" :value=\"leave.id\">{{ leave.text\r\n                                            }} - {{ leave.days }} days</option>\r\n                                    </select>\r\n                                    <p class=\"text-danger \" v-if=\"errors?.leave_pid\">{{ errors?.leave_pid }}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-group\">\r\n                                    <label class=\"form-label\">Designations <span class=\"text-danger\">*</span></label>\r\n                                    <Select2 v-model=\"assign.designation_pid\" :options=\"desigs\"\r\n                                        :settings=\"{ width: '100%' }\" />\r\n\r\n                                    <p class=\"text-danger \" v-if=\"errors?.from\">{{ errors?.from }}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </template>\r\n\r\n        </o-modal>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport store from \"@/store\";\r\nimport { ref } from \"vue\";\r\nimport PaginationLinks from \"@/components/PaginationLinks.vue\";\r\nimport OModal from \"@/components/OModal.vue\";\r\nimport Select2 from 'vue3-select2-component';\r\nimport { formatError } from \"@/composables/formatError\";\r\n const {transformValidationErrors} = formatError()\r\n\r\nconst assignModal = ref(false)\r\nconst closeModal = () => {\r\n    assignModal.value = false;\r\n};\r\n\r\nconst assignFunc = () => {\r\n    assignModal.value = true;\r\n    dropdownLeave()\r\n}\r\nconst errors = ref({});\r\n\r\n// const requests = ref({});\r\nconst leave = ref({\r\n    leave: '',\r\n    days : '',\r\n    description : ''\r\n});\r\nconst resetAttr = () => {\r\n    leave.value = {\r\n        leave: '',\r\n        days: '',\r\n        description: '',\r\n        pid: ''\r\n    }\r\n}\r\nconst leaves = ref({});\r\n\r\nfunction createLeave() {\r\n    errors.value = []\r\n    store.dispatch('postMethod', {url:'/create-leave',param:leave.value}).then((data) => {\r\n        if (data?.status == 422) {\r\n            errors.value = transformValidationErrors(data.data)\r\n        } else if (data?.status == 201) {\r\n            resetAttr()\r\n            loadLeaves()\r\n        }\r\n    }) \r\n}\r\n\r\nconst assign = ref({\r\n    leave_pid:'',\r\n    designation_pid:''\r\n})\r\nconst resetA = () => {\r\n    assign.value = {\r\n        leave_pid: '',\r\n        designation_pid: ''        \r\n    }\r\n}\r\n\r\nfunction assignLeave() {\r\n    errors.value = []\r\n    store.dispatch('postMethod', {url:'/assign-leave',param:assign.value}).then((data) => {\r\n        if (data?.status == 422) {\r\n            errors.value = transformValidationErrors(data.data)\r\n        } else if (data?.status == 201) {\r\n            resetA()\r\n            loadAssignLeave()\r\n        }\r\n    }) \r\n}\r\n\r\nconst editLeave = (lv) =>{\r\n    leave.value = {\r\n        leave: lv.leave ,\r\n        days: lv.days ,\r\n        description: lv.description ,\r\n        pid: lv.pid\r\n    }\r\n}\r\n\r\nconst deleteLeave = (pid) => {\r\n    store.dispatch('deleteMethod',{url:'delete-leave/'+pid}).then((data)=>{\r\n        if(data?.status == 201){\r\n            loadLeaves()\r\n        }\r\n    })\r\n}\r\n \r\nloadLeaves()\r\n\r\nfunction loadLeaves(url = '/load-leaves') {\r\n    store.dispatch('getMethod', { url: url}).then((data) => {\r\n        if (data?.status == 200) {\r\n            leaves.value = data.data;\r\n        }else{\r\n            leaves.value = {}\r\n        }\r\n    })\r\n}\r\n \r\n \r\nloadAssignLeave()\r\nconst dlvx = ref({})\r\nfunction loadAssignLeave() {\r\n    store.dispatch('getMethod', { url: '/load-assigned-leaves'}).then((data) => {\r\n        if (data?.status == 200) {\r\n            dlvx.value = data.data;\r\n        }\r\n    })\r\n}\r\n \r\nconst desigs = ref([]);\r\nfunction dropdownAllow() {\r\n    store.dispatch('loadDropdown', 'designations').then(({ data }) => {\r\n        desigs.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\ndropdownAllow()\r\n\r\nconst lvx = ref([]);\r\nfunction dropdownLeave() {\r\n    store.dispatch('loadDropdown', 'leaves').then(({ data }) => {\r\n        lvx.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\ndropdownLeave()\r\n\r\nfunction nextPage(link) {\r\n\r\n    if (!link.url || link.active) {\r\n        return;\r\n    }\r\n    loadLeaves(link.url)\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./LeaveView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LeaveView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["formatError","transformValidationErrors","response","handleType","errors","key","indexOf","k","trimKey","parts","split","filter","part","isNaN","map","Number","__exports__","assignModal","ref","closeModal","value","assignFunc","dropdownLeave","leave","days","description","resetAttr","pid","leaves","createLeave","store","dispatch","url","param","then","data","status","loadLeaves","assign","leave_pid","designation_pid","resetA","assignLeave","loadAssignLeave","editLeave","lv","deleteLeave","dlvx","desigs","dropdownAllow","catch","e","console","log","lvx","nextPage","link","active"],"sourceRoot":""}