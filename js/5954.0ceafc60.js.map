{"version":3,"file":"js/5954.0ceafc60.js","mappings":"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","sources":["webpack://Technovati/./src/components/PaginationLinks.vue","webpack://Technovati/./src/components/forms/department/AssignDepartmentForm.vue","webpack://Technovati/./src/components/forms/department/AssignDepartmentForm.vue?1b0a","webpack://Technovati/./src/views/users/StaffList.vue","webpack://Technovati/./src/views/users/StaffList.vue?c168"],"sourcesContent":["import script from \"./PaginationLinks.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PaginationLinks.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div>\r\n        <form  >\r\n            <div class=\"row\">\r\n                 <div class=\"col-md-12\">\r\n                    <div class=\"form-group\">\r\n                        <label class=\"form-label\">Department <span class=\"text-danger\">*</span></label>\r\n                        <select v-model=\"dept.department_pid\" class=\"form-control form-control-sm\" @change=\"loadSubDept($event)\">\r\n                            <option value=\"\" selected>Select Department</option>\r\n                            <option v-for=\"dp in departments\" :key=\"dp.id\" :value=\"dp.id\" >{{ dp.text }}</option>\r\n                        </select>\r\n                        <p class=\"text-danger \" v-if=\"errors?.department_pid\">{{ errors?.department_pid[0] }}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-md-12\">\r\n                    <div class=\"form-group\">\r\n                        <label class=\"form-label\">Sub Department </label>\r\n                        <Select2 v-model=\"dept.sub_department\" :options=\"sub\" :settings=\"{ width: '100%' }\"  />\r\n                        <p class=\"text-danger \" v-if=\"errors?.sub_department\">{{ errors?.sub_department[0] }}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <button type=\"button\" class=\"btn btn-success btn-sm mt-2\" @click=\"assignDepartment\">Submit</button>\r\n\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport store from \"@/store\";\r\nimport { ref } from \"vue\";\r\nimport Select2 from 'vue3-select2-component';\r\n\r\nconst props = defineProps({\r\n    user_pid: String,\r\n});\r\nconst dept = ref({\r\n    user_pid: props.user_pid ,\r\n    sub_department: '' ,\r\n    department_pid: '' ,\r\n}) \r\nconst errors = ref({})\r\nfunction assignDepartment() {\r\n    errors.value = []\r\n    store.dispatch('postMethod', { url: '/assign-department', param: dept.value }).then((data) => {\r\n        if (data?.status == 422) {\r\n            errors.value = data.data;\r\n        } \r\n    })\r\n} \r\nconst departments = ref([]);\r\nfunction dropdownDpet() {\r\n    store.dispatch('loadDropdown', 'departments').then(({ data }) => {\r\n        departments.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\n\r\ndropdownDpet()\r\n\r\nconst sub = ref([]);\r\nfunction loadSubDept(event) {\r\n    store.dispatch('loadDropdown', 'sub-departments/' + event.target.value).then(({ data }) => {\r\n        sub.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./AssignDepartmentForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AssignDepartmentForm.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div>\r\n        <div class=\"container-fluid mt-2\">\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                    <h5 class=\"card-title\">Staff List\r\n                        <!-- <router-link to=\"/staff\" class=\"nav-link\">Create Staff</router-link> -->\r\n                    </h5>\r\n\r\n                    <!-- Default Tabs -->\r\n                    <ul class=\"nav nav-tabs d-flex\" id=\"myTabjustified\" role=\"tablist\">\r\n                        <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                            <button class=\"nav-link w-100 active\" id=\"personal-tab\" data-bs-toggle=\"tab\"\r\n                                data-bs-target=\"#personal\" type=\"button\" role=\"tab\" aria-controls=\"personal\"\r\n                                aria-selected=\"true\">Active Staff</button>\r\n                        </li>\r\n                        <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                            <button class=\"nav-link w-100\" id=\"next-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#next\"\r\n                                type=\"button\" role=\"tab\" aria-controls=\"next\" aria-selected=\"false\">Disabled</button>\r\n                        </li>\r\n                        <!-- <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                      <button class=\"nav-link w-100\" id=\"qualification-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#qualification\" type=\"button\" role=\"tab\" aria-controls=\"qualification\" aria-selected=\"false\">Qualification</button>\r\n                    </li>\r\n                    <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                      <button class=\"nav-link w-100\" id=\"bank-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#bank\" type=\"button\" role=\"tab\" aria-controls=\"bank\" aria-selected=\"false\">Bank Details</button>\r\n                    </li> -->\r\n                    </ul>\r\n                    <div class=\"tab-content pt-2\" id=\"myTabjustifiedContent\">\r\n                        <div class=\"tab-pane fade show active\" id=\"personal\" role=\"tabpanel\"\r\n                            aria-labelledby=\"personal-tab\">\r\n                            <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                <legend class=\"float-none w-auto px-2\">Active Staff</legend>\r\n                                <div class=\"table-responsive\">\r\n                                    <table class=\"table table-bordered table-stripped table-hover\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th width=\"5%\">S/N</th>\r\n                                                <th>fullname</th>\r\n                                                <th>username</th>\r\n                                                <th>Email</th>\r\n                                                <th>GSM</th>\r\n                                                <th>Department</th>\r\n                                                <th>Staff Id</th>\r\n                                                <th> <i class=\"bi bi-gear\"></i> </th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody v-if=\"users.data\">\r\n\r\n                                            <tr v-for=\"(user,loop) in users.data\" :key=\"loop\">\r\n                                                <td>{{ loop+1 }}</td>\r\n                                                <td>{{ `${user.lastname} ${user.firstname}` }} {{ user.othername }}</td>\r\n                                                <td>{{ user.username }}</td>\r\n                                                <td>{{ user.email }}</td>\r\n                                                <td>{{ user.gsm }}</td>\r\n                                                <td>{{ user.department }}</td>\r\n                                                <td>{{ user.staff_id }}</td>\r\n                                                <td>\r\n                                                    <div class=\"dropdown\">\r\n                                                        <button type=\"button\"\r\n                                                            class=\"btn btn-primary btn-sm dropdown-toggle\"\r\n                                                            data-bs-toggle=\"dropdown\">\r\n                                                            <i class=\"bi bi-tools\"></i>\r\n                                                        </button>\r\n                                                        <ul class=\"dropdown-menu dropdown-menu-start\">\r\n                                                            <li><a class=\"dropdown-item pointer bg-info\"\r\n                                                                    @click=\"staffDetail(user)\">Detail</a></li>\r\n\r\n                                                            <li><a class=\"dropdown-item pointer\"\r\n                                                                    @click=\"updateRoles(user.id,user.username)\">Update Roles</a></li>\r\n\r\n                                                            <li><a class=\"dropdown-item pointer bg-success\"\r\n                                                                    @click=\"updateStep(user.pid)\">Update Salary Step</a>\r\n                                                            </li>\r\n\r\n                                                            <li><a class=\"dropdown-item pointer bg-warning\"\r\n                                                                    @click=\"editStaff(user)\">Edit</a></li>\r\n\r\n                                                            <li><a class=\"dropdown-item pointer bg-primary text-white\"\r\n                                                                    @click=\"assignDepartment(user.pid)\">Assign Dept</a>\r\n                                                            </li>\r\n\r\n                                                            <li><a class=\"dropdown-item pointer bg-warning\"\r\n                                                                    @click=\"resetLink(user.pid)\">Reset Password</a></li>\r\n\r\n                                                            <li><a class=\"dropdown-item pointer bg-danger\"\r\n                                                                    @click=\"disableStaff(user.pid)\">Disable Account</a>\r\n                                                            </li>\r\n                                                        </ul>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                        <tfoot v-else class=\"text-center\" style=\"width: 100%\" width=\"100%\">\r\n                                            <tr>\r\n                                                <td colspan=\"8\">No Record Yet</td>\r\n                                            </tr>\r\n                                        </tfoot>\r\n                                    </table>\r\n                                    <div class=\"flex justify-center mt-4\">\r\n                                        <nav class=\"relative justify-center rounded-md shadow pagination\">\r\n                                            <pagination-links v-for=\"(link, i) of users.links\" :link=\"link\" :key=\"i\"\r\n                                                @next=\"nextPage($event,link)\"></pagination-links>\r\n                                        </nav>\r\n                                    </div>\r\n                                </div>\r\n                            </fieldset>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"tab-pane fade\" id=\"next\" role=\"tabpanel\" aria-labelledby=\"next-tab\">\r\n                            <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                <legend class=\"float-none w-auto px-2\">Disabled Staff</legend>\r\n                                <div class=\"table-responsive\">\r\n                                    <table class=\"table table-bordered table-stripped table-hover\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th width=\"5%\">S/N</th>\r\n                                                <th>fullname</th>\r\n                                                <th>username</th>\r\n                                                <th>Email</th>\r\n                                                <th>GSM</th>\r\n                                                <th>Department</th>\r\n                                                <th>Staff Id</th>\r\n                                                <th> <i class=\"bi bi-gear\"></i> </th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr v-for=\"(user, loop) in disabledList.data\" :key=\"loop\">\r\n                                                <td>{{ loop + 1 }}</td>\r\n                                                <td>{{ `${user.lastname} ${user.firstname} ${user.othername}` }}</td>\r\n                                                <td>{{ user.username }}</td>\r\n                                                <td>{{ user.email }}</td>\r\n                                                <td>{{ user.gsm }}</td>\r\n                                                <td>{{ user.department }}</td>\r\n                                                <td>{{ user.staff_id }}</td>\r\n                                                <td>\r\n                                                    <div class=\"dropdown\">\r\n                                                        <button type=\"button\"\r\n                                                            class=\"btn btn-primary btn-sm dropdown-toggle\"\r\n                                                            data-bs-toggle=\"dropdown\">\r\n                                                            <i class=\"bi bi-tools\"></i>\r\n                                                        </button>\r\n                                                        <ul class=\"dropdown-menu\">\r\n                                                            <li><a class=\"dropdown-item pointer bg-info\"\r\n                                                                    @click=\"staffDetail(user)\">Detail</a></li>\r\n                                                            <li><a class=\"dropdown-item pointer bg-success\"\r\n                                                                    @click=\"reActivateStaff(user.pid)\">Reactivate</a>\r\n                                                            </li>\r\n                                                        </ul>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </tbody>\r\n\r\n                                    </table>\r\n                                    <div class=\"flex justify-center mt-4\">\r\n                                        <nav class=\"relative justify-center rounded-md shadow pagination\">\r\n                                            <pagination-links v-for=\"(link, i) of disabledList.links\" :link=\"link\"\r\n                                                :key=\"i\" @next=\"nextDPage(link)\"></pagination-links>\r\n                                        </nav>\r\n                                    </div>\r\n                                </div>\r\n                            </fieldset>\r\n                        </div>\r\n                    </div>\r\n                    <!-- End  Tabs -->\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <o-modal :isOpen=\"assignModal\" modal-class=\"modal-xs\" title=\"Assign Department\" @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <div>\r\n                    <assignDepartmentForm :user_pid=\"user_pid\" />\r\n                </div>\r\n            </template>\r\n            <template #footer>\r\n                <div></div>\r\n            </template>\r\n        </o-modal>\r\n\r\n        <o-modal :isOpen=\"roleModal\" modal-class=\"modal-sm\" @submit=\"updateStaffRole\" :title=\"`Update ${name}'s  Roles`\"\r\n            @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <div>\r\n                    <form id=\"rForm\">\r\n                        <div class=\"row\">\r\n                            <template v-for=\"role in roles\" :key=\"role.id\">\r\n                                <div class=\"col-6\">\r\n                                    <div class=\"form-check form-switch\">\r\n                                        <input v-model=\"newRole\" class=\"form-check-input\" type=\"checkbox\"\r\n                                            :value=\"role.id\">\r\n                                        <label class=\"form-check-label\" for=\"flexSwitchCheckDefault\">{{\r\n                                            role.id.replace('_',' ')\r\n                                            }}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </template>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </template>\r\n        </o-modal>\r\n\r\n        <o-modal :isOpen=\"stepModal\" modal-class=\"modal-sm\" @submit=\"updateStaffStep\" title=\"Update Grade Step\"\r\n            @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <div>\r\n                    <form id=\"rForm\">\r\n                        <div class=\"row\">\r\n                            <form>\r\n\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-md-12\">\r\n                                        <div class=\"form-group\">\r\n                                            <label class=\"form-label\">Salary Structure</label>\r\n                                            <select class=\"form-control form-control-sm\" v-model=\"salary.structure_pid\"\r\n                                                @change=\"loadGrades($event)\">\r\n                                                <option value=\"\" selected>Make Selection</option>\r\n                                                <option v-for=\"sec in structureDrop\" :key=\"sec.id\" :value=\"sec.id\">\r\n                                                    {{ sec.text }}\r\n                                                </option>\r\n                                            </select>\r\n                                            <p class=\"text-danger \" v-if=\"errors?.structure_pid\">{{\r\n                                                errors?.structure_pid[0] }} </p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"col-md-12\">\r\n                                        <div class=\"form-group\">\r\n                                            <label class=\"form-label\">Salary Grade</label>\r\n                                            <select class=\"form-control form-control-sm\" v-model=\"salary.grade_pid\"\r\n                                                @change=\"loadSteps($event)\">\r\n                                                <option value=\"\" selected>Make Selection</option>\r\n                                                <option v-for=\"sec in grades\" :key=\"sec.id\" :value=\"sec.id\">{{\r\n                                                    sec.text }} </option>\r\n                                            </select>\r\n                                            <p class=\"text-danger \" v-if=\"errors?.grade_pid\">{{ errors?.grade_pid[0]\r\n                                                }} </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"col-md-12\">\r\n                                        <div class=\"form-group\">\r\n                                            <label class=\"form-label\">Salary Step</label>\r\n                                            <Select2 v-model=\"salary.step\" :options=\"steps\" id=\"pid\"\r\n                                                :settings=\"{ width: '100%' }\" />\r\n                                            <p class=\"text-danger \" v-if=\"errors?.step\">{{ errors?.step[0] }} </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </template>\r\n        </o-modal>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    \r\n    import OModal from \"@/components/OModal.vue\";\r\n    import PaginationLinks from \"@/components/PaginationLinks.vue\";\r\n    import assignDepartmentForm from \"@/components/forms/department/AssignDepartmentForm.vue\";\r\n    import Select2 from 'vue3-select2-component';\r\n\r\n    import store from \"@/store\";\r\n    import {  onMounted, ref } from \"vue\";\r\n    import { useRouter } from 'vue-router';\r\n    \r\n    const router = useRouter()\r\n    let query = {}\r\n    router.push({ query: query })\r\n  \r\n    function nextPage(link) {\r\n        if (!link.url || link.active) {\r\n            return;\r\n        }\r\n        loadStaff(link.url)\r\n    }\r\n    function nextDPage(link) {\r\n        if (!link.url || link.active) {\r\n            return;\r\n        }\r\n        loadDisabledStaff(link.url)\r\n    }\r\n\r\n    const users = ref({});\r\n    loadStaff()\r\n   \r\n    function loadStaff(url = '/load-staff/1') {\r\n    store.dispatch('getMethod', { url: url }).then((data) => {\r\n        if (data?.status == 200) {\r\n            users.value = data.data;\r\n        }else{\r\n            users.value = data.data;\r\n        }\r\n    })\r\n}\r\n    \r\n    const user_pid = ref(null)\r\n    const assignModal = ref(false)\r\n  \r\n    const assignDepartment = (pid) => {\r\n        user_pid.value = pid;\r\n        assignModal.value = true\r\n    }\r\n    const closeModal = () => {\r\n        assignModal.value = false;\r\n        stepModal.value = false;\r\n        roleModal.value = false;\r\n        formValue.value.roles = [];\r\n        newRole.value = []  \r\n    };\r\n\r\n\r\nfunction staffDetail(staff) {\r\n    localStorage.setItem('TVATI_STAFF_DETAIL', JSON.stringify(staff, null, 2))\r\n    router.push({ path: 'staff-detail', query: { staff: staff.pid } })\r\n}\r\nfunction editStaff(staff) {\r\n    query = {action:'edit', tab: 'personal-tab', 'id': staff?.user_pid }\r\n    let data = {\r\n        staff : staff,\r\n        action : 'edit',\r\n    }\r\n    localStorage.setItem('TVATI_ONBOARD_TAB', JSON.stringify(query, null, 2))\r\n    localStorage.setItem('TVATI_EDIT_STAFF', JSON.stringify(data, null, 2))\r\n    router.push({ path: 'onboarding', query: { staff: staff.pid } })\r\n}\r\n\r\nconst disableStaff = (pid) =>{\r\n    store.dispatch('deleteMethod', { url: '/disable-staff/'+pid }).then((data) => {\r\n        if (data?.status == 201) {\r\n            loadStaff()\r\n        }\r\n    })\r\n}\r\nconst reActivateStaff = (pid) =>{\r\n    store.dispatch('getMethod', { url: '/re-activate-staff/'+pid }).then((data) => {\r\n        if (data?.status == 200) {\r\n            loadDisabledStaff()\r\n        }\r\n    })\r\n}\r\nonMounted(()=>{\r\n    const disableTab = document.querySelector('#next-tab');\r\n    disableTab.addEventListener('click',()=>{\r\n        loadDisabledStaff()\r\n    })\r\n})\r\nconst disabledList = ref({})\r\nfunction loadDisabledStaff(url ='/load-staff/0') {\r\n    store.dispatch('getMethod', { url: url }).then((data) => {\r\n        if (data?.status == 200) {\r\n            disabledList.value = data.data;\r\n        }\r\n    })\r\n}\r\n\r\nconst resetLink = (pid) =>{\r\n    if(confirm('Are you sure, you want to send a reset link to him/her')){\r\n        store.dispatch('getMethod', { url: '/send-reset-password-link/'+pid })\r\n    }\r\n}\r\n\r\nconst newRole = ref([])\r\n\r\nconst roleModal = ref(false)\r\nconst name = ref()\r\nconst updateRoles = (id,username) => {\r\n    name.value = username\r\n    roleModal.value = true\r\n    newRole.value = []\r\n    formValue.value.id = id;\r\n    store.dispatch('getMethod', { url: '/load-staff-roles/'+id }).then((data) => {\r\n        if (data?.status == 200) {\r\n            newRole.value.push(...data.data);\r\n        }\r\n    })\r\n}\r\n\r\nconst salary = ref({\r\n    structure_pid: '' ,\r\n    grade_pid: '' ,\r\n    step: '' ,\r\n    user_pid: '' ,\r\n})\r\nconst resetSalary = ()=> {\r\n    salary.value = {\r\n        structure_pid: '',\r\n        grade_pid: '',\r\n        step: '',\r\n        user_pid: '',\r\n    }\r\n}\r\nconst stepModal = ref(false)\r\nconst updateStep = (id) => {\r\n    stepModal.value = true\r\n    salary.value.user_pid = id;\r\n    store.dispatch('getMethod', { url: 'load-staff-basic-salary/'+id }).then((data) => {\r\n        if (data?.status == 200) {\r\n            salary.value = data.data;\r\n        }\r\n    })\r\n}\r\n\r\nconst updateStaffStep = () => {\r\n    store.dispatch('putMethod', { url: '/update-staff-grade-step', param: salary.value, prompt: 'Are you sure, you want to update the staff Step?' }).then((data) => {\r\n        if (data?.status == 201) {\r\n            resetSalary()\r\n            stepModal.value = false;\r\n        }\r\n    })\r\n} \r\n\r\n\r\n\r\n\r\nconst formValue = ref({\r\n    id:'',\r\n    roles:[]\r\n})\r\n\r\nconst updateStaffRole = () => {\r\n    formValue.value.roles = newRole.value\r\n    store.dispatch('putMethod', { url: '/update-staff-role', param: formValue.value, prompt:'Are you sure, you want to update the staff role?'}).then((data) => {\r\n        if (data?.status == 201) {\r\n            newRole.value = []\r\n            roleModal.value = false\r\n            formValue.value.roles = [];\r\n            newRole.value = []\r\n        }\r\n    })\r\n} \r\n\r\nconst roles = ref([]);\r\nfunction loadRoles() {\r\n    store.dispatch('loadDropdown', 'roles').then(({ data }) => {\r\n        roles.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\nloadRoles()\r\n\r\n\r\n\r\nconst grades = ref({})\r\n\r\nconst steps = ref({})\r\nfunction loadSteps(event) {\r\n    dropdownStep(event.target.value)\r\n}\r\n\r\n\r\nconst loadGrades = (event) => {\r\n    dropdownGrade(event.target.value)\r\n}\r\n\r\nfunction dropdownStep(id) {\r\n    store.dispatch('loadDropdown', 'grade-step/' + id).then(({ data }) => {\r\n        steps.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\nfunction dropdownGrade(id) {\r\n    store.dispatch('loadDropdown', 'salary-grade/' + id).then(({ data }) => {\r\n        grades.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\n\r\n\r\nconst structureDrop = ref({});\r\nfunction dropdownStructure() {\r\n    store.dispatch('loadDropdown', 'salary-structure').then(({ data }) => {\r\n        structureDrop.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\ndropdownStructure()\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./StaffList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./StaffList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["__exports__","props","__props","dept","ref","user_pid","sub_department","department_pid","errors","assignDepartment","value","store","dispatch","url","param","then","data","status","departments","dropdownDpet","catch","e","console","log","sub","loadSubDept","event","target","router","useRouter","query","nextPage","link","active","loadStaff","nextDPage","loadDisabledStaff","push","users","assignModal","pid","closeModal","stepModal","roleModal","formValue","roles","newRole","staffDetail","staff","localStorage","setItem","JSON","stringify","path","editStaff","action","tab","disableStaff","reActivateStaff","onMounted","disableTab","document","querySelector","addEventListener","disabledList","resetLink","confirm","name","updateRoles","id","username","salary","structure_pid","grade_pid","step","resetSalary","updateStep","updateStaffStep","prompt","updateStaffRole","loadRoles","grades","steps","loadSteps","dropdownStep","loadGrades","dropdownGrade","structureDrop","dropdownStructure"],"sourceRoot":""}