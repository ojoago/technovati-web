{"version":3,"file":"js/10.1671ef86.js","mappings":"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","sources":["webpack://Technovati/./src/components/shift/HolidayView.vue","webpack://Technovati/./src/components/shift/HolidayView.vue?4752","webpack://Technovati/./src/views/attendance/ShiftConfig.vue","webpack://Technovati/./src/views/attendance/ShiftConfig.vue?1ad0"],"sourcesContent":["<template>\r\n    <div>\r\n        <fieldset class=\"border rounded-3 p-1 m-1\">\r\n            <legend class=\"float-none w-auto px-1\">Shift Holidays</legend>\r\n            <button class=\"btn btn-sm btn-primary m-1\" @click=\"openHModal\">Add Holiday</button>\r\n            <vue-cal :selected-date=\"currentDate\" :time-from=\"9 * 60\" :disable-views=\"['years', 'year',  'week', 'day']\"\r\n                active-view=\"month\" hide-weekends events-on-month-view=\"short\" :events=\"events\" style=\"height: 600px\">\r\n            </vue-cal>\r\n\r\n        </fieldset>\r\n\r\n        <o-modal :isOpen=\"hModal\" modal-class=\"modal-sm\" title=\"Add Holiday to Shift\" @submit=\"markShiftHoliday\"\r\n            @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <form id=\"formHoliday\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-12\">\r\n                            <label for=\"\">Shift</label>\r\n                            <div class=\"form-group\">\r\n                                <select class=\"form-control\" v-model=\"holiday.shift_pid\">\r\n                                    <option value=\"\" selected>Select Shift</option>\r\n                                    <option v-for=\"sec in shiftDrop\" :key=\"sec.pid\" :value=\"sec.pid\">{{ sec.shift }}\r\n                                    </option>\r\n                                </select>\r\n                                <p class=\"text-danger \" v-if=\"b_errors?.shift_pid\">{{ b_errors?.shift_pid[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12\">\r\n                            <label for=\"\">Tittle</label>\r\n                            <div class=\"form-group\">\r\n                                <input class=\"form-control\" maxlength=\"30\" v-model=\"holiday.tittle\"\r\n                                    placeholder=\"e.g burnout break\">\r\n                                <p class=\"text-danger \" v-if=\"b_errors?.tittle\">{{ b_errors?.holiday[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12\">\r\n                            <label for=\"\">Start</label>\r\n                            <div class=\"form-group\">\r\n                                <input type=\"date\" class=\"form-control\" v-model=\"holiday.start\">\r\n                                <!-- <input type=\"datetime-local\" class=\"form-control\" v-model=\"holiday.start\"> -->\r\n                                <p class=\"text-danger \" v-if=\"b_errors?.start\">{{ b_errors?.start[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12\">\r\n                            <label for=\"\">End</label>\r\n                            <div class=\"form-group\">\r\n                                <input type=\"date\" class=\"form-control\" v-model=\"holiday.end\">\r\n                                <!-- <input type=\"datetime-local\" class=\"form-control\" v-model=\"holiday.end\"> -->\r\n                                <p class=\"text-danger \" v-if=\"b_errors?.end\">{{ b_errors?.end[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12\">\r\n                            <label for=\"\">Note</label>\r\n                            <div class=\"form-group\">\r\n                                <textarea class=\"form-control\" maxlength=\"30\" v-model=\"holiday.note\"\r\n                                    placeholder=\"e.g burnout note\"></textarea>\r\n                                <p class=\"text-danger \" v-if=\"b_errors?.note\">{{ b_errors?.note[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                </form>\r\n            </template>\r\n\r\n        </o-modal>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport VueCal from 'vue-cal'\r\nimport 'vue-cal/dist/vuecal.css'\r\nimport { ref } from \"vue\";\r\nimport store from \"@/store\";\r\nimport OModal from \"@/components/OModal.vue\";\r\n\r\nconst hModal = ref(false)\r\n\r\nconst openHModal = () => {\r\n    hModal.value = true;\r\n};\r\nconst closeModal = () => {\r\n    hModal.value = false;\r\n};\r\nconst currentDate = ref({})\r\nconst date = new Date();\r\n\r\nlet day = date.getDate();\r\nlet month = date.getMonth() + 1;\r\nlet year = date.getFullYear();\r\n\r\n// This arrangement can be altered based on how we want the date's format to appear.\r\ncurrentDate.value = `${year}-${month}-${day}`;\r\n\r\nconst b_errors = ref({});\r\nconst holiday = ref({\r\n    shif_pid: '',\r\n    tittle: '',\r\n    note: '',\r\n    start: '',\r\n    end: '',\r\n});\r\nconst resetAttr = () =>{\r\n    holiday.value = {\r\n        shif_pid: '',\r\n        tittle: '',\r\n        note: '',\r\n        start: '',\r\n        end: '',\r\n    }\r\n}\r\nfunction markShiftHoliday() {\r\n    b_errors.value = []\r\n    store.dispatch('postMethod', { param: holiday.value, url: 'mark-shift-holiday' }).then((data) => {\r\n        if (data?.status == 422) {\r\n            b_errors.value = data.data\r\n        } else if (data?.status == 201) {\r\n            loadShiftHolidays()\r\n            resetAttr()\r\n        }\r\n    })\r\n}\r\n\r\n//\r\nloadShiftHolidays()\r\nconst events = ref([]);\r\n\r\nfunction loadShiftHolidays() {\r\n    store.dispatch('getMethod', { url: '/load-shift-holidays' }).then((data) => {\r\n        if (data?.status == 200) {\r\n            data.data.forEach( (el) => {\r\n                events.value.push({\r\n                    title: el.tittle,\r\n                    start: el.start,\r\n                    end: el.end ,\r\n                    class: 'blue-event',\r\n                    // id: el.id,\r\n                    content:  `<i class=\"bi bi-alarm\">${el.shift.shift} ${el.note}</i>`,\r\n                    // contentFull: 'My shopping list is rather long:<br><ul><li>Avocados</li><li>Tomatoes</li><li>Potatoes</li><li>Mangoes</li></ul>'\r\n                })\r\n            });\r\n            // console.log(events.value);\r\n            // data.data.\r\n        }\r\n    })\r\n}\r\n\r\n\r\nconst shiftDrop = ref({});\r\nfunction dropdownShifts() {\r\n    store.dispatch('loadDropdown', 'shifts').then(({ data }) => {\r\n        shiftDrop.value = data;\r\n    })\r\n}\r\ndropdownShifts()\r\n</script>\r\n\r\n<style scoped>\r\n    /* @import \"qalendar/dist/style.css\"; */\r\n    .vuecal--month-view .vuecal__cell {height: 80px;}\r\n\r\n.vuecal--month-view .vuecal__cell-content {\r\n  justify-content: flex-start;\r\n  height: 100%;\r\n  align-items: flex-end;\r\n}\r\n\r\n.vuecal--month-view .vuecal__cell-date {padding: 4px;}\r\n.vuecal--month-view .vuecal__no-event {display: none;}\r\n</style>","import script from \"./HolidayView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HolidayView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HolidayView.vue?vue&type=style&index=0&id=5d19f4c1&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5d19f4c1\"]])\n\nexport default __exports__","<template>\r\n    <div>\r\n        <div class=\"container-fluid mt-2 mb-2\">\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                    <h3 class=\"card-title\">Manage Shifts </h3>\r\n\r\n                    <!-- Default Tabs -->\r\n                    <ul class=\"nav nav-tabs d-flex\" id=\"myTabjustified\" role=\"tablist\">\r\n                        <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                            <button class=\"nav-link w-100 active\" id=\"shifts-tab\" data-bs-toggle=\"tab\"\r\n                                data-bs-target=\"#shifts\" type=\"button\" role=\"tab\" aria-controls=\"shifts\"\r\n                                aria-selected=\"true\">Shift</button>\r\n                        </li>\r\n                        <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                            <button class=\"nav-link w-100\" id=\"shift-allocation-tab\" data-bs-toggle=\"tab\"\r\n                                data-bs-target=\"#shift-allocation\" type=\"button\" role=\"tab\"\r\n                                aria-controls=\"shift-allocation\" aria-selected=\"false\">Shift Allocation</button>\r\n                        </li>\r\n\r\n                        <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                            <button class=\"nav-link w-100\" id=\"shift-holiday-tab\" data-bs-toggle=\"tab\"\r\n                                data-bs-target=\"#shift-holiday\" type=\"button\" role=\"tab\" aria-controls=\"shift-holiday\"\r\n                                aria-selected=\"false\">Shift Holidays</button>\r\n                        </li>\r\n                    </ul>\r\n                    <div class=\"tab-content pt-2\" id=\"myTabjustifiedContent\">\r\n                        <div class=\"tab-pane fade show active\" id=\"shifts\" role=\"tabpanel\" aria-labelledby=\"shifts-tab\">\r\n                            <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                <legend class=\"float-none w-auto px-2\">Shifts</legend>\r\n                                <button class=\"btn btn-sm btn-primary m-2\" @click=\"openModal\">Add Shift</button>\r\n\r\n                                <div class=\"table-responsive\">\r\n                                    <table class=\"table-hover table-stripped table-bordered table\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>SN</th>\r\n                                                <th>shift</th>\r\n                                                <th>Office Start</th>\r\n                                                <th>Office Close</th>\r\n                                                <th>clock in start</th>\r\n                                                <th>shift start</th>\r\n                                                <th>shift end</th>\r\n                                                <!-- <th>shift days</th> -->\r\n                                                <th>working days</th>\r\n                                                <th>late</th>\r\n                                                <th> <i class=\"bi bi-gear-fill\"></i> </th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr v-for=\"(data, loop) in shifts?.data\" :key=\"loop\">\r\n                                                <td>{{ loop + 1 }}</td>\r\n                                                <td>{{ data.shift }}</td>\r\n                                                <td>{{ data.begin_clock }}</td>\r\n                                                <td>{{ data.end_clock }}</td>\r\n                                                <td>{{ data.clock_in_start }}</td>\r\n                                                <td>{{ data.begin }}</td>\r\n                                                <td>{{ data.end }}</td>\r\n                                                <!-- <td>{{ data.shift_days }}</td> -->\r\n                                                <td>{{ data.working_days }}</td>\r\n                                                <td>{{ data.late }}</td>\r\n                                                <td>\r\n                                                    <div class=\"dropdown\">\r\n                                                        <button type=\"button\"\r\n                                                            class=\"btn btn-primary btn-sm dropdown-toggle\"\r\n                                                            data-bs-toggle=\"dropdown\">\r\n                                                            <i class=\"bi bi-tools\"></i>\r\n                                                        </button>\r\n                                                        <ul class=\"dropdown-menu\">\r\n                                                            <!-- <li><a class=\"bg-info dropdown-item pointer\"\r\n                                                                    @click=\"shiftDtail(data)\">Details </a> </li> -->\r\n                                                            <li><a class=\"bg-warning dropdown-item pointer\"\r\n                                                                    @click=\"editShift(data)\">Edit </a> </li>\r\n                                                            <!-- <li><a class=\"bg-danger dropdown-item pointer\"\r\n                                                                    @click=\"deleteShift(data.pid)\">Delete</a> </li> -->\r\n                                                        </ul>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n\r\n                                </div>\r\n                            </fieldset>\r\n\r\n                        </div>\r\n                        <div class=\"tab-pane fade\" id=\"shift-allocation\" role=\"tabpanel\"\r\n                            aria-labelledby=\"shift-allocation-tab\">\r\n                            <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                <legend class=\"float-none w-auto px-2\">Shift Allocation</legend>\r\n                                <button class=\"btn btn-sm btn-primary m-2\" @click=\"openAlloModal\">Allocate</button>\r\n\r\n                                <fieldset class=\"border rounded-3 p-2 m-1\" v-for=\"(object, loop) in allocations\"\r\n                                    :key=\"loop\">\r\n                                    <legend class=\"float-none w-auto px-2 h5\"> {{ object.shift.toUpperCase() }}</legend>\r\n                                    <fieldset class=\"border rounded-3 \">\r\n                                        <span v-for=\"(key, l) in object.staff\" :key=\"l\"\r\n                                            class=\"badge bg-dark p-1 m-1 ellipsis\">\r\n                                            {{ key.toUpperCase() }}\r\n                                        </span>\r\n\r\n                                    </fieldset>\r\n                                </fieldset>\r\n\r\n\r\n                            </fieldset>\r\n                        </div>\r\n\r\n                        <div class=\"tab-pane fade\" id=\"shift-holiday\" role=\"tabpanel\"\r\n                            aria-labelledby=\"shift-holiday-tab\">\r\n                            <HolidayView />\r\n                        </div>\r\n                    </div>\r\n                    <!-- End  Tabs -->\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n        <o-modal :isOpen=\"toggleModal\" modal-class=\"modal-lg\" title=\"Create Shift\" @submit=\"createShift\"\r\n            @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <form>\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-4\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"form-label\">Shift <span class=\"text-danger\">*</span></label>\r\n                                <input type=\"text\" v-model=\"shift.shift\" class=\"form-control\"\r\n                                    placeholder=\"e.g morning shift\">\r\n                                <p class=\"text-danger \" v-if=\"errors?.shift\">{{ errors?.shift[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-4\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"form-label\">shift Start <span class=\"text-danger\">*</span></label>\r\n                                <input type=\"date\" v-model=\"shift.shift_start\" class=\"form-control\">\r\n                                <p class=\"text-danger \" v-if=\"errors?.shift_start\">{{ errors?.shift_start[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"form-label\">End of shift <span class=\"text-danger\">*</span></label>\r\n                                <input type=\"date\" v-model=\"shift.shift_end\" class=\"form-control\">\r\n                                <p class=\"text-danger \" v-if=\"errors?.shift_end\">{{ errors?.shift_end[0] }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-4\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"form-label\">Work Starts</label>\r\n                                <input type=\"time\" v-model=\"shift.begin_clock\" class=\"form-control\">\r\n                                <p class=\"text-danger \" v-if=\"errors?.begin_clock\">{{ errors?.begin_clock[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"form-label\">Work ends<span class=\"text-danger\">*</span></label>\r\n                                <input type=\"time\" v-model=\"shift.end_clock\" class=\"form-control\">\r\n                                <p class=\"text-danger \" v-if=\"errors?.end_clock\">{{ errors?.end_clock[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"form-label\">clocking Start </label>\r\n                                <input type=\"time\" v-model=\"shift.clock_in_start\" class=\"form-control\">\r\n                                <p class=\"text-danger \" v-if=\"errors?.clock_in_start\">{{ errors?.clock_in_start[0] }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"form-label\">Late Start<span class=\"text-danger\">*</span></label>\r\n                                <input type=\"time\" v-model=\"shift.late\" class=\"form-control\">\r\n                                <p class=\"text-danger \" v-if=\"errors?.late\">{{ errors?.late[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"form-label\">Working Days </label>\r\n                                <input type=\"text\" v-model=\"shift.working_days\" class=\"form-control\"\r\n                                    placeholder=\"e.g 388 \">\r\n                                <p class=\"text-danger \" v-if=\"errors?.working_days\">{{ errors?.working_days[0] }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </template>\r\n\r\n        </o-modal>\r\n\r\n        <o-modal :isOpen=\"alloModal\" modal-class=\"modal-xs\" title=\"Allocate Shift\" @submit=\"allocateShift\"\r\n            @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <form>\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-12 mt-3\">\r\n                            <label for=\"\">Shifts</label>\r\n                            <div class=\"form-group\">\r\n                                <select class=\"form-control\" v-model=\"allocation.shift_pid\">\r\n                                    <option value=\"\" selected>Select Shift</option>\r\n                                    <option v-for=\"sec in shiftDrop\" :key=\"sec.pid\" :value=\"sec.pid\">{{ sec.shift }}\r\n                                    </option>\r\n                                </select>\r\n                                <p class=\"text-danger \" v-if=\"alo_errors?.shift_pid\">{{ alo_errors?.shift_pid[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12 mt-3\">\r\n                            <label for=\"\">Category</label>\r\n                            <div class=\"form-group\">\r\n                                <select class=\"form-control\" v-model=\"allocation.category\">\r\n                                    <option value=\"\" selected>Select Option</option>\r\n                                    <option value=\"1\">All Staff</option>\r\n                                    <option value=\"2\">Department</option>\r\n                                    <option value=\"3\">Individual</option>\r\n                                </select>\r\n                                <p class=\"text-danger \" v-if=\"alo_errors?.category\">{{ alo_errors?.category[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12 mt-3\" v-if=\"allocation.category == 3\">\r\n                            <label for=\"\">Staff</label>\r\n                            <div class=\"form-group\">\r\n                                <div>\r\n                                    <Multiselect v-model=\"allocation.staff\" :options=\"userDrop\" :multiple=\"true\"\r\n                                        :close-on-select=\"true\" placeholder=\"Pick Staff\" label=\"text\" track-by=\"id\" />\r\n                                </div>\r\n                                <p class=\"text-danger \" v-if=\"alo_errors?.staff\">{{ alo_errors?.staff[0] }}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-12 mt-3\" v-if=\"allocation.category == 2\">\r\n                            <label for=\"\">Departments</label>\r\n                            <div class=\"form-group\">\r\n\r\n                                <div>\r\n                                    <Multiselect v-model=\"allocation.departments\" :options=\"deptDrop\" :multiple=\"true\"\r\n                                        :close-on-select=\"true\" placeholder=\"Pick Department\" label=\"text\"\r\n                                        track-by=\"id\" />\r\n                                </div>\r\n                                <p class=\"text-danger \" v-if=\"alo_errors?.departments\">{{ alo_errors?.departments[0] }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </template>\r\n\r\n        </o-modal>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport store from \"@/store\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport { useRouter } from 'vue-router';\r\nimport { Multiselect } from 'vue-multiselect';\r\nimport OModal from \"@/components/OModal.vue\";\r\nimport HolidayView from '@/components/shift/HolidayView.vue'\r\nconst router = useRouter()\r\nlet query = {}\r\nrouter.push({ query: query })\r\n\r\n\r\nconst toggleModal = ref(false)\r\nconst openModal = () => {\r\n    toggleModal.value = true;\r\n};\r\nconst alloModal = ref(false)\r\nconst openAlloModal = () => {\r\n    alloModal.value = true;\r\n};\r\n\r\n\r\n\r\nconst closeModal = () => {\r\n    toggleModal.value = false;\r\n    alloModal.value = false;\r\n    resetShift()\r\n};\r\n\r\nconst errors = ref({});\r\nconst alo_errors = ref({});\r\nconst shifts = ref({});\r\nconst shift = ref({\r\n    shift : '' ,\r\n    begin_clock : '' ,\r\n    clock_in_start : '' ,\r\n    end_clock : '' ,\r\n    shift_start : '' ,\r\n    shift_end : '' ,\r\n    shift_days : '' ,\r\n    working_days : '' ,\r\n    late : ''\r\n});\r\n\r\nconst resetShift = () => {\r\n    shift.value = {\r\n        shift: '',\r\n        begin_clock: '',\r\n        clock_in_start: '',\r\n        end_clock: '',\r\n        shift_start: '',\r\n        shift_end: '',\r\n        shift_days: '',\r\n        working_days: '',\r\n        late: ''\r\n    }\r\n}\r\n\r\n\r\nconst editShift = (data) => {\r\n    shift.value = {\r\n        shift: data.shift ,\r\n        begin_clock: data.begin_clock ,\r\n        clock_in_start: data.clock_in_start ,\r\n        end_clock: data.end_clock ,\r\n        shift_start: data.shift_start ,\r\n        shift_end: data.shift_end ,\r\n        shift_days: data.shift_days ,\r\n        working_days: data.working_days ,\r\n        late: data.late ,\r\n        pid: data.pid\r\n    }\r\n    toggleModal.value = true\r\n}\r\n// const shiftDtail = (data) => {\r\n//     console.log(data);\r\n// }\r\n// const deleteShift = (pid) => {\r\n//     alert(pid)\r\n// }\r\n\r\nconst allocation = ref({\r\n    shift_pid : '' ,\r\n    staff : '' ,\r\n    departments : '' ,\r\n    category: '' ,\r\n});\r\n\r\nconst resetAllocate = () => {\r\n    allocation.value = {\r\n        shift_pid: '',\r\n        staff: '',\r\n        departments: '',\r\n        category: '',\r\n    }\r\n}\r\n// .\r\nfunction createShift() {\r\n    errors.value = []\r\n    store.dispatch('postMethod', { url: '/create-shift', param: shift.value }).then((data) => {\r\n        if (data?.status == 422) {\r\n            errors.value = data.data\r\n        } else if (data?.status == 201) {\r\n            closeModal()\r\n            loadShifts()\r\n        }\r\n    })\r\n}\r\n\r\n\r\n// const toggleEvent = (event) => {\r\n//     let option = event.target.value;\r\n//     alert(option)\r\n// }\r\n\r\nfunction loadShifts() {\r\n    store.dispatch('getMethod', { url: '/load-shifts' }).then((data) => {\r\n        if (data?.status == 200) {\r\n            shifts.value = data.data\r\n        } \r\n    })\r\n}\r\n\r\nconst allocations = ref({});\r\n\r\nfunction loadShiftAllocation() {\r\n    store.dispatch('getMethod', { url: '/load-shift-allocation' }).then((data) => {\r\n        if (data?.status == 200) {\r\n            allocations.value = data.data\r\n        } \r\n    })\r\n}\r\n\r\nloadShifts()\r\n\r\nfunction allocateShift() {\r\n    alo_errors.value = []\r\n    store.dispatch('postMethod', { url: '/allocate-shift', param: allocation.value }).then((data) => {\r\n        if (data?.status == 422) {\r\n            alo_errors.value = data.data\r\n        } else if (data?.status == 201) {\r\n            resetAllocate()\r\n            alloModal.value = false;\r\n            loadShiftAllocation()\r\n        }\r\n    })\r\n}\r\n\r\n\r\n\r\nconst shiftDrop = ref({});\r\nfunction dropdownShifts() {\r\n    store.dispatch('loadDropdown', 'shifts').then(({ data }) => {\r\n        shiftDrop.value = data;\r\n    })\r\n}\r\ndropdownShifts()\r\nconst userDrop = ref([]);\r\nfunction dropdownUser() {\r\n    store.dispatch('loadDropdown', 'users').then(({ data }) => {\r\n        userDrop.value = data;\r\n    })\r\n}\r\ndropdownUser()\r\nconst deptDrop = ref([]);\r\nfunction dropdownDeptDrop() {\r\n    store.dispatch('loadDropdown', 'departments').then(({ data }) => {\r\n        deptDrop.value = data;\r\n    })\r\n}\r\ndropdownDeptDrop()\r\nonMounted(() => {\r\n    // currentTab()\r\n    let allocationTab = document.querySelector('#shift-allocation-tab');\r\n    allocationTab.addEventListener('click', () => {\r\n        loadShiftAllocation()\r\n    })\r\n\r\n    // let holidayTab = document.querySelector('#shift-holiday-tab');\r\n\r\n    // holidayTab.addEventListener('click', () => {\r\n    //     loadShiftHolidays()\r\n    // })\r\n    \r\n})\r\n\r\n</script>\r\n\r\n<style scoped></style>","import script from \"./ShiftConfig.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ShiftConfig.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["hModal","ref","openHModal","value","closeModal","currentDate","date","Date","day","getDate","month","getMonth","year","getFullYear","b_errors","holiday","shif_pid","tittle","note","start","end","resetAttr","markShiftHoliday","store","dispatch","param","url","then","data","status","loadShiftHolidays","events","forEach","el","push","title","class","content","shift","shiftDrop","dropdownShifts","__exports__","router","useRouter","query","toggleModal","openModal","alloModal","openAlloModal","resetShift","errors","alo_errors","shifts","begin_clock","clock_in_start","end_clock","shift_start","shift_end","shift_days","working_days","late","editShift","pid","allocation","shift_pid","staff","departments","category","resetAllocate","createShift","loadShifts","allocations","loadShiftAllocation","allocateShift","userDrop","dropdownUser","deptDrop","dropdownDeptDrop","onMounted","allocationTab","document","querySelector","addEventListener"],"sourceRoot":""}