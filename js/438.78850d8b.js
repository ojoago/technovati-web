"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[438],{5658:function(e,l,t){function a(){function e(e,t="axios"){const a=[];if("axios"==t&&e)for(let n in e){if(-1!==n.indexOf(".")){let t=l(n);a[t]=e[n][0]}else a[n]=e[n][0];a[n]=e[n][0]}return a}function l(e){const l=e.split(".").filter((e=>e)),t=e.split(".").filter((e=>!isNaN(e)));return l[2]+t.map(Number)}return{transformValidationErrors:e}}t.d(l,{Z:function(){return a}})},1187:function(e,l,t){t.d(l,{Z:function(){return i}});var a=t(3396);const n=["disabled","innerHTML"];var s={__name:"PaginationLinks",props:{link:Object},emits:["next"],setup(e){return(l,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("li",{class:"page-item",onClick:t[0]||(t[0]=t=>l.$emit("next",e.link))},[(0,a._)("span",{class:"page-link pointer",href:"#",disabled:!e.link.url,innerHTML:e.link.label},null,8,n)])]))}};const o=s;var i=o},438:function(e,l,t){t.r(l),t.d(l,{default:function(){return sl}});t(560);var a=t(3396),n=t(7139),s=t(9242),o=t(4870),i=t(6091),u=t(2191),d=t(6368),r=t(1187),c=t(2483),p=t(2524),m=t(5658);const v=e=>((0,a.dD)("data-v-1e32f027"),e=e(),(0,a.Cn)(),e),_={class:"container my-2"},g={class:"card"},b={class:"card-body"},f={class:"table-responsive"},w={class:"table-hover table-stripped table-bordered table"},k=v((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"SN"),(0,a._)("th",null,"title"),(0,a._)("th",null,"status"),(0,a._)("th",null,"destination"),(0,a._)("th",null,"from"),(0,a._)("th",null,"to"),(0,a._)("th",null,"crew"),(0,a._)("th",null,"itinerary"),(0,a._)("th",null,"mode"),(0,a._)("th",null,[(0,a._)("i",{class:"bi bi-gear-fill"})])])],-1))),y={class:"dropdown"},h=v((()=>(0,a._)("button",{type:"button",class:"btn btn-primary btn-sm dropdown-toggle","data-bs-toggle":"dropdown"},[(0,a._)("i",{class:"bi bi-tools"})],-1))),x={class:"dropdown-menu"},q=["onClick"],D=["onClick"],U=["onClick"],C=["onClick"],V=["onClick"],z={class:"flex justify-center mt-4"},H={class:"relative justify-center rounded-md shadow pagination"},Z={id:"requestForm"},M={class:"row"},T={class:"col-md-6"},O={class:"form-group"},A=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Tittle "),(0,a._)("span",{class:"text-danger"},"*")],-1))),E={key:0,class:"text-danger"},I={class:"col-md-6"},R={class:"form-group"},S=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Destination "),(0,a._)("span",{class:"text-danger"},"*")],-1))),N={key:0,class:"text-danger"},B={class:"col-md-6"},K={class:"form-group"},Y=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Begin Date "),(0,a._)("span",{class:"text-danger"},"*")],-1))),$={key:0,class:"text-danger"},j={class:"col-md-6"},F={class:"form-group"},L=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("End Date"),(0,a._)("span",{class:"text-danger"},"*")],-1))),W={key:0,class:"text-danger"},P={class:"col-md-12"},J={class:"form-group"},Q=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Purpose "),(0,a._)("span",{class:"text-danger"},"*")],-1))),G={key:0,class:"text-danger"},X={class:"col-md-6"},ee={class:"form-group"},le=v((()=>(0,a._)("label",{class:"form-label"},"Crew Members ",-1))),te={key:0,class:"text-danger"},ae={class:"col-md-6"},ne={class:"form-group"},se=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Mode of Transpotation"),(0,a._)("span",{class:"text-danger"},"*")],-1))),oe={key:0,class:"text-danger"},ie={class:"col-md-12"},ue=v((()=>(0,a._)("label",null,"Budgets",-1))),de={class:"row"},re={class:"col-md-12"},ce={class:"form-group"},pe=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Budget Item "),(0,a._)("span",{class:"text-danger"},"*")],-1))),me=["onUpdate:modelValue"],ve={key:0,class:"text-danger"},_e={class:"col-md-12"},ge={class:"form-group"},be=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Amount "),(0,a._)("span",{class:"text-danger"},"*")],-1))),fe={class:"input-group"},we=["onUpdate:modelValue"],ke=["onClick"],ye=v((()=>(0,a._)("i",{class:"bi bi-patch-minus"},null,-1))),he=[ye],xe={key:0,class:"text-danger"},qe=v((()=>(0,a._)("i",{class:"bi bi-plus"},null,-1))),De=[qe],Ue={id:"requestForm"},Ce={class:"row"},Ve={class:"col-md-12"},ze={class:"form-group"},He=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Budget Item "),(0,a._)("span",{class:"text-danger"},"*")],-1))),Ze=["onUpdate:modelValue"],Me={class:"col-md-12"},Te={class:"form-group"},Oe=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Amount "),(0,a._)("span",{class:"text-danger"},"*")],-1))),Ae={class:"input-group"},Ee=["onUpdate:modelValue"],Ie=["onClick"],Re=v((()=>(0,a._)("i",{class:"bi bi-patch-minus"},null,-1))),Se=[Re],Ne=v((()=>(0,a._)("i",{class:"bi bi-plus"},null,-1))),Be=[Ne],Ke={id:"expenseForm"},Ye={class:"row"},$e={class:"col-md-12"},je={class:"form-group"},Fe=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Expense "),(0,a._)("span",{class:"text-danger"},"*")],-1))),Le={key:0,class:"text-danger"},We={class:"col-md-12"},Pe={class:"form-group"},Je=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Amount "),(0,a._)("span",{class:"text-danger"},"*")],-1))),Qe={key:0,class:"text-danger"},Ge={class:"col-md-12"},Xe={class:"form-group"},el=v((()=>(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Receipt "),(0,a._)("span",{class:"text-danger"},"*")],-1))),ll={key:0,class:"text-danger"};var tl={__name:"TravelRequestView",setup(e){const{handleFile:l}=(0,p.H)(),{transformValidationErrors:t}=(0,m.Z)(),v=(0,o.iH)(null);v.value=u.Z?.state?.user?.data?.pid;const ye=(0,c.tv)();let qe={};ye.push({query:qe});const Re=(0,o.iH)(!1),Ne=()=>{Re.value=!0},tl=()=>{Re.value=!1,ml.value=!1,hl.value=!1,nl(),pl(),yl()},al=(0,o.iH)({title:"",dept_pid:"",destination:"",begin:"",end:"",crew:"",itinerary:"",mode:"",budget:[{budget:"",amount:""}]}),nl=()=>{al.value={title:"",dept_pid:"",destination:"",begin:"",end:"",crew:"",itinerary:"",mode:"",budget:[{budget:"",amount:""}]}};function sl(e){al.value={title:e.title,dept_pid:e.dept_pid,destination:e.destination,begin:e.begin,end:e.end,crew:e.crew,itinerary:e.itinerary,pid:e.pid,mode:e.mode,budget:e.budgets},Re.value=!0}const ol=(0,o.iH)({});function il(){ol.value=[],u.Z.dispatch("postMethod",{url:"/travel-request",param:al.value}).then((e=>{422==e?.status?(ol.value=t(e.data),console.log(ol.value)):201==e?.status&&(tl(),dl())}))}const ul=(0,o.iH)({});function dl(e="/load-request"){u.Z.dispatch("getMethod",{url:e}).then((e=>{ul.value=200==e?.status?e.data:{}}))}function rl(e){localStorage.setItem("TVATI_TRV_RQS_DETAIL",JSON.stringify(e,null,2)),ye.push({path:"travel-request-detail",query:{request:e.pid}})}dl();const cl=(0,o.iH)({travel_pid:"",items:[{budget:"",amount:""}]}),pl=()=>{cl.value={travel_pid:"",items:[{budget:"",amount:""}]}},ml=(0,o.iH)(!1),vl=e=>{cl.value.travel_pid=e,ml.value=!0},_l=()=>{al.value.budget.push({budget:"",amount:""})},gl=e=>{let l=al.value.budget.length;1!==l?al.value.budget.splice(e,1):u.Z.commit("notify",{message:"One Item is required to proceed ",type:"warning"})},bl=()=>{cl.value.items.push({budget:"",amount:""})},fl=e=>{let l=cl.value.items.length;1!==l?cl.value.items.splice(e,1):u.Z.commit("notify",{message:"One Item is required to proceed ",type:"warning"})};function wl(){u.Z.dispatch("postMethod",{url:"/add-travel-request-budget",param:cl.value}).then((e=>{422==e?.status?ol.value=e.data:201==e?.status&&(tl(),dl())}))}const kl=(0,o.iH)({travel_pid:"",expense:"",amount:"",image:""}),yl=()=>{kl.value={travel_pid:"",expense:"",amount:"",image:""}},hl=(0,o.iH)(!1),xl=e=>{kl.value.travel_pid=e,hl.value=!0},ql=e=>{u.Z.dispatch("putMethod",{url:"/cancel-travel-request/"+e,prompt:"are you sure you want to cancel this request?"}).then((e=>{201==e?.status&&dl()}))},Dl=e=>{kl.value.image=l(e)},Ul=(0,o.iH)([]);function Cl(){Ul.value=[],u.Z.dispatch("postMethod",{url:"/add-travel-request-expense",param:kl.value}).then((e=>{422==e?.status?Ul.value=e.data:201==e?.status&&(yl(),dl())}))}const Vl=(0,o.iH)([]);function zl(){u.Z.dispatch("loadDropdown","users").then((({data:e})=>{Vl.value=e}))}function Hl(e){e.url&&!e.active&&dl(e.url)}return zl(),(e,l)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",_,[(0,a._)("div",g,[(0,a._)("div",b,[(0,a._)("button",{class:"btn btn-sm btn-primary m-2",onClick:Ne},"Request"),(0,a._)("div",f,[(0,a._)("table",w,[k,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(ul.value?.data,((e,l)=>((0,a.wg)(),(0,a.iD)("tr",{key:l},[(0,a._)("td",null,(0,n.zw)(l+1),1),(0,a._)("td",null,(0,n.zw)(e.title),1),(0,a._)("td",null,(0,n.zw)(e.request_status),1),(0,a._)("td",null,(0,n.zw)(e.destination),1),(0,a._)("td",null,(0,n.zw)(e.start),1),(0,a._)("td",null,(0,n.zw)(e.to),1),(0,a._)("td",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.crew,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.pid,class:"badge bg-dark p-1 m-1"},(0,n.zw)(e.text),1)))),128))]),(0,a._)("td",null,(0,n.zw)(e.itinerary),1),(0,a._)("td",null,(0,n.zw)(e.mode),1),(0,a._)("td",null,[(0,a._)("div",y,[h,(0,a._)("ul",x,[(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-info",onClick:l=>rl(e)},"Details",8,q)]),(0,a._)("li",null,[0==e?.status&&e?.user_pid==v.value?((0,a.wg)(),(0,a.iD)("a",{key:0,class:"dropdown-item pointer bg-warning",onClick:l=>sl(e)},"Edit",8,D)):(0,a.kq)("",!0)]),(0,a._)("li",null,[3!=e?.status&&4!=e?.status&&e?.user_pid==v.value?((0,a.wg)(),(0,a.iD)("a",{key:0,class:"dropdown-item pointer bg-primary",onClick:l=>vl(e.pid)},"Add Budget",8,U)):(0,a.kq)("",!0)]),(0,a._)("li",null,[3!=e?.status&&1!=e?.status||4==e?.status||e?.user_pid!=v.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("a",{key:0,class:"dropdown-item pointer bg-info",onClick:l=>xl(e.pid)},"Add Expense",8,C))]),(0,a._)("li",null,[0==e?.status&&e?.user_pid==v.value?((0,a.wg)(),(0,a.iD)("a",{key:0,class:"dropdown-item pointer bg-danger",onClick:l=>ql(e.pid)},"Cancel",8,V)):(0,a.kq)("",!0)])])])])])))),128))])]),(0,a._)("div",z,[(0,a._)("nav",H,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(ul.value.links,((e,l)=>((0,a.wg)(),(0,a.j4)(r.Z,{link:e,key:l,onNext:l=>Hl(e)},null,8,["link","onNext"])))),128))])])])])])]),(0,a.Wm)(i.Z,{isOpen:Re.value,"modal-class":"modal-lg",title:"Travel Request",onSubmit:il,onModalClose:tl},{content:(0,a.w5)((()=>[(0,a._)("form",Z,[(0,a._)("div",M,[(0,a._)("div",T,[(0,a._)("div",O,[A,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>al.value.title=e),class:"form-control form-control-sm",placeholder:"e.g work shop"},null,512),[[s.nr,al.value.title]]),ol.value?.title?((0,a.wg)(),(0,a.iD)("p",E,(0,n.zw)(ol.value?.title),1)):(0,a.kq)("",!0)])]),(0,a._)("div",I,[(0,a._)("div",R,[S,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=e=>al.value.destination=e),class:"form-control form-control-sm"},null,512),[[s.nr,al.value.destination]]),ol.value?.destination?((0,a.wg)(),(0,a.iD)("p",N,(0,n.zw)(ol.value?.destination),1)):(0,a.kq)("",!0)])]),(0,a._)("div",B,[(0,a._)("div",K,[Y,(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":l[2]||(l[2]=e=>al.value.begin=e),class:"form-control form-control-sm"},null,512),[[s.nr,al.value.begin]]),ol.value?.begin?((0,a.wg)(),(0,a.iD)("p",$,(0,n.zw)(ol.value?.begin),1)):(0,a.kq)("",!0)])]),(0,a._)("div",j,[(0,a._)("div",F,[L,(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":l[3]||(l[3]=e=>al.value.end=e),class:"form-control form-control-sm"},null,512),[[s.nr,al.value.end]]),ol.value?.end?((0,a.wg)(),(0,a.iD)("p",W,(0,n.zw)(ol.value?.end),1)):(0,a.kq)("",!0)])]),(0,a._)("div",P,[(0,a._)("div",J,[Q,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":l[4]||(l[4]=e=>al.value.itinerary=e),class:"form-control form-control-sm"},null,512),[[s.nr,al.value.itinerary]]),ol.value?.itinerary?((0,a.wg)(),(0,a.iD)("p",G,(0,n.zw)(ol.value?.itinerary),1)):(0,a.kq)("",!0)])]),(0,a._)("div",X,[(0,a._)("div",ee,[le,(0,a._)("div",null,[(0,a.Wm)((0,o.SU)(d.J),{modelValue:al.value.crew,"onUpdate:modelValue":l[5]||(l[5]=e=>al.value.crew=e),options:Vl.value,multiple:!0,"close-on-select":!0,placeholder:"Pick Crew",label:"text","track-by":"id"},null,8,["modelValue","options"])]),ol.value?.crew?((0,a.wg)(),(0,a.iD)("p",te,(0,n.zw)(ol.value?.crew),1)):(0,a.kq)("",!0)])]),(0,a._)("div",ae,[(0,a._)("div",ne,[se,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=e=>al.value.mode=e),class:"form-control"},null,512),[[s.nr,al.value.mode]]),ol.value?.mode?((0,a.wg)(),(0,a.iD)("p",oe,(0,n.zw)(ol.value?.mode),1)):(0,a.kq)("",!0)])]),(0,a._)("div",ie,[ue,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(al.value.budget,((e,l)=>((0,a.wg)(),(0,a.iD)("fieldset",{key:l,class:"border rounded-3 p-2 m-1"},[(0,a._)("div",de,[(0,a._)("div",re,[(0,a._)("div",ce,[pe,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":l=>e.budget=l,class:"form-control form-control-sm",placeholder:"e.g feeding"},null,8,me),[[s.nr,e.budget]]),ol.value[`budget${l}`]?((0,a.wg)(),(0,a.iD)("p",ve,(0,n.zw)(ol.value[`budget${l}`]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",_e,[(0,a._)("div",ge,[be,(0,a._)("div",fe,[(0,a.wy)((0,a._)("input",{type:"number",step:"0.1","onUpdate:modelValue":l=>e.amount=l,class:"form-control form-control-sm"},null,8,we),[[s.nr,e.amount]]),(0,a._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e=>gl(l)},he,8,ke)]),ol.value[`amount${l}`]?((0,a.wg)(),(0,a.iD)("p",xe,(0,n.zw)(ol.value[`amount${l}`]),1)):(0,a.kq)("",!0)])])])])))),128)),(0,a._)("div",{class:"float-end p-2"},[(0,a._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:_l},De)])])])])])),_:1},8,["isOpen"]),(0,a.Wm)(i.Z,{isOpen:ml.value,"modal-class":"modal-sm",title:"Add Request Budget",onSubmit:wl,onModalClose:tl},{content:(0,a.w5)((()=>[(0,a._)("form",Ue,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(cl.value.items,((e,l)=>((0,a.wg)(),(0,a.iD)("fieldset",{key:l,class:"border rounded-3 p-2 m-1"},[(0,a._)("div",Ce,[(0,a._)("div",Ve,[(0,a._)("div",ze,[He,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":l=>e.budget=l,class:"form-control form-control-sm",placeholder:"e.g feeding"},null,8,Ze),[[s.nr,e.budget]])])]),(0,a._)("div",Me,[(0,a._)("div",Te,[Oe,(0,a._)("div",Ae,[(0,a.wy)((0,a._)("input",{type:"number",step:"0.1","onUpdate:modelValue":l=>e.amount=l,class:"form-control form-control-sm"},null,8,Ee),[[s.nr,e.amount]]),(0,a._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e=>fl(l)},Se,8,Ie)])])])])])))),128)),(0,a._)("div",{class:"float-end p-2"},[(0,a._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:bl},Be)])])])),_:1},8,["isOpen"]),(0,a.Wm)(i.Z,{isOpen:hl.value,"modal-class":"modal-sm",title:"Add Request Expense",onSubmit:Cl,onModalClose:tl},{content:(0,a.w5)((()=>[(0,a._)("form",Ke,[(0,a._)("div",Ye,[(0,a._)("div",$e,[(0,a._)("div",je,[Fe,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=e=>kl.value.expense=e),class:"form-control form-control-sm",placeholder:"e.g feeding"},null,512),[[s.nr,kl.value.expense]]),Ul.value?.expense?((0,a.wg)(),(0,a.iD)("p",Le,(0,n.zw)(Ul.value?.expense[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",We,[(0,a._)("div",Pe,[Je,(0,a.wy)((0,a._)("input",{type:"number",step:"0.1","onUpdate:modelValue":l[8]||(l[8]=e=>kl.value.amount=e),class:"form-control form-control-sm"},null,512),[[s.nr,kl.value.amount]]),Ul.value?.amount?((0,a.wg)(),(0,a.iD)("p",Qe,(0,n.zw)(Ul.value?.amount[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",Ge,[(0,a._)("div",Xe,[el,(0,a._)("input",{type:"file",class:"form-control form-control-sm",id:"image",onChange:Dl,accept:"image/*",required:""},null,32),Ul.value?.image?((0,a.wg)(),(0,a.iD)("p",ll,(0,n.zw)(Ul.value?.image[0]),1)):(0,a.kq)("",!0)])])])])])),_:1},8,["isOpen"])]))}},al=t(89);const nl=(0,al.Z)(tl,[["__scopeId","data-v-1e32f027"]]);var sl=nl}}]);
//# sourceMappingURL=438.78850d8b.js.map