{"version":3,"file":"js/6191.38279a3f.js","mappings":"giDAkHA,MAAMA,GAASC,EAAAA,EAAAA,IAAI,CAAC,GACdC,GAAOD,EAAAA,EAAAA,IAAI,CAAC,GACZE,GAAOF,EAAAA,EAAAA,IAAI,CAAC,GACZG,GAAeH,EAAAA,EAAAA,IAAI,CAAC,GAEpBI,GAAOJ,EAAAA,EAAAA,IAAI,CACbI,KAAM,CAAC,CACHC,IAAK,GACLC,WAAY,KAEhBC,SAAU,GACVD,WAAY,IAIVE,EAASA,KACXJ,EAAKK,MAAML,KAAKM,KAAK,CACjBL,IAAK,GACLC,WAAY,IACd,EAGAK,EAAaC,IACf,IAAIC,EAAMT,EAAKK,MAAML,KAAKU,OACd,IAARD,GAIJT,EAAKK,MAAML,KAAKW,OAAOH,EAAG,GAC1BI,KAJIC,EAAAA,EAAMC,OAAO,SAAU,CAAEC,QAAS,iCAAkClB,KAAM,WAItE,EAYNK,GAAaN,EAAAA,EAAAA,IAAI,GAChBgB,EAASA,KACZV,EAAWG,MAAQL,EAAKK,MAAML,KAAKgB,QAAO,CAACC,GAAKf,gBAAiBe,EAAIC,OAAOhB,IAAa,EAAE,EAG/F,SAASiB,IACLxB,EAAOU,MAAQ,GACfQ,EAAAA,EAAMO,SAAS,aAAc,CAAEC,IAAK,wBAAyBC,MAAOtB,EAAKK,QAASkB,MAAMC,IAChE,KAAhBA,GAAMC,OACN9B,EAAOU,MAAQmB,EAAKA,KACG,KAAhBA,GAAMC,SACbzB,EAAKK,MAAML,KAAO,CAAC,CACfC,IAAK,GACLC,WAAY,KAEpB,IACDwB,OAAMC,IACLC,QAAQC,IAAIF,EAAE,GAEtB,CAEA,SAASG,EAAmBC,GACxBlB,EAAAA,EAAMO,SAAS,YAAa,CAAEC,IAAK,qBAAsBU,EAAMC,OAAO3B,QAASkB,MAAMC,IAC7D,KAAhBA,GAAMC,SACN5B,EAAKQ,MAAQmB,EAAKA,KAClB1B,EAAKO,MAAQmB,EAAKA,KAAKxB,KACpBwB,GAAMA,MAAMxB,KAAKU,OAChBV,EAAKK,MAAML,KAAQwB,EAAKA,KAAKxB,KAE7BA,EAAKK,MAAML,KAAO,CAAC,CACnBC,IAAK,GACLC,WAAY,KAGhBF,EAAKK,MAAMF,SAAW4B,EAAMC,OAAO3B,MACnCL,EAAKK,MAAMH,WAAasB,EAAKA,KAAKtB,WAClCU,IACJ,IACDc,OAAMC,IACLC,QAAQC,IAAIF,EAAE,GAEtB,CACA,SAASM,IACLpB,EAAAA,EAAMO,SAAS,eAAgB,qBAAsBG,MAAK,EAAEC,WACxDzB,EAAaM,MAAQmB,CAAI,IAC1BE,OAAMC,IACLC,QAAQC,IAAIF,EAAE,GAEtB,C,OACAM,I,i1DCzMA,MAAMC,EAAc,EAEpB,O","sources":["webpack://Technovati/./src/views/appraisal/AppraisalKpi.vue","webpack://Technovati/./src/views/appraisal/AppraisalKpi.vue?cf87"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"container mt-2\">\r\n            <h3 class=\"mx-4\">Appraisal KPIs</h3>\r\n            <div class=\"row\">\r\n                <div class=\"col-md-6\">\r\n                    <div class=\"card\">\r\n                        <div class=\"card-body\">\r\n                            <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                <legend class=\"float-none w-auto px-2 h5\">Add Appraisal KPIs</legend>\r\n                                <div class=\"col-md-12\">\r\n                                    <label class=\"form-label\">Appraisal Type</label>\r\n                                    <select class=\"form-control\" @change=\"loadSectionDetails($event)\">\r\n                                        <option disabled selected>Make Selection</option>\r\n                                        <option v-for=\"sec in sectionsDrop\" :key=\"sec.pid\" :value=\"sec.pid\">{{ sec.name\r\n                                            }} -- {{ sec.obtainable }}</option>\r\n                                    </select>\r\n                                    <p class=\"text-danger email_error\"></p>\r\n                                </div>\r\n                                <form v-if=\"keys.type_pid\">\r\n                                    <fieldset v-for=\"(key,i) in keys.keys\" :key=\"i\">\r\n                                        <div class=\"row\">\r\n                                            <div class=\"col-md-8\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Key</label>\r\n                                                    <input type=\"text\" v-model=\"key.key\" class=\"form-control\"\r\n                                                        placeholder=\"e.g mode of request\">\r\n                                                    <!-- <p class=\"text-danger \" v-if=\"errors?.name\">{{ errors?.name[0] }} </p> -->\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-md-4\">\r\n                                                <div class=\"form-group\">\r\n                                                    <label class=\"form-label\">Obtainable Score</label>\r\n                                                    <div class=\"input-group\">\r\n                                                        <input type=\"number\" step=\"0.1\" @change=\"sumVal\"\r\n                                                            v-model=\"key.obtainable\" class=\"form-control\"\r\n                                                            placeholder=\"e.g 3\">\r\n                                                        <button type=\"button\" class=\"btn btn-sm btn-warning\"\r\n                                                            @click=\"removeKey(i)\"><i\r\n                                                                class=\"bi bi-patch-minus\"></i></button>\r\n                                                    </div>\r\n                                                    <!-- <p class=\"text-danger \" v-if=\"errors?.note\">{{ errors?.note[0] }}       </p> -->\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </fieldset>\r\n                                    {{ obtainable }} /{{ keys?.obtainable }}\r\n                                    <button type=\"button\" class=\"btn btn-sm btn-primary mt-2\" @click=\"addKey\"><i\r\n                                            class=\"bi bi-plus\"></i></button>\r\n                                    <hr>\r\n                                    <div class=\"float-end\">\r\n                                        <button type=\"button\" class=\"btn btn-success btn-sm mt-2\"\r\n                                            @click=\"createKpi\">Submit</button>\r\n                                    </div>\r\n                                </form>\r\n\r\n                            </fieldset>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-md-6\">\r\n                    <div class=\"card\">\r\n                        <div class=\"card-header\">Appraisal Type</div>\r\n                        <div class=\"card-body\">\r\n                            <h4>{{ type.name }}</h4>\r\n                            <hr>\r\n                            <p>{{ type.note }}</p>\r\n                            <div class=\"table-responsive\">\r\n                                <table class=\"table-hover table-stripped table-bordered table\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>SN</th>\r\n                                            <th>Key</th>\r\n                                            <th>Score</th>\r\n                                            <!-- <th> <i class=\"bi bi-gear-fill\"></i> </th> -->\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr v-for=\"(kpi, loop) in kpis\" :key=\"loop\">\r\n                                            <td>{{ loop + 1 }}</td>\r\n                                            <td>{{ kpi.key }}</td>\r\n                                            <td>{{ kpi.obtainable }}</td>\r\n\r\n                                            <!-- <td>\r\n                                                <div class=\"dropdown\">\r\n                                                    <button type=\"button\" class=\"btn btn-primary btn-sm dropdown-toggle\"  data-bs-toggle=\"dropdown\">\r\n                                                        <i class=\"bi bi-tools\"></i>\r\n                                                    </button>\r\n                                                    <ul class=\"dropdown-menu\">\r\n                                                        <li class=\"bg-warning\"><a class=\"dropdown-item pointer\"\r\n                                                                @click=\"editSection(kpi)\">Edit</a> </li>\r\n                                                        <li class=\"bg-danger\"><a class=\"dropdown-item pointer\"\r\n                                                                @click=\"deleteLog(kpi.pid)\">Delete</a> </li>\r\n                                                    </ul>\r\n                                                </div>\r\n                                            </td> -->\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport store from \"@/store\";\r\nimport { ref } from \"vue\";\r\n\r\nconst errors = ref({});\r\nconst type = ref({});\r\nconst kpis = ref({});\r\nconst sectionsDrop = ref({});\r\n\r\nconst keys = ref({\r\n    keys: [{\r\n        key: '',\r\n        obtainable: '',\r\n    }],\r\n    type_pid: '',\r\n    obtainable: 0,\r\n});\r\n\r\n\r\nconst addKey = () => {\r\n    keys.value.keys.push({\r\n        key: '',\r\n        obtainable: '',\r\n    })\r\n\r\n}\r\nconst removeKey = (i) => {\r\n    let len = keys.value.keys.length;\r\n    if (len === 1) {\r\n        store.commit('notify', { message: 'One key is required to proceed', type: 'warning' })\r\n        return;\r\n    }\r\n    keys.value.keys.splice(i, 1);\r\n    sumVal()\r\n}\r\n// const editSection = (sec) => {\r\n//    keys.value.keys.push({\r\n//         key: sec.key ,\r\n//         obtainable: sec.obtainable ,\r\n//         pid: sec.pid,\r\n//     })\r\n// }\r\n// const deleteLog = (id) => {\r\n//     alert(id)\r\n// }\r\nconst obtainable = ref(0)\r\n const sumVal = ()=>{\r\n    obtainable.value = keys.value.keys.reduce((n, { obtainable }) => n + Number(obtainable), 0);\r\n }\r\n\r\nfunction createKpi() {\r\n    errors.value = []\r\n    store.dispatch('postMethod', { url: '/create-appraisal-kpi', param: keys.value }).then((data) => {\r\n        if (data?.status == 422) {\r\n            errors.value = data.data\r\n        } else if (data?.status == 201) {\r\n            keys.value.keys = [{\r\n                key: '',\r\n                obtainable: '',\r\n            }];\r\n        }\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\n\r\nfunction loadSectionDetails(event) {\r\n    store.dispatch('getMethod', { url: '/load-section-kpi/'+ event.target.value }).then((data) => {\r\n        if (data?.status == 200) {\r\n            type.value = data.data;\r\n            kpis.value = data.data.keys;\r\n            if(data?.data?.keys.length){\r\n                keys.value.keys =  data.data.keys\r\n            }else{\r\n                keys.value.keys = [{\r\n                key: '',\r\n                obtainable: '',\r\n            }];\r\n            }\r\n            keys.value.type_pid = event.target.value;\r\n            keys.value.obtainable = data.data.obtainable;\r\n            sumVal()\r\n        }\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\nfunction dropdownSection() {\r\n    store.dispatch('loadDropdown', 'appraisal-section' ).then(({data}) => {\r\n        sectionsDrop.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\ndropdownSection()\r\n\r\n\r\n</script>\r\n\r\n<style scoped></style>","import script from \"./AppraisalKpi.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppraisalKpi.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["errors","ref","type","kpis","sectionsDrop","keys","key","obtainable","type_pid","addKey","value","push","removeKey","i","len","length","splice","sumVal","store","commit","message","reduce","n","Number","createKpi","dispatch","url","param","then","data","status","catch","e","console","log","loadSectionDetails","event","target","dropdownSection","__exports__"],"sourceRoot":""}