"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[9966],{5658:function(e,l,a){function t(){function e(e,a="axios"){const t=[];if("axios"==a&&e)for(let o in e){if(-1!==o.indexOf(".")){let a=l(o);t[a]=e[o][0]}else t[o]=e[o][0];t[o]=e[o][0]}return t}function l(e){const l=e.split(".").filter((e=>e)),a=e.split(".").filter((e=>!isNaN(e)));return l[2]+a.map(Number)}return{transformValidationErrors:e}}a.d(l,{Z:function(){return t}})},9966:function(e,l,a){a.r(l),a.d(l,{default:function(){return Ee}});a(560);var t=a(3396),o=a(4870),s=a(7139),n=a(9242),c=a(2191),u=a(6204),i=a(2524),r=a(5658);const d={class:"container mt-2"},p={class:"card"},m=(0,t._)("div",{class:"card-header"},[(0,t._)("h3",null,"Add Purchase")],-1),_={class:"card-body"},v={action:""},b={class:"border rounded-3 p-2 m-1"},f=(0,t._)("legend",{class:"float-none w-auto px-2"},"Products",-1),g={class:"col-md-3"},h={class:"form-group"},w=(0,t._)("label",{class:"form-label small"},"Item",-1),y={key:0,class:"text-danger"},k={class:"col-md-2"},V={class:"form-group"},D=(0,t._)("label",{class:"form-label small"},"Qty",-1),U=["onUpdate:modelValue"],q={key:0,class:"text-danger"},x={class:"col-md-2"},S={class:"form-group"},C=(0,t._)("label",{class:"form-label small"},"Rate",-1),Z=["onUpdate:modelValue"],z={key:0,class:"text-danger"},H={class:"col-md-5"},I={class:"form-group"},T=(0,t._)("label",{class:"form-label small"},"Description",-1),$={class:"input-group"},A=["onUpdate:modelValue"],P=["onClick"],E=(0,t._)("i",{class:"bi bi-patch-minus"},null,-1),N=[E],O={key:0,class:"text-danger"},R=(0,t._)("i",{class:"bi bi-plus"},null,-1),W=[R],K={class:"row"},Y={class:"col-md-6"},M={class:"border rounded-3 p-2 m-1"},F=(0,t._)("legend",{class:"float-none w-auto px-2"},"Store",-1),J={class:"form-group"},Q=(0,t._)("label",{class:"form-label small"},"Record Purchase In",-1),j=(0,t._)("option",{value:"",selected:""},"Select Type",-1),B=["value"],G={key:0,class:"text-danger"},L={class:"row"},X={class:"col-md-6"},ee={class:"form-group"},le=(0,t._)("label",{class:"form-label small"},"Supplier",-1),ae={key:0,class:"text-danger"},te={class:"col-md-6"},oe={class:"form-group"},se=(0,t._)("label",{class:"form-label small"},"Store",-1),ne={key:0,class:"text-danger"},ce={class:"col-md-6"},ue={class:"form-group"},ie=(0,t._)("label",{class:"form-label small"},"purchase date",-1),re={key:0,class:"text-danger"},de={class:"col-md-6"},pe={class:"form-group"},me=(0,t._)("label",{class:"form-label small"},"reference Number",-1),_e={key:0,class:"text-danger"},ve={class:"col-md-6"},be={class:"border rounded-3 p-2 m-1"},fe=(0,t._)("legend",{class:"float-none w-auto px-2"},"Payment",-1),ge=["value"],he=(0,t._)("br",null,null,-1),we=(0,t._)("label",{for:""},"Discount",-1),ye={class:"col-md-6"},ke={class:"form-group"},Ve=(0,t._)("label",{class:"form-label small"},"Account",-1),De={key:0,class:"text-danger"},Ue={class:"col-md-6"},qe={class:"form-group"},xe=(0,t._)("label",{class:"form-label small"},"Amount",-1),Se={class:"input-group"},Ce=["onUpdate:modelValue"],Ze=["onClick"],ze=(0,t._)("i",{class:"bi bi-patch-minus"},null,-1),He=[ze],Ie={key:0,class:"text-danger"},Te=(0,t._)("i",{class:"bi bi-plus"},null,-1),$e=[Te];var Ae={__name:"AddPurchase",setup(e){const{transformValidationErrors:l}=(0,r.Z)(),{numberFormat:a}=(0,i.H)(),E=(0,o.iH)({account_pid:"",supplier_pid:"",store_pid:"",purchase_date:"",reference_number:"",purchase_no:"",due_date:"",bill_to:"",ship_to:"",items:[{item_pid:"",quantity:"",rate:"",description:""}],accounts:[{account_pid:"",amount:""}],discount:0,sub_total:0}),R=()=>{E.value={account_pid:"",supplier_pid:"",purchase_date:"",reference_number:"",purchase_no:"",due_date:"",bill_to:"",ship_to:"",items:[{item_pid:"",quantity:"",rate:"",description:""}],accounts:[{account_pid:"",amount:""}],discount:0,sub_total:0}},ze=()=>{E.value.items.push({item_pid:"",quantity:"",rate:"",description:""})},Te=e=>{let l=E.value.items.length;1!==l?(E.value.items.splice(e,1),Ae()):c.Z.commit("notify",{message:"One Item is required to proceed",type:"warning"})},Ae=()=>{E.value.sub_total=0,E.value.items.forEach((e=>{e.quantity>0&&e.rate>0&&(E.value.sub_total+=e.quantity*e.rate)}))},Pe=()=>{E.value.accounts.push({account_pid:"",amount:""})},Ee=e=>{let l=E.value.accounts.length;1!==l?E.value.accounts.splice(e,1):c.Z.commit("notify",{message:"One Account is required",type:"warning"})},Ne=()=>{Oe.value=[],c.Z.dispatch("postMethod",{url:"/add-purchase",param:E.value}).then((e=>{422==e?.status?Oe.value=l(e.data):201==e?.status&&R()})).catch((e=>{console.log(e)}))},Oe=(0,o.iH)({}),Re=(0,o.iH)({});function We(e){c.Z.dispatch("loadDropdown","type-accounts/"+e).then((({data:e})=>{Re.value=e})).catch((e=>{console.log(e)}))}const Ke=(0,o.iH)({});function Ye(){c.Z.dispatch("loadDropdown","account-types").then((({data:e})=>{Ke.value=e})).catch((e=>{console.log(e)}))}Ye(),Fe();const Me=(0,o.iH)({});function Fe(){c.Z.dispatch("loadDropdown","suppliers").then((({data:e})=>{Me.value=e})).catch((e=>{console.log(e)}))}const Je=(0,o.iH)({});function Qe(){c.Z.dispatch("loadDropdown","stores").then((({data:e})=>{Je.value=e})).catch((e=>{console.log(e)}))}Qe();const je=(0,o.iH)({});function Be(){c.Z.dispatch("loadDropdown","items").then((({data:e})=>{je.value=e})).catch((e=>{console.log(e)}))}return Be(),(0,t.bv)((()=>{let e=localStorage.getItem("TVATI_EDIT_PRC")?JSON.parse(localStorage.getItem("TVATI_EDIT_PRC")):"null";"null"!=e&&(E.value=e,E.value.accounts=e?.payment?.payment_details,E.value.account_pid=e?.account_type_pid,We(e?.account_type_pid))})),(e,l)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",d,[(0,t._)("div",p,[m,(0,t._)("div",_,[(0,t._)("fieldset",null,[(0,t._)("form",v,[(0,t._)("fieldset",b,[f,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(E.value.items,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{class:"row",key:l},[(0,t._)("div",g,[(0,t._)("div",h,[w,(0,t.Wm)((0,o.SU)(u.Z),{modelValue:e.item_pid,"onUpdate:modelValue":l=>e.item_pid=l,options:je.value,settings:{width:"100%"},placeholder:"Select Items"},null,8,["modelValue","onUpdate:modelValue","options"]),Oe.value[`item_pid${l}`]?((0,t.wg)(),(0,t.iD)("p",y,(0,s.zw)(Oe.value[`item_pid${l}`]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",k,[(0,t._)("div",V,[D,(0,t.wy)((0,t._)("input",{type:"number",step:"0.5",onChange:Ae,class:"form-control form-control-sm","onUpdate:modelValue":l=>e.quantity=l,placeholder:"e.g 128"},null,40,U),[[n.nr,e.quantity]]),Oe.value[`quantity${l}`]?((0,t.wg)(),(0,t.iD)("p",q,(0,s.zw)(Oe.value[`quantity${l}`]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",x,[(0,t._)("div",S,[C,(0,t.wy)((0,t._)("input",{type:"number",step:"0.5",onChange:Ae,class:"form-control form-control-sm","onUpdate:modelValue":l=>e.rate=l,placeholder:"e.g 300000"},null,40,Z),[[n.nr,e.rate]]),Oe.value[`rate${l}`]?((0,t.wg)(),(0,t.iD)("p",z,(0,s.zw)(Oe.value[`rate${l}`]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",H,[(0,t._)("div",I,[T,(0,t._)("div",$,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":l=>e.description=l,placeholder:"e.g new consignment"},null,8,A),[[n.nr,e.description]]),(0,t._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e=>Te(l)},N,8,P)]),Oe.value.description?((0,t.wg)(),(0,t.iD)("p",O,(0,s.zw)(Oe.value.description),1)):(0,t.kq)("",!0)])])])))),128)),(0,t._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:ze},W)]),(0,t._)("div",K,[(0,t._)("div",Y,[(0,t._)("fieldset",M,[F,(0,t._)("div",J,[Q,(0,t.wy)((0,t._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":l[0]||(l[0]=e=>E.value.account_pid=e),onChange:l[1]||(l[1]=e=>We(e.target.value))},[j,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Ke.value,(e=>((0,t.wg)(),(0,t.iD)("option",{key:e.id,value:e.id},(0,s.zw)(e.text),9,B)))),128))],544),[[n.bM,E.value.account_pid]]),Oe.value?.account_pid?((0,t.wg)(),(0,t.iD)("p",G,(0,s.zw)(Oe.value?.account_pid),1)):(0,t.kq)("",!0)]),(0,t._)("div",L,[(0,t._)("div",X,[(0,t._)("div",ee,[le,(0,t.Wm)((0,o.SU)(u.Z),{modelValue:E.value.supplier_pid,"onUpdate:modelValue":l[2]||(l[2]=e=>E.value.supplier_pid=e),options:Me.value,settings:{width:"100%"},placeholder:"Select Supplier"},null,8,["modelValue","options"]),Oe.value?.supplier_pid?((0,t.wg)(),(0,t.iD)("p",ae,(0,s.zw)(Oe.value?.supplier_pid),1)):(0,t.kq)("",!0)])]),(0,t._)("div",te,[(0,t._)("div",oe,[se,(0,t.Wm)((0,o.SU)(u.Z),{modelValue:E.value.store_pid,"onUpdate:modelValue":l[3]||(l[3]=e=>E.value.store_pid=e),options:Je.value,settings:{width:"100%"},placeholder:"Select Store"},null,8,["modelValue","options"]),Oe.value?.store_pid?((0,t.wg)(),(0,t.iD)("p",ne,(0,s.zw)(Oe.value?.store_pid),1)):(0,t.kq)("",!0)])]),(0,t._)("div",ce,[(0,t._)("div",ue,[ie,(0,t.wy)((0,t._)("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":l[4]||(l[4]=e=>E.value.purchase_date=e)},null,512),[[n.nr,E.value.purchase_date]]),Oe.value?.purchase_date?((0,t.wg)(),(0,t.iD)("p",re,(0,s.zw)(Oe.value?.purchase_date),1)):(0,t.kq)("",!0)])]),(0,t._)("div",de,[(0,t._)("div",pe,[me,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":l[5]||(l[5]=e=>E.value.reference_number=e),placeholder:"e.g 01234"},null,512),[[n.nr,E.value.reference_number]]),Oe.value.reference_number?((0,t.wg)(),(0,t.iD)("p",_e,(0,s.zw)(Oe.value.reference_number),1)):(0,t.kq)("",!0)])])])])]),(0,t._)("div",ve,[(0,t._)("fieldset",be,[fe,(0,t._)("input",{type:"text",value:(0,o.SU)(a)(E.value.sub_total),class:"form-control form-control-sm",disabled:"",placeholder:"Sub Total"},null,8,ge),he,we,(0,t.wy)((0,t._)("input",{type:"number",step:"0.5","onUpdate:modelValue":l[6]||(l[6]=e=>E.value.discount=e),class:"form-control form-control-sm",placeholder:"Discount"},null,512),[[n.nr,E.value.discount]]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(E.value.accounts,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{class:"row",key:l},[(0,t._)("div",ye,[(0,t._)("div",ke,[Ve,(0,t.Wm)((0,o.SU)(u.Z),{modelValue:e.account_pid,"onUpdate:modelValue":l=>e.account_pid=l,options:Re.value,settings:{width:"100%"},placeholder:"Select Account"},null,8,["modelValue","onUpdate:modelValue","options"]),Oe.value[`account_pid${l}`]?((0,t.wg)(),(0,t.iD)("p",De,(0,s.zw)(Oe.value[`account_pid${l}`]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",Ue,[(0,t._)("div",qe,[xe,(0,t._)("div",Se,[(0,t.wy)((0,t._)("input",{type:"number","onUpdate:modelValue":l=>e.amount=l,step:".05",class:"form-control form-control-sm",placeholder:"Select Account"},null,8,Ce),[[n.nr,e.amount]]),(0,t._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e=>Ee(l)},He,8,Ze)]),Oe.value[`amount${l}`]?((0,t.wg)(),(0,t.iD)("p",Ie,(0,s.zw)(Oe.value[`amount${l}`]),1)):(0,t.kq)("",!0)])])])))),128)),(0,t._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:Pe},$e)])])]),(0,t._)("button",{type:"button",class:"btn btn-primary mt-2",onClick:Ne},"Submit")])])])])])]))}};const Pe=Ae;var Ee=Pe}}]);
//# sourceMappingURL=9966.943b850e.js.map