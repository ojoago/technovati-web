"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[6335],{1187:function(e,l,a){a.d(l,{Z:function(){return i}});var t=a(3396);const n=["disabled","innerHTML"];var o={__name:"PaginationLinks",props:{link:Object},emits:["next"],setup(e){return(l,a)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("li",{class:"page-item",onClick:a[0]||(a[0]=a=>l.$emit("next",e.link))},[(0,t._)("span",{class:"page-link pointer",href:"#",disabled:!e.link.url,innerHTML:e.link.label},null,8,n)])]))}};const s=o;var i=s},6335:function(e,l,a){a.r(l),a.d(l,{default:function(){return ae}});var t=a(3396),n=a(7139),o=a(9242),s=a(2191),i=a(4870),r=a(1187),u=a(6091),c=a(2524);const d={class:"container-fluid mt-2"},v={class:"card"},m={class:"card-body"},p={class:"border rounded-3 p-2 m-1"},_=(0,t._)("legend",{class:"float-none w-auto px-2"},"Leave Request",-1),g={class:"table-responsive"},f={class:"table-hover table-stripped table-bordered table"},w=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"SN"),(0,t._)("th",null,"Leave"),(0,t._)("th",null,"From"),(0,t._)("th",null,"to"),(0,t._)("th",null,"note"),(0,t._)("th",null,"status"),(0,t._)("th",null,"manager comment"),(0,t._)("th",null,"hr comment"),(0,t._)("th",null,[(0,t._)("i",{class:"bi bi-gear-fill"})])])],-1),b={class:"dropdown"},h=(0,t._)("button",{type:"button",class:"btn btn-primary btn-sm dropdown-toggle","data-bs-toggle":"dropdown"},[(0,t._)("i",{class:"bi bi-tools"})],-1),k={class:"dropdown-menu"},y={key:0,class:"bg-primary"},x=["onClick"],D={key:1,class:"bg-warning"},q=["onClick"],z={key:2,class:"bg-danger"},C=["onClick"],H={class:"flex justify-center mt-4"},L={class:"relative justify-center rounded-md shadow pagination"},M={id:"lForm"},U={class:"row"},Z={class:"col-md-12"},N={class:"form-group"},j=(0,t._)("label",{class:"form-label"},[(0,t.Uk)("Leave "),(0,t._)("span",{class:"text-danger"},"*")],-1),R=(0,t._)("option",{value:"",selected:""},"Make Selection",-1),S=["value"],T={key:0,class:"text-danger"},V={class:"col-md-6"},F={class:"form-group"},K=(0,t._)("label",{class:"form-label"},[(0,t.Uk)("Begin "),(0,t._)("span",{class:"text-danger"},"*")],-1),O={key:0,class:"text-danger"},Y={class:"col-md-6"},E={class:"form-group"},B=(0,t._)("label",{class:"form-label"},"End",-1),I={key:0,class:"text-danger"},P={class:"col-md-12"},W={class:"form-group"},$=(0,t._)("label",{class:"form-label"},"Note ",-1),A={key:0,class:"text-danger"},G={class:"col-md-12"},J={class:"form-group"},Q=(0,t._)("label",{class:"form-label"},"Image",-1),X={key:0,class:"text-danger"};var ee={__name:"MyLeaveRequest",setup(e){const{handleFile:l}=(0,c.H)(),a=(0,i.iH)({}),ee=(0,i.iH)(!1),le=()=>{ee.value=!0},ae=()=>{ee.value=!1,ne()},te=(0,i.iH)({from:"",to:"",note:"",path:"",leave_pid:"",image:""}),ne=()=>{te.value={from:"",to:"",note:"",path:"",leave_pid:"",image:""}},oe=(0,i.iH)({});function se(){a.value=[],s.Z.dispatch("postMethod",{url:"/request-leave",param:te.value}).then((e=>{422==e?.status?a.value=e.data:201==e?.status&&(ce(),ae())})).catch((e=>{console.log(e)}))}const ie=e=>{te.value={from:e.from,to:e.to,note:e.note,image:"",leave_pid:e.leave_pid,pid:e.pid},ee.value=!0},re=e=>{s.Z.dispatch("putMethod",{url:"/cancel-leave-request/"+e,prompt:"are you sure you want to cancel this leave?"}).then((e=>{201==e?.status&&ce()})).catch((e=>{console.log(e)}))},ue=e=>{alert(e)};function ce(e="/load-my-leave-request"){s.Z.dispatch("getMethod",{url:e}).then((e=>{oe.value=200==e?.status?e.data:{}})).catch((e=>{console.log(e)}))}function de(e){e.url&&!e.active&&ce(e.url)}ce();const ve=e=>{te.value.image=l(e)},me=(0,i.iH)({});function pe(){s.Z.dispatch("loadDropdown","staff-leaves").then((({data:e})=>{me.value=e})).catch((e=>{console.log(e)}))}return pe(),(e,l)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",d,[(0,t._)("div",v,[(0,t._)("div",m,[(0,t._)("h5",{class:"card-title"},[(0,t.Uk)("Staff Leave "),(0,t._)("button",{class:"btn btn-primary btn-sm",onClick:le},"New Leave")]),(0,t._)("fieldset",p,[_,(0,t._)("div",g,[(0,t._)("table",f,[w,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(oe.value.data,((e,l)=>((0,t.wg)(),(0,t.iD)("tr",{key:l},[(0,t._)("td",null,(0,n.zw)(l+1),1),(0,t._)("td",null,(0,n.zw)(e.leave.leave),1),(0,t._)("td",null,(0,n.zw)(e.begin),1),(0,t._)("td",null,(0,n.zw)(e.end),1),(0,t._)("td",null,(0,n.zw)(e.note),1),(0,t._)("td",null,(0,n.zw)(e.request_status),1),(0,t._)("td",null,(0,n.zw)(e.line_manager_comment),1),(0,t._)("td",null,(0,n.zw)(e.hr_comment),1),(0,t._)("td",null,[(0,t._)("div",b,[h,(0,t._)("ul",k,[0==e.status?((0,t.wg)(),(0,t.iD)("li",y,[(0,t._)("a",{class:"dropdown-item pointer",onClick:l=>ue(e.pid)},"Remind",8,x)])):(0,t.kq)("",!0),0==e.status?((0,t.wg)(),(0,t.iD)("li",D,[(0,t._)("a",{class:"dropdown-item pointer",onClick:l=>ie(e)},"Edit",8,q)])):(0,t.kq)("",!0),0==e.status||1==e.status?((0,t.wg)(),(0,t.iD)("li",z,[(0,t._)("a",{class:"dropdown-item pointer",onClick:l=>re(e.pid)},"Cancel",8,C)])):(0,t.kq)("",!0)])])])])))),128))])]),(0,t._)("div",H,[(0,t._)("nav",L,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(oe.value.links,((e,l)=>((0,t.wg)(),(0,t.j4)(r.Z,{link:e,key:l,onNext:l=>de(e)},null,8,["link","onNext"])))),128))])])])])])])]),(0,t.Wm)(u.Z,{isOpen:ee.value,onSubmit:se,"modal-class":"modal-sm",title:"Request Leave",onModalClose:ae},{content:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t._)("form",M,[(0,t._)("div",U,[(0,t._)("div",Z,[(0,t._)("div",N,[j,(0,t.wy)((0,t._)("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>te.value.leave_pid=e),class:"form-control form-control-sm"},[R,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(me.value,((e,l)=>((0,t.wg)(),(0,t.iD)("option",{key:l,value:e.id},(0,n.zw)(e.text)+" - "+(0,n.zw)(e.days)+" days",9,S)))),128))],512),[[o.bM,te.value.leave_pid]]),a.value?.leave_pid?((0,t.wg)(),(0,t.iD)("p",T,(0,n.zw)(a.value?.leave_pid[0]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",V,[(0,t._)("div",F,[K,(0,t.wy)((0,t._)("input",{type:"date","onUpdate:modelValue":l[1]||(l[1]=e=>te.value.from=e),class:"form-control form-control-sm",placeholder:"e.g annual leave"},null,512),[[o.nr,te.value.from]]),a.value?.from?((0,t.wg)(),(0,t.iD)("p",O,(0,n.zw)(a.value?.from[0]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",Y,[(0,t._)("div",E,[B,(0,t.wy)((0,t._)("input",{type:"date","onUpdate:modelValue":l[2]||(l[2]=e=>te.value.to=e),class:"form-control form-control-sm",placeholder:"e.g 15 "},null,512),[[o.nr,te.value.to]]),a.value?.to?((0,t.wg)(),(0,t.iD)("p",I,(0,n.zw)(a.value?.to[0]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",P,[(0,t._)("div",W,[$,(0,t.wy)((0,t._)("textarea",{type:"text","onUpdate:modelValue":l[3]||(l[3]=e=>te.value.note=e),class:"form-control form-control-sm",placeholder:"e.g this leave only applies to senior devs"},null,512),[[o.nr,te.value.note]]),a.value?.note?((0,t.wg)(),(0,t.iD)("p",A,(0,n.zw)(a.value?.note[0]),1)):(0,t.kq)("",!0)])]),(0,t._)("div",G,[(0,t._)("div",J,[Q,(0,t._)("input",{type:"file",class:"form-control form-control-sm",onChange:ve,accept:"image/*",placeholder:"e.g 15 "},null,32),a.value?.image?((0,t.wg)(),(0,t.iD)("p",X,(0,n.zw)(a.value?.image[0]),1)):(0,t.kq)("",!0)])])])])])])),_:1},8,["isOpen"])]))}};const le=ee;var ae=le}}]);
//# sourceMappingURL=6335.48f199e1.js.map