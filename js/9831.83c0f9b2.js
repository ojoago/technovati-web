"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[9831],{9831:function(e,t,l){l.r(t),l.d(t,{default:function(){return B}});l(560);var a=l(3396),n=l(7139),s=l(9242),i=l(4870),o=l(2191),u=l(6204);const c={class:"container mt-2"},d={class:"row"},r={class:"col-md-7"},m={class:"card"},v=(0,a._)("div",{class:"card-header"},"Finished Products",-1),p={class:"card-body"},_=(0,a._)("option",{disabled:"",selected:""},"Select Store",-1),b=["value"],y=(0,a._)("input",{type:"text",class:"mt-1 form-control form-control-sm",placeholder:"search Item"},null,-1),g={class:"table-responsive"},h={class:"table-hover table-stripped table-bordered table"},w=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"SN"),(0,a._)("th",null,"Name"),(0,a._)("th",null,"Quantity"),(0,a._)("th",{align:"center"},[(0,a._)("i",{class:"bi bi-gear-fill"})])])],-1),f=["onClick"],q=(0,a._)("i",{class:"bi bi-plus"},null,-1),k=[q],D={class:"col-md-5"},C={class:"card"},x={class:"card-body"},z={class:"border rounded-3 p-2 m-1"},H=(0,a._)("legend",{class:"float-none w-auto px-2 h5"},"Request Items",-1),I={key:0,id:"itemForm"},U={class:"border rounded-3 p-2 m-1"},V={class:"form-label"},Z={class:"input-group"},S={class:"bg-light p-1"},F=["onChange","onUpdate:modelValue"],K=["onClick"],R=(0,a._)("i",{class:"bi bi-patch-minus"},null,-1),Y=[R],M={class:"row"},N={class:"col-md-12"},T=(0,a._)("label",{class:"form-label"},"Comment",-1),$={key:0,class:"text-danger"},P={class:"col-md-12"},Q=(0,a._)("label",{class:"form-label"},"Receiver",-1),W={key:0,class:"text-danger"};var j={__name:"InventoryItemRequestView",setup(e){const t=(0,i.iH)({}),l=(0,i.iH)({}),q=(0,i.iH)({}),R=(0,i.iH)({receiver:"",comment:"",store_pid:q,items:[]}),j=e=>{q.value=e.target.value,J(e.target.value)},A=e=>{var t=R.value.items.findIndex((t=>t.pid==e.pid));-1===t?R.value.items.push({pid:e.pid,quantity:1,qnt:e?.quantity,name:e.name}):R.value.items[t].quantity<e?.quantity?R.value.items[t].quantity++:o.Z.commit("notify",{message:`quantity remaining is : ${R.value.items[t].quantity}`,type:"warning"})},B=e=>{if(e.quantity>e.qnt){var t=R.value.items.findIndex((t=>t.pid==e.pid));R.value.items[t].quantity=e.qnt,o.Z.commit("notify",{message:`quantity remaining is : ${e.qnt}`,type:"warning"})}},E=e=>{R.value.items.splice(e,1)};function G(){t.value=[],o.Z.dispatch("postMethod",{url:"/request-items",param:R.value}).then((e=>{if(422==e?.status)t.value=e.data;else if(201==e?.status){let e=document.querySelector("#itemForm");R.value.items=[],e.reset(),J(q.value)}}))}function J(e){o.Z.dispatch("getMethod",{url:"/load-cr-out-items/"+e}).then((e=>{200==e?.status&&(l.value=e.data)}))}R.value.items&&O();const L=(0,i.iH)([]);function O(){o.Z.dispatch("loadDropdown","users").then((({data:e})=>{L.value=e}))}const X=(0,i.iH)([]);function ee(){o.Z.dispatch("loadDropdown","stores").then((({data:e})=>{X.value=e}))}return ee(),(e,o)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",c,[(0,a._)("div",d,[(0,a._)("div",r,[(0,a._)("div",m,[v,(0,a._)("div",p,[(0,a._)("select",{class:"form-control",onChange:o[0]||(o[0]=e=>j(e))},[_,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(X.value,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,n.zw)(e.text),9,b)))),128))],32),y,(0,a._)("div",g,[(0,a._)("table",h,[w,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.value?.data,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,n.zw)(t+1),1),(0,a._)("td",null,(0,n.zw)(e.name),1),(0,a._)("td",null,(0,n.zw)(e?.quantity)+" "+(0,n.zw)(e.unit),1),(0,a._)("td",null,[e?.quantity>0?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t=>A(e),type:"button",class:"btn btn-primary btn-sm"},k,8,f)):(0,a.kq)("",!0)])])))),128))])])])])])]),(0,a._)("div",D,[(0,a._)("div",C,[(0,a._)("div",x,[(0,a._)("fieldset",z,[H,R.value.items.length?((0,a.wg)(),(0,a.iD)("form",I,[(0,a._)("fieldset",U,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(R.value.items,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"col-md-12",key:t},[(0,a._)("label",V,(0,n.zw)(e.name),1),(0,a._)("div",Z,[(0,a._)("span",S,"#"+(0,n.zw)(e.qnt),1),(0,a.wy)((0,a._)("input",{type:"number",step:"0.1",onChange:t=>B(e),"onUpdate:modelValue":t=>e.quantity=t,class:"form-control",placeholder:"e.g 15"},null,40,F),[[s.nr,e.quantity]]),(0,a._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e=>E(t)},Y,8,K)])])))),128))]),(0,a._)("div",M,[(0,a._)("div",N,[T,(0,a.wy)((0,a._)("textarea",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>R.value.comment=e),class:"form-control form-control-sm",placeholder:"e.g UIU"},null,512),[[s.nr,R.value.comment]]),t.value?.comment?((0,a.wg)(),(0,a.iD)("p",$,(0,n.zw)(t.value?.comment[0]),1)):(0,a.kq)("",!0)]),(0,a._)("div",P,[Q,(0,a.Wm)((0,i.SU)(u.Z),{modelValue:R.value.receiver,"onUpdate:modelValue":o[2]||(o[2]=e=>R.value.receiver=e),options:L.value,settings:{width:"100%"}},null,8,["modelValue","options"]),t.value?.receiver?((0,a.wg)(),(0,a.iD)("p",W,(0,n.zw)(t.value?.receiver[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",{class:"float-end"},[(0,a._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:G},"Submit")])])):(0,a.kq)("",!0)])])])])])])]))}};const A=j;var B=A}}]);
//# sourceMappingURL=9831.83c0f9b2.js.map