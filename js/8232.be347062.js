"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[8232],{5658:function(l,e,t){function a(){function l(l,t="axios"){const a=[];if("axios"==t&&l)for(let s in l){if(-1!==s.indexOf(".")){let t=e(s);a[t]=l[s][0]}else a[s]=l[s][0];a[s]=l[s][0]}return a}function e(l){const e=l.split(".").filter((l=>l)),t=l.split(".").filter((l=>!isNaN(l)));return e[2]+t.map(Number)}return{transformValidationErrors:l}}t.d(e,{Z:function(){return a}})},8232:function(l,e,t){t.r(e),t.d(e,{default:function(){return el}});var a=t(3396),s=t(7139),o=t(9242),n=t(4870),i=t(2191),u=t(6204),d=t(6091),r=t(5658);const c={class:"container mt-2"},v={class:"card"},p={class:"card-body"},_=(0,a._)("div",{class:"card-header"},[(0,a._)("h3",null,"Approval Level")],-1),m={class:"row"},b={class:"col-md-4"},f={class:"border rounded-3 p-2 m-1"},h=(0,a._)("legend",{class:"float-none w-auto px-2"},"Levels",-1),w={class:"table-responsive"},g={class:"table-hover table-stripped table-bordered table"},k=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"title"),(0,a._)("th",null,"level"),(0,a._)("th",{width:"5%"},[(0,a._)("i",{class:"bi bi-gear-fill"})])])],-1),y={class:"dropdown"},C=(0,a._)("button",{type:"button",class:"btn btn-primary btn-sm dropdown-toggle","data-bs-toggle":"dropdown"},[(0,a._)("i",{class:"bi bi-tools"})],-1),x={class:"dropdown-menu"},H=["onClick"],Z=["onClick"],z={class:"col-md-8"},D={class:"border rounded-3 p-2 m-1"},A=(0,a._)("legend",{class:"float-none w-auto px-2"},"Assigend Level",-1),L={class:"table-responsive"},M={class:"table-hover table-stripped table-bordered table"},V=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Username"),(0,a._)("th",null,"Full name"),(0,a._)("th",null,"level"),(0,a._)("th",{width:"5%"},[(0,a._)("i",{class:"bi bi-gear-fill"})])])],-1),U=["onClick"],O={class:"row"},S={class:"col-md-12"},N={class:"form-group"},q=(0,a._)("label",{class:"form-label"},"Title",-1),E={key:0,class:"text-danger"},T={class:"col-md-12"},W={class:"form-group"},K=(0,a._)("label",{class:"form-label"},"Level",-1),Y=(0,a._)("option",{value:"",disabled:"",selected:""},"Select Level",-1),$=(0,a._)("option",{value:"2"},"02",-1),F=(0,a._)("option",{value:"3"},"03",-1),j=(0,a._)("option",{value:"4"},"04",-1),B=[Y,$,F,j],G={key:0,class:"text-danger"},I={class:"row"},J={class:"col-md-12"},P={class:"form-group"},Q=(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Staff "),(0,a._)("span",null,"*")],-1),R={key:0,class:"text-danger"};var X={__name:"ApprovalLevel",setup(l){const{transformValidationErrors:e}=(0,r.Z)(),t=(0,n.iH)(!1),Y=l=>{t.value=!0,el.value.level=l},$=()=>{t.value=!1,F.value=!1,ll()},F=(0,n.iH)(!1),j=(0,n.iH)({}),X=(0,n.iH)({title:"",level:""}),ll=()=>{X.value={title:"",level:""}},el=(0,n.iH)({level:"",user_pid:""});function tl(l){X.value={title:l.title,level:l.level,id:l.id},F.value=!0}const al=(0,n.iH)({});function sl(){al.value=[],i.Z.dispatch("postMethod",{url:"/create-approval-level",param:X.value}).then((l=>{422==l?.status?al.value=e(l.data):201==l?.status&&($(),ul())}))}const ol=(0,n.iH)({});function nl(){ol.value=[],i.Z.dispatch("postMethod",{url:"/assign-level",param:el.value}).then((l=>{422==l?.status?ol.value=l.data:201==l?.status&&($(),rl())}))}const il=l=>{i.Z.dispatch("putMethod",{url:"/revoke-level/"+l,prompt:"Are you sure, you want to revoke this right?"}).then((l=>{201==l?.status&&($(),rl())}))};function ul(l="/load-approval-levels"){i.Z.dispatch("getMethod",{url:l}).then((l=>{j.value=200==l?.status?l.data:{}}))}ul(),rl();const dl=(0,n.iH)({});function rl(l="/load-assign-levels"){i.Z.dispatch("getMethod",{url:l}).then((l=>{dl.value=200==l?.status?l.data:{}}))}const cl=(0,n.iH)([]);function vl(){i.Z.dispatch("loadDropdown","users").then((({data:l})=>{cl.value=l})).catch((l=>{console.log(l)}))}return vl(),(l,e)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",c,[(0,a._)("div",v,[(0,a._)("div",p,[_,(0,a._)("button",{class:"btn btn-sm btn-primary m-2",onClick:e[0]||(e[0]=l=>F.value=!0)},"Add New"),(0,a._)("div",m,[(0,a._)("div",b,[(0,a._)("fieldset",f,[h,(0,a._)("div",w,[(0,a._)("table",g,[k,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(j.value,((l,e)=>((0,a.wg)(),(0,a.iD)("tr",{key:e},[(0,a._)("td",null,(0,s.zw)(l.title),1),(0,a._)("td",null,(0,s.zw)(l.level),1),(0,a._)("td",null,[(0,a._)("div",y,[C,(0,a._)("ul",x,[(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer",onClick:e=>tl(l)},"Edit",8,H)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer",onClick:e=>Y(l.level)},"Assign",8,Z)])])])])])))),128))])])])])]),(0,a._)("div",z,[(0,a._)("fieldset",D,[A,(0,a._)("div",L,[(0,a._)("table",M,[V,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(dl.value,((l,e)=>((0,a.wg)(),(0,a.iD)("tr",{key:e},[(0,a._)("td",null,(0,s.zw)(l.username),1),(0,a._)("td",null,(0,s.zw)(`${l.lastname} ${l.firstname}`)+" "+(0,s.zw)(l.othername),1),(0,a._)("td",null,(0,s.zw)(l.level),1),(0,a._)("td",null,[(0,a._)("i",{class:"bi bi-trash pointer",title:"revoke level",onClick:e=>il(l.pid)},null,8,U)])])))),128))])])])])])])])])]),(0,a.Wm)(d.Z,{isOpen:F.value,"modal-class":"modal-xs",onSubmit:sl,title:"Create Approval Level",onModalClose:$},{content:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("form",null,[(0,a._)("div",O,[(0,a._)("div",S,[(0,a._)("div",N,[q,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>X.value.title=l),class:"form-control form-control-sm",placeholder:"e.g level 1"},null,512),[[o.nr,X.value.title]]),al.value?.title?((0,a.wg)(),(0,a.iD)("p",E,(0,s.zw)(al.value?.title),1)):(0,a.kq)("",!0)])]),(0,a._)("div",T,[(0,a._)("div",W,[K,(0,a.wy)((0,a._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":e[2]||(e[2]=l=>X.value.level=l)},B,512),[[o.bM,X.value.level]]),al.value?.level?((0,a.wg)(),(0,a.iD)("p",G,(0,s.zw)(al.value?.level),1)):(0,a.kq)("",!0)])])])])])])),_:1},8,["isOpen"]),(0,a.Wm)(d.Z,{isOpen:t.value,"modal-class":"modal-xs",onSubmit:nl,title:"Assign Level",onModalClose:$},{content:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("form",null,[(0,a._)("div",I,[(0,a._)("div",J,[(0,a._)("div",P,[Q,(0,a.Wm)((0,n.SU)(u.Z),{modelValue:el.value.user_pid,"onUpdate:modelValue":e[3]||(e[3]=l=>el.value.user_pid=l),options:cl.value,settings:{width:"100%"}},null,8,["modelValue","options"]),ol.value?.user_pid?((0,a.wg)(),(0,a.iD)("p",R,(0,s.zw)(ol.value?.user_pid[0]),1)):(0,a.kq)("",!0)])])])])])])),_:1},8,["isOpen"])]))}};const ll=X;var el=ll}}]);
//# sourceMappingURL=8232.be347062.js.map