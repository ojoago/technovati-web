{"version":3,"file":"js/2910.88df6740.js","mappings":"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","sources":["webpack://Technovati/./src/composables/formatError.js","webpack://Technovati/./src/components/forms/CustomRadio.vue","webpack://Technovati/./src/components/forms/CustomRadio.vue?8a34","webpack://Technovati/./src/views/accounts/journal/JournalEntryView.vue","webpack://Technovati/./src/views/accounts/journal/JournalEntryView.vue?8d2f"],"sourcesContent":["\r\nexport function formatError() {\r\n    function transformValidationErrors(response , handleType = 'axios'){\r\n        const errors = []\r\n        if(handleType == 'axios'){\r\n            if(response){\r\n                for (let key in response) {\r\n                    if(key.indexOf('.') !== -1){\r\n                        let k = trimKey(key);\r\n                        errors[k] = response[key][0]\r\n                    }else{\r\n                        errors[key] = response[key][0]\r\n                    }\r\n                    errors[key] = response[key][0]\r\n                }\r\n            }\r\n        }\r\n        return errors\r\n    }\r\n    \r\n    function trimKey(key){\r\n        const parts = key.split('.').filter(part => (part));\r\n        const part = key.split('.').filter(part => !isNaN(part));\r\n       \r\n        // const numericValues = parts.map(Number);\r\n        return parts[2]+part.map(Number);\r\n\r\n// console.log(numericValues);\r\n    }\r\n\r\n    return {\r\n        transformValidationErrors\r\n    }\r\n}","<template>\r\n    <div class=\"switch-field\">\r\n        <label>\r\n            <input @input=\"$emit('update:modelValue', $event.target.value)\" v-model=\"model\" type=\"radio\" :id=\"`radio${name}`\"\r\n                    :name=\"`switch${name}`\" :value=\"value1\"   />\r\n                    {{ label1 }}\r\n        </label>\r\n        <label >\r\n            <input @input=\"$emit('update:modelValue', $event.target.value)\" v-model=\"model\" type=\"radio\" :id=\"`radio${name}`\"\r\n                    :name=\"`switch${name}`\" :value=\"value2\"  />\r\n                    {{ label2 }}\r\n        </label>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps } from \"vue\";\r\n\r\ndefineProps({\r\n    name: {\r\n        type: String,\r\n        default: '1'\r\n    },\r\n    value1: {\r\n        type: String,\r\n        default: '1'\r\n    },\r\n    value2: {\r\n        type: String,\r\n        default: '0'\r\n    },\r\n    label1: {\r\n        type: String,\r\n        default: 'On'\r\n    },\r\n    \r\n    label2: {\r\n        type: String,\r\n        default: 'Off'\r\n    },\r\n    \r\n    checked: {\r\n        type: Number,\r\n        default: 1\r\n    },\r\n    selected:{\r\n        type: [Number,String]\r\n    }\r\n    \r\n\r\n    // readonly: {\r\n    //     type: Boolean,\r\n    //     default: false\r\n    // }\r\n\r\n});\r\nconst model = defineModel()\r\n\r\n</script>\r\n\r\n<style  scoped>\r\n\r\n* {margin: 0; box-sizing: border-box;}\r\nbody { font: 16px/1 sans-serif;}\r\n\r\n.switch-field {\r\n    display: flex;\r\n    /* margin-bottom: 36px; */\r\n    overflow: hidden;\r\n}\r\n\r\nlabel:has([type=radio]) {\r\n  /* display: inline-flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  border: 1px solid #aaa;\r\n  padding: .5rem;\r\n  border-radius: 3rem;\r\n  transition: background-color 0.3s; */\r\n\r\n  background-color: #e4e4e4;\r\n    color: rgba(0, 0, 0, 0.6);\r\n    font-size: 14px;\r\n    line-height: 1;\r\n    text-align: center;\r\n    padding: 8px 16px;\r\n    margin-right: -1px;\r\n    border: 1px solid rgba(0, 0, 0, 0.2);\r\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.1);\r\n    transition: all 0.1s ease-in-out;\r\n}\r\n\r\nlabel:has([type=radio]:not(:disabled)) {\r\n  cursor: pointer;\r\n}\r\n\r\n[type=radio] {\r\n  appearance: none;\r\n  width: .2rem;\r\n  height: .2rem;\r\n  flex: 0 0 auto;\r\n  border: inherit;\r\n  border-radius: inherit;\r\n}\r\n\r\nlabel:has([type=radio]:checked) {\r\n  border-color: #14bf8b;\r\n  background-color: #14bf8b;\r\n  color: #fff;\r\n}\r\n\r\n[type=radio]:checked {\r\n  border-color: transparent;\r\n    background-color: #a5dc86;\r\n\r\n}\r\n</style>","import script from \"./CustomRadio.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CustomRadio.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CustomRadio.vue?vue&type=style&index=0&id=89c25f14&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-89c25f14\"]])\n\nexport default __exports__","<template>\r\n    <div>\r\n        <div class=\"container mt-2\">\r\n\r\n            <div class=\"card\">\r\n                <div class=\"card-header\">\r\n                    <h3>Add Journal</h3>\r\n                </div>\r\n                <div class=\"card-body\"> \r\n                    <form>\r\n                        <fieldset class=\"border rounded-3 p-1 m-1\">\r\n                            <legend class=\"float-none w-auto px-2  small\">Entries</legend>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-3\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label small\">Date</label>\r\n                                        <input v-model=\"journal.date\" type=\"date\" class=\"form-control form-control-sm\"\r\n                                            placeholder=\"e.g 2000000\">\r\n                                        <p class=\"text-danger \" v-if=\"errors?.date\">{{ errors?.date }} </p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-md-9\">\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label small\">Comment</label>\r\n                                        <input v-model=\"journal.comments\" type=\"text\"\r\n                                            class=\"form-control form-control-sm\"\r\n                                            placeholder=\"e.g all entries for today\">\r\n                                        <p class=\"text-danger \" v-if=\"errors?.comments\">{{ errors?.comments }} </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                           \r\n                            <template v-for=\"(entry, i) in journal.entries\" :key=\"i\">\r\n                              \r\n                                <div class=\"row\">\r\n                                    <div class=\"col-md-5\">\r\n                                        <div class=\"form-group\">\r\n                                            <label class=\"form-label small\">Account</label>\r\n                                            <Select2 v-model=\"entry.account\" :options=\"accountDrop\"\r\n                                                :settings=\"{ width: '100%' }\" placeholder=\"Select Account\" />\r\n                                            <p class=\"text-danger \" v-if=\"errors[`account${i}`]\">{{ errors[`account${i}`] }} </p> \r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"col-md-4\">\r\n                                        <div class=\"form-group\">\r\n                                            <label class=\"form-label small\">Amount</label>\r\n                                            <input v-model=\"entry.amount\" step=\"0.5\" type=\"number\"\r\n                                                class=\"form-control form-control-sm\" placeholder=\"e.g 2000000\">\r\n                                            <p class=\"text-danger \" v-if=\"errors[`amount${i}`]\">{{ errors[`amount${i}`] }} </p> \r\n                                        </div>\r\n                                    </div>\r\n\r\n                                   <!--- <div class=\"col-md-3\">\r\n                                        <div class=\"form-group\">\r\n                                            <label class=\"form-label small\">Type </label>\r\n                                            <div class=\"input-group\">\r\n                                                <RadioButton v-model=\"entry.type\" value1=\"cr\" label1=\"Credit\"\r\n                                                    value2=\"dr\" label2=\"Debit\" :name=\"`${i}`\" :checked=\"entry.check\"/>\r\n                                                <i class=\"mx-1\">|</i> <button type=\"button\"\r\n                                                    class=\"btn btn-danger btn-sm\" @click=\"removeKey(i)\"> <i\r\n                                                        class=\"bi bi-file-minus-fill\"></i>\r\n                                                </button>\r\n                                            </div>\r\n\r\n                                        </div>\r\n\r\n                                    </div> -->\r\n\r\n                                    <div class=\"col-md-3\">\r\n                                        <div class=\"form-group\">\r\n                                            <label class=\"form-label small\">Type </label>\r\n                                            <div class=\"input-group\">\r\n                                                <CustomRadio v-model=\"entry.type\" value1=\"cr\" label1=\"Credit\"\r\n                                                    value2=\"dr\" label2=\"Debit\" :name=\"`${i}`\" :checked=\"entry.check\"/>\r\n                                                <i class=\"mx-1\">|</i> <button type=\"button\"\r\n                                                    class=\"btn btn-danger btn-sm\" @click=\"removeKey(i)\"> <i\r\n                                                        class=\"bi bi-file-minus-fill\"></i>\r\n                                                </button>\r\n                                            </div>\r\n\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                </div>\r\n                            </template>\r\n                        </fieldset>\r\n\r\n                        <button @click=\"addItem(item)\" type=\"button\" class=\"btn btn-primary btn-sm\">\r\n                            <i class=\"bi bi-plus\"></i>\r\n                        </button>\r\n                        <hr>\r\n                        <button @click=\"addJournal\" type=\"button\" class=\"btn btn-primary btn-sm\">\r\n                            Submit\r\n                        </button>\r\n\r\n\r\n                    </form>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport store from \"@/store\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport Select2 from 'vue3-select2-component';\r\n// import RadioButton from '@/components/forms/RadioButton.vue';\r\nimport CustomRadio from '@/components/forms/CustomRadio.vue';\r\nimport { formatError } from \"@/composables/formatError\";\r\nconst {transformValidationErrors} = formatError()\r\n\r\nconst journal = ref({\r\n    date : '',\r\n    comments : '' ,\r\n    entries:[\r\n        {\r\n            account : '', \r\n            amount: '', \r\n            type : 'cr',\r\n            check:1,\r\n        }\r\n    ]\r\n})\r\nconst resetAttr = () => {\r\n    journal.value = {\r\n        date : '',\r\n    comments : '' ,\r\n    entries:[\r\n        {\r\n            account : '', \r\n            amount: '', \r\n            type : 'cr',\r\n            check:1,\r\n        }\r\n    ]\r\n    }\r\n}\r\n\r\n// const editAccount = (data) => {\r\n//     journal.value = {\r\n//         type_pid: data.type_pid,\r\n//         account_name: data.account_name,\r\n//         opening_balance: data.opening_balance,\r\n//         opening_balance_type: data.opening_balance_type,\r\n//         opening_date: data.opening_date,\r\n//         note: data.note,\r\n//         status: data.status,\r\n//         pid: data.pid,\r\n//         edit: true,\r\n//     }\r\n//     toggleModal.value = true\r\n//     addJournal()\r\n// }\r\n\r\n// const reduceArray = (event) => {\r\n//     let x = accountDrop.value.filter(obj => obj.id !== event.target.value);\r\n//    console.log(x);\r\n//     // accountDrop.value = x\r\n// }\r\n\r\nlet iteration = 1;\r\n\r\nconst addItem = () => {\r\n    iteration++\r\n    journal.value.entries.push({\r\n        account: '',\r\n        amount: '',\r\n        type: checkEvenOdd(iteration) , \r\n        check: checkEvenOdd(iteration) == 'cr' ? 1 : 0 , \r\n    })\r\n}\r\n\r\nfunction checkEvenOdd(number) {\r\n    if (number % 2 === 0) {\r\n        return 'dr';\r\n    } else {\r\n        return 'cr';\r\n    }\r\n}\r\n\r\nconst removeKey = (i) => {\r\n    \r\n    journal.value.entries.splice(i, 1);\r\n}\r\n\r\n\r\nconst errors = ref({});\r\n\r\nfunction addJournal() {\r\n    errors.value = []\r\n    store.dispatch('postMethod', { url: '/add-journal', param: journal.value }).then((data) => {\r\n        if (data?.status == 422) {\r\n            errors.value = transformValidationErrors(data.data)\r\n        } else if (data?.status == 201) {\r\n            localStorage.setItem('TVATI_EDIT_JVC', JSON.stringify({}, null, 2))\r\n            resetAttr()\r\n        }\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\n\r\n\r\nconst accountDrop = ref({});\r\nfunction dropDownAccount() {\r\n    store.dispatch('loadDropdown', 'accounts').then(({ data }) => {\r\n        accountDrop.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\ndropDownAccount()\r\n\r\n\r\n\r\nonMounted(() => {\r\n      let tsk = localStorage.getItem('TVATI_EDIT_JVC') ? JSON.parse(localStorage.getItem('TVATI_EDIT_JVC')) : 'null'\r\n         if (tsk != 'null') {\r\n            journal.value = tsk;\r\n            let entries = []\r\n            tsk.entries.forEach(el => {\r\n                console.log(el);\r\n                entries.push({\r\n                    account: el.credit_account == \" \" ? el.debit_account : el.credit_account ,\r\n                    amount: el.credit_account == \" \" ? el.debit_amount : el.credit_amount ,\r\n                    type: el.credit_account == \" \" ? 'dr' : 'cr' ,\r\n                    check:1,\r\n                    id:el.id,\r\n                })\r\n                \r\n            });\r\n            journal.value.entries = entries\r\n    // entries:[\r\n    //     {\r\n    //         account : '', \r\n    //         amount: '', \r\n    //         type : 'cr',\r\n    //         check:1,\r\n    //     }\r\n    // ]\r\n         }\r\n   \r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./JournalEntryView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./JournalEntryView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["formatError","transformValidationErrors","response","handleType","errors","key","indexOf","k","trimKey","parts","split","filter","part","isNaN","map","Number","model","_useModel","__props","__exports__","journal","ref","date","comments","entries","account","amount","type","check","resetAttr","value","iteration","addItem","push","checkEvenOdd","number","removeKey","i","splice","addJournal","store","dispatch","url","param","then","data","status","localStorage","setItem","JSON","stringify","catch","e","console","log","accountDrop","dropDownAccount","onMounted","tsk","getItem","parse","forEach","el","credit_account","debit_account","debit_amount","credit_amount","id"],"sourceRoot":""}