"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[5954],{1187:function(e,t,l){l.d(t,{Z:function(){return i}});var a=l(3396);const n=["disabled","innerHTML"];var s={__name:"PaginationLinks",props:{link:Object},emits:["next"],setup(e){return(t,l)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("li",{class:"page-item",onClick:l[0]||(l[0]=l=>t.$emit("next",e.link))},[(0,a._)("span",{class:"page-link pointer",href:"#",disabled:!e.link.url,innerHTML:e.link.label},null,8,n)])]))}};const o=s;var i=o},5954:function(e,t,l){l.r(t),l.d(t,{default:function(){return Ye}});l(560);var a=l(3396),n=l(7139),s=l(9242),o=l(4870),i=l(6091),d=l(1187),r=l(2191),u=l(6204);const c={class:"row"},p={class:"col-md-12"},_={class:"form-group"},v=(0,a._)("label",{class:"form-label"},[(0,a.Uk)("Department "),(0,a._)("span",{class:"text-danger"},"*")],-1),m=(0,a._)("option",{value:"",selected:""},"Select Department",-1),f=["value"],b={key:0,class:"text-danger"},g={class:"col-md-12"},w={class:"form-group"},h=(0,a._)("label",{class:"form-label"},"Sub Department ",-1),k={key:0,class:"text-danger"};var y={__name:"AssignDepartmentForm",props:{user_pid:String},setup(e){const t=e,l=(0,o.iH)({user_pid:t.user_pid,sub_department:"",department_pid:""}),i=(0,o.iH)({});function d(){i.value=[],r.Z.dispatch("postMethod",{url:"/assign-department",param:l.value}).then((e=>{422==e?.status&&(i.value=e.data)}))}const y=(0,o.iH)([]);function D(){r.Z.dispatch("loadDropdown","departments").then((({data:e})=>{y.value=e})).catch((e=>{console.log(e)}))}D();const S=(0,o.iH)([]);function x(e){r.Z.dispatch("loadDropdown","sub-departments/"+e.target.value).then((({data:e})=>{S.value=e})).catch((e=>{console.log(e)}))}return(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("form",null,[(0,a._)("div",c,[(0,a._)("div",p,[(0,a._)("div",_,[v,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.value.department_pid=e),class:"form-control form-control-sm",onChange:t[1]||(t[1]=e=>x(e))},[m,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.value,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,n.zw)(e.text),9,f)))),128))],544),[[s.bM,l.value.department_pid]]),i.value?.department_pid?((0,a.wg)(),(0,a.iD)("p",b,(0,n.zw)(i.value?.department_pid[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",g,[(0,a._)("div",w,[h,(0,a.Wm)((0,o.SU)(u.Z),{modelValue:l.value.sub_department,"onUpdate:modelValue":t[2]||(t[2]=e=>l.value.sub_department=e),options:S.value,settings:{width:"100%"}},null,8,["modelValue","options"]),i.value?.sub_department?((0,a.wg)(),(0,a.iD)("p",k,(0,n.zw)(i.value?.sub_department[0]),1)):(0,a.kq)("",!0)])])]),(0,a._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:d},"Submit")])]))}};const D=y;var S=D,x=l(2483);const C={class:"container-fluid mt-2"},H={class:"card"},z={class:"card-body"},Z=(0,a._)("h5",{class:"card-title"},"Staff List ",-1),M=(0,a._)("ul",{class:"nav nav-tabs d-flex",id:"myTabjustified",role:"tablist"},[(0,a._)("li",{class:"nav-item flex-fill",role:"presentation"},[(0,a._)("button",{class:"nav-link w-100 active",id:"personal-tab","data-bs-toggle":"tab","data-bs-target":"#personal",type:"button",role:"tab","aria-controls":"personal","aria-selected":"true"},"Active Staff")]),(0,a._)("li",{class:"nav-item flex-fill",role:"presentation"},[(0,a._)("button",{class:"nav-link w-100",id:"next-tab","data-bs-toggle":"tab","data-bs-target":"#next",type:"button",role:"tab","aria-controls":"next","aria-selected":"false"},"Disabled")])],-1),A={class:"tab-content pt-2",id:"myTabjustifiedContent"},T={class:"tab-pane fade show active",id:"personal",role:"tabpanel","aria-labelledby":"personal-tab"},U={class:"border rounded-3 p-2 m-1"},V=(0,a._)("legend",{class:"float-none w-auto px-2"},"Active Staff",-1),O={class:"table-responsive"},N={class:"table table-bordered table-stripped table-hover"},I=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{width:"5%"},"S/N"),(0,a._)("th",null,"fullname"),(0,a._)("th",null,"username"),(0,a._)("th",null,"Email"),(0,a._)("th",null,"GSM"),(0,a._)("th",null,"Department"),(0,a._)("th",null,"Staff Id"),(0,a._)("th",null,[(0,a._)("i",{class:"bi bi-gear"})])])],-1),j={key:0},q={class:"dropdown"},Y=(0,a._)("button",{type:"button",class:"btn btn-primary btn-sm dropdown-toggle","data-bs-toggle":"dropdown"},[(0,a._)("i",{class:"bi bi-tools"})],-1),K={class:"dropdown-menu dropdown-menu-start"},F=["onClick"],L=["onClick"],$=["onClick"],E=["onClick"],R=["onClick"],W=["onClick"],G=["onClick"],J={key:1,class:"text-center",style:{width:"100%"},width:"100%"},B=(0,a._)("tr",null,[(0,a._)("td",{colspan:"8"},"No Record Yet")],-1),P=[B],Q={class:"flex justify-center mt-4"},X={class:"relative justify-center rounded-md shadow pagination"},ee={class:"tab-pane fade",id:"next",role:"tabpanel","aria-labelledby":"next-tab"},te={class:"border rounded-3 p-2 m-1"},le=(0,a._)("legend",{class:"float-none w-auto px-2"},"Disabled Staff",-1),ae={class:"table-responsive"},ne={class:"table table-bordered table-stripped table-hover"},se=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{width:"5%"},"S/N"),(0,a._)("th",null,"fullname"),(0,a._)("th",null,"username"),(0,a._)("th",null,"Email"),(0,a._)("th",null,"GSM"),(0,a._)("th",null,"Department"),(0,a._)("th",null,"Staff Id"),(0,a._)("th",null,[(0,a._)("i",{class:"bi bi-gear"})])])],-1),oe={class:"dropdown"},ie=(0,a._)("button",{type:"button",class:"btn btn-primary btn-sm dropdown-toggle","data-bs-toggle":"dropdown"},[(0,a._)("i",{class:"bi bi-tools"})],-1),de={class:"dropdown-menu"},re=["onClick"],ue=["onClick"],ce={class:"flex justify-center mt-4"},pe={class:"relative justify-center rounded-md shadow pagination"},_e=(0,a._)("div",null,null,-1),ve={id:"rForm"},me={class:"row"},fe={class:"form-check form-switch"},be=["value"],ge={class:"form-check-label",for:"flexSwitchCheckDefault"},we={id:"rForm"},he={class:"row"},ke={class:"row"},ye={class:"col-md-12"},De={class:"form-group"},Se=(0,a._)("label",{class:"form-label"},"Salary Structure",-1),xe=(0,a._)("option",{value:"",selected:""},"Make Selection",-1),Ce=["value"],He={key:0,class:"text-danger"},ze={class:"col-md-12"},Ze={class:"form-group"},Me=(0,a._)("label",{class:"form-label"},"Salary Grade",-1),Ae=(0,a._)("option",{value:"",selected:""},"Make Selection",-1),Te=["value"],Ue={key:0,class:"text-danger"},Ve={class:"col-md-12"},Oe={class:"form-group"},Ne=(0,a._)("label",{class:"form-label"},"Salary Step",-1),Ie={key:0,class:"text-danger"};var je={__name:"StaffList",setup(e){const t=(0,x.tv)();let l={};function c(e){e.url&&!e.active&&v(e.url)}function p(e){e.url&&!e.active&&B(e.url)}t.push({query:l});const _=(0,o.iH)({});function v(e="/load-staff/1"){r.Z.dispatch("getMethod",{url:e}).then((e=>{_.value=e.data}))}v();const m=(0,o.iH)(null),f=(0,o.iH)(!1),b=e=>{m.value=e,f.value=!0},g=()=>{f.value=!1,Ee.value=!1,Ye.value=!1,Ge.value.roles=[],qe.value=[]};function w(e){localStorage.setItem("TVATI_STAFF_DETAIL",JSON.stringify(e,null,2)),t.push({path:"staff-detail",query:{staff:e.pid}})}function h(e){l={action:"edit",tab:"personal-tab",id:e?.user_pid};let a={staff:e,action:"edit"};localStorage.setItem("TVATI_ONBOARD_TAB",JSON.stringify(l,null,2)),localStorage.setItem("TVATI_EDIT_STAFF",JSON.stringify(a,null,2)),t.push({path:"onboarding",query:{staff:e.pid}})}const k=e=>{r.Z.dispatch("deleteMethod",{url:"/disable-staff/"+e}).then((e=>{201==e?.status&&v()}))},y=e=>{r.Z.dispatch("getMethod",{url:"/re-activate-staff/"+e}).then((e=>{200==e?.status&&B()}))};(0,a.bv)((()=>{const e=document.querySelector("#next-tab");e.addEventListener("click",(()=>{B()}))}));const D=(0,o.iH)({});function B(e="/load-staff/0"){r.Z.dispatch("getMethod",{url:e}).then((e=>{200==e?.status&&(D.value=e.data)}))}const je=e=>{confirm("Are you sure, you want to send a reset link to him/her")&&r.Z.dispatch("getMethod",{url:"/send-reset-password-link/"+e})},qe=(0,o.iH)([]),Ye=(0,o.iH)(!1),Ke=(0,o.iH)(),Fe=(e,t)=>{Ke.value=t,Ye.value=!0,qe.value=[],Ge.value.id=e,r.Z.dispatch("getMethod",{url:"/load-staff-roles/"+e}).then((e=>{200==e?.status&&qe.value.push(...e.data)}))},Le=(0,o.iH)({structure_pid:"",grade_pid:"",step:"",user_pid:""}),$e=()=>{Le.value={structure_pid:"",grade_pid:"",step:"",user_pid:""}},Ee=(0,o.iH)(!1),Re=e=>{Ee.value=!0,Le.value.user_pid=e,r.Z.dispatch("getMethod",{url:"load-staff-basic-salary/"+e}).then((e=>{200==e?.status&&(Le.value=e.data)}))},We=()=>{r.Z.dispatch("putMethod",{url:"/update-staff-grade-step",param:Le.value,prompt:"Are you sure, you want to update the staff Step?"}).then((e=>{201==e?.status&&($e(),Ee.value=!1)}))},Ge=(0,o.iH)({id:"",roles:[]}),Je=()=>{Ge.value.roles=qe.value,r.Z.dispatch("putMethod",{url:"/update-staff-role",param:Ge.value,prompt:"Are you sure, you want to update the staff role?"}).then((e=>{201==e?.status&&(qe.value=[],Ye.value=!1,Ge.value.roles=[],qe.value=[])}))},Be=(0,o.iH)([]);function Pe(){r.Z.dispatch("loadDropdown","roles").then((({data:e})=>{Be.value=e})).catch((e=>{console.log(e)}))}Pe();const Qe=(0,o.iH)({}),Xe=(0,o.iH)({});function et(e){lt(e.target.value)}const tt=e=>{at(e.target.value)};function lt(e){r.Z.dispatch("loadDropdown","grade-step/"+e).then((({data:e})=>{Xe.value=e})).catch((e=>{console.log(e)}))}function at(e){r.Z.dispatch("loadDropdown","salary-grade/"+e).then((({data:e})=>{Qe.value=e})).catch((e=>{console.log(e)}))}const nt=(0,o.iH)({});function st(){r.Z.dispatch("loadDropdown","salary-structure").then((({data:e})=>{nt.value=e})).catch((e=>{console.log(e)}))}return st(),(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",C,[(0,a._)("div",H,[(0,a._)("div",z,[Z,M,(0,a._)("div",A,[(0,a._)("div",T,[(0,a._)("fieldset",U,[V,(0,a._)("div",O,[(0,a._)("table",N,[I,_.value.data?((0,a.wg)(),(0,a.iD)("tbody",j,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.value.data,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,n.zw)(t+1),1),(0,a._)("td",null,(0,n.zw)(`${e.lastname} ${e.firstname}`)+" "+(0,n.zw)(e.othername),1),(0,a._)("td",null,(0,n.zw)(e.username),1),(0,a._)("td",null,(0,n.zw)(e.email),1),(0,a._)("td",null,(0,n.zw)(e.gsm),1),(0,a._)("td",null,(0,n.zw)(e.department),1),(0,a._)("td",null,(0,n.zw)(e.staff_id),1),(0,a._)("td",null,[(0,a._)("div",q,[Y,(0,a._)("ul",K,[(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-info",onClick:t=>w(e)},"Detail",8,F)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer",onClick:t=>Fe(e.id,e.username)},"Update Roles",8,L)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-success",onClick:t=>Re(e.pid)},"Update Salary Step",8,$)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-warning",onClick:t=>h(e)},"Edit",8,E)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-primary text-white",onClick:t=>b(e.pid)},"Assign Dept",8,R)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-warning",onClick:t=>je(e.pid)},"Reset Password",8,W)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-danger",onClick:t=>k(e.pid)},"Disable Account",8,G)])])])])])))),128))])):((0,a.wg)(),(0,a.iD)("tfoot",J,P))]),(0,a._)("div",Q,[(0,a._)("nav",X,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.value.links,((e,t)=>((0,a.wg)(),(0,a.j4)(d.Z,{link:e,key:t,onNext:t=>c(t,e)},null,8,["link","onNext"])))),128))])])])])]),(0,a._)("div",ee,[(0,a._)("fieldset",te,[le,(0,a._)("div",ae,[(0,a._)("table",ne,[se,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(D.value.data,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,n.zw)(t+1),1),(0,a._)("td",null,(0,n.zw)(`${e.lastname} ${e.firstname} ${e.othername}`),1),(0,a._)("td",null,(0,n.zw)(e.username),1),(0,a._)("td",null,(0,n.zw)(e.email),1),(0,a._)("td",null,(0,n.zw)(e.gsm),1),(0,a._)("td",null,(0,n.zw)(e.department),1),(0,a._)("td",null,(0,n.zw)(e.staff_id),1),(0,a._)("td",null,[(0,a._)("div",oe,[ie,(0,a._)("ul",de,[(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-info",onClick:t=>w(e)},"Detail",8,re)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item pointer bg-success",onClick:t=>y(e.pid)},"Reactivate",8,ue)])])])])])))),128))])]),(0,a._)("div",ce,[(0,a._)("nav",pe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(D.value.links,((e,t)=>((0,a.wg)(),(0,a.j4)(d.Z,{link:e,key:t,onNext:t=>p(e)},null,8,["link","onNext"])))),128))])])])])])])])])]),(0,a.Wm)(i.Z,{isOpen:f.value,"modal-class":"modal-xs",title:"Assign Department",onModalClose:g},{content:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(S,{user_pid:m.value},null,8,["user_pid"])])])),footer:(0,a.w5)((()=>[_e])),_:1},8,["isOpen"]),(0,a.Wm)(i.Z,{isOpen:Ye.value,"modal-class":"modal-sm",onSubmit:Je,title:`Update ${Ke.value}'s  Roles`,onModalClose:g},{content:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("form",ve,[(0,a._)("div",me,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Be.value,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"col-6"},[(0,a._)("div",fe,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>qe.value=e),class:"form-check-input",type:"checkbox",value:e.id},null,8,be),[[s.e8,qe.value]]),(0,a._)("label",ge,(0,n.zw)(e.id.replace("_"," ")),1)])])))),128))])])])])),_:1},8,["isOpen","title"]),(0,a.Wm)(i.Z,{isOpen:Ee.value,"modal-class":"modal-sm",onSubmit:We,title:"Update Grade Step",onModalClose:g},{content:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("form",we,[(0,a._)("div",he,[(0,a._)("form",null,[(0,a._)("div",ke,[(0,a._)("div",ye,[(0,a._)("div",De,[Se,(0,a.wy)((0,a._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[1]||(t[1]=e=>Le.value.structure_pid=e),onChange:t[2]||(t[2]=e=>tt(e))},[xe,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(nt.value,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,n.zw)(e.text),9,Ce)))),128))],544),[[s.bM,Le.value.structure_pid]]),e.errors?.structure_pid?((0,a.wg)(),(0,a.iD)("p",He,(0,n.zw)(e.errors?.structure_pid[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",ze,[(0,a._)("div",Ze,[Me,(0,a.wy)((0,a._)("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[3]||(t[3]=e=>Le.value.grade_pid=e),onChange:t[4]||(t[4]=e=>et(e))},[Ae,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Qe.value,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,n.zw)(e.text),9,Te)))),128))],544),[[s.bM,Le.value.grade_pid]]),e.errors?.grade_pid?((0,a.wg)(),(0,a.iD)("p",Ue,(0,n.zw)(e.errors?.grade_pid[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",Ve,[(0,a._)("div",Oe,[Ne,(0,a.Wm)((0,o.SU)(u.Z),{modelValue:Le.value.step,"onUpdate:modelValue":t[5]||(t[5]=e=>Le.value.step=e),options:Xe.value,id:"pid",settings:{width:"100%"}},null,8,["modelValue","options"]),e.errors?.step?((0,a.wg)(),(0,a.iD)("p",Ie,(0,n.zw)(e.errors?.step[0]),1)):(0,a.kq)("",!0)])])])])])])])])),_:1},8,["isOpen"])]))}};const qe=je;var Ye=qe}}]);
//# sourceMappingURL=5954.0ceafc60.js.map