"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[1394],{9895:function(e,t,l){l.d(t,{Z:function(){return V}});var a=l(3396),s=l(7139);const n=e=>((0,a.dD)("data-v-29ba58ae"),e=e(),(0,a.Cn)(),e),d={class:"card"},u={class:"card-body"},r={class:"details"},o={class:"card card-item"},p={class:"card-header"},i={class:"badge bg-info p-1 m-1"},c={class:"small"},_={class:"card-body"},v={class:"card-title"},b=n((()=>(0,a._)("br",null,null,-1))),m={class:"badge bg-dark p-1 m-1"},h=n((()=>(0,a._)("i",{class:"bi bi-person"},null,-1))),w={class:"card card-item"},g={class:"card-header"},y={class:"card-body"},k=n((()=>(0,a._)("hr",null,null,-1))),z={class:"card card-item"},D=n((()=>(0,a._)("div",{class:"card-header"}," Purpose ",-1))),f={class:"card-body"},x={class:"badge-bg-dark p-1 m-1"};var A={__name:"RequestDetailComponent",props:{data:Object},setup(e){return(t,l)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",d,[(0,a._)("div",u,[(0,a._)("div",r,[(0,a._)("div",o,[(0,a._)("div",p,[(0,a._)("span",i,[(0,a._)("small",c,"From "+(0,s.zw)(e.data.start)+" to "+(0,s.zw)(e.data.to),1)])]),(0,a._)("div",_,[(0,a._)("h5",v,(0,s.zw)(e.data.title),1),(0,a._)("small",null,"Status: "+(0,s.zw)(e.data?.request_status),1),(0,a.Uk)(),b,(0,a._)("span",m,[h,(0,a.Uk)(" "+(0,s.zw)(e.data?.user?.username),1)])])]),(0,a._)("div",w,[(0,a._)("div",g,[(0,a._)("p",null,"Department "+(0,s.zw)(e.data?.department?.department),1)]),(0,a._)("div",y,[(0,a._)("p",null," Mode of Transporation: "+(0,s.zw)(e.data.mode),1),(0,a._)("p",null," Destination: "+(0,s.zw)(e.data.destination),1),(0,a.Uk)(" Crew "),k,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.data.crew,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.pid,class:"badge bg-dark p-1 m-1"},(0,s.zw)(e.text),1)))),128))])]),(0,a._)("div",z,[D,(0,a._)("div",f,[(0,a._)("span",x,(0,s.zw)(e.data.itinerary),1)])])])])])]))}},U=l(89);const T=(0,U.Z)(A,[["__scopeId","data-v-29ba58ae"]]);var V=T},1394:function(e,t,l){l.r(t),l.d(t,{default:function(){return M}});var a=l(3396),s=l(7139),n=l(9242),d=l(4870),u=l(2191),r=l(9895);const o={class:"container my-2"},p={class:"card"},i={class:"card-body"},c=(0,a._)("hr",null,null,-1),_={class:"row"},v={class:"col-md-6"},b=(0,a._)("label",{for:"",class:"h4"},"Budgets",-1),m={class:"table-responsive"},h={class:"table table-hover table-stripped table-bordered"},w=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{width:"5%"},"S/N"),(0,a._)("th",null,"Item"),(0,a._)("th",null,"Amount"),(0,a._)("th",null,"Approved Amount"),(0,a._)("th",null,"Status"),(0,a._)("th",null," Approve? ")])],-1),g=["onUpdate:modelValue"],y={class:"input-group"},k=["name","onUpdate:modelValue"],z=(0,a._)("label",{for:"yes"},"Yes",-1),D=(0,a._)("i",{class:"m-2"},null,-1),f=["name","onUpdate:modelValue"],x=(0,a._)("label",{for:"no"},"No",-1),A=(0,a._)("td",{colspan:"5"},null,-1),U={class:"col-md-6"},T=(0,a._)("label",{for:"",class:"h4"},"Expenses",-1),V={class:"table-responsive"},S={class:"table table-hover table-stripped table-bordered"},C=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{width:"5%"},"S/N"),(0,a._)("th",null,"Item"),(0,a._)("th",null,"Amount"),(0,a._)("th",null,"Status"),(0,a._)("th",null,[(0,a._)("i",{class:"bi bi-gear-fill"})])])],-1),I=["value"],H={key:0},R=(0,a._)("td",{colspan:"3"},null,-1);var Z={__name:"TravelRequestDetailHrView",setup(e){const t=(0,d.iH)({}),l=["Pending","Approved","Rejected","Cancel"],Z=(0,d.iH)({}),q=(0,d.iH)({});(0,a.bv)((()=>{let e=localStorage.getItem("TVATI_TRV_RQS_DETAIL")?JSON.parse(localStorage.getItem("TVATI_TRV_RQS_DETAIL")):"null";"null"!=e&&(Z.value=e.expenses,q.value=e.budgets),t.value=e}));const M=()=>{u.Z.dispatch("putMethod",{url:"/approve-travel-request-budget/",prompt:"Are you sure you want to approve the selected budget(s)?",param:q.value}).then((e=>{201==e?.status&&j()}))},j=()=>{u.Z.dispatch("getMethod",{url:"/load-travel-request-budgets/"+t.value.pid}).then((e=>{200==e?.status&&(q.value=e.data)}))},N=(0,d.iH)({travel_pid:t.value.pid,expenses:[]}),Y=()=>{N.value.travel_pid=t.value.pid,u.Z.dispatch("putMethod",{url:"/approve-travel-expense",prompt:"Are you sure you want to approve the selected expense(s)?",param:N.value}).then((e=>{201==e?.status&&(N.value.expenses=[],K())}))},E=()=>{N.value.travel_pid=t.value.pid,u.Z.dispatch("putMethod",{url:"/reject-travel-expense",prompt:"Are you sure you want to reject the selected expense(s)?",param:N.value}).then((e=>{201==e?.status&&(N.value.expenses=[],K())}))},K=()=>{u.Z.dispatch("getMethod",{url:"/load-travel-expense/"+t.value.pid}).then((e=>{200==e?.status&&(Z.value=e.data)}))};return(e,d)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",o,[(0,a._)("div",p,[(0,a._)("div",i,[(0,a.Wm)(r.Z,{data:t.value},null,8,["data"]),c,(0,a._)("div",_,[(0,a._)("div",v,[b,(0,a.Uk)(" "+(0,s.zw)(e.budget_status)+" ",1),(0,a._)("div",m,[(0,a._)("table",h,[w,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(q.value,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,s.zw)(t+1),1),(0,a._)("td",null,(0,s.zw)(e.budget),1),(0,a._)("td",null,(0,s.zw)(e.amount),1),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"number",step:".5","onUpdate:modelValue":t=>e.approved=t,class:"form-control form-control-sm"},null,8,g),[[n.nr,e.approved]])]),(0,a._)("td",null,(0,s.zw)(l[e.status]),1),(0,a._)("td",null,[(0,a._)("div",y,[(0,a.wy)((0,a._)("input",{type:"radio",id:"yes",name:e.id,value:"1","onUpdate:modelValue":t=>e.status=t},null,8,k),[[n.G2,e.status]]),z,(0,a.Uk)(),D,(0,a.wy)((0,a._)("input",{type:"radio",id:"no",name:e.id,value:"2","onUpdate:modelValue":t=>e.status=t},null,8,f),[[n.G2,e.status]]),x])])])))),128))]),(0,a._)("tbody",null,[(0,a._)("tr",null,[A,(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-sm btn-success",onClick:M},"Update")])])])])])]),(0,a._)("div",U,[T,(0,a._)("div",V,[(0,a._)("table",S,[C,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Z.value,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,s.zw)(t+1),1),(0,a._)("td",null,(0,s.zw)(e.expense),1),(0,a._)("td",null,(0,s.zw)(e.amount),1),(0,a._)("td",null,(0,s.zw)(l[e.status]),1),(0,a._)("td",null,[e.status?(0,a.kq)("",!0):(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,type:"checkbox",value:e.id,"onUpdate:modelValue":d[0]||(d[0]=e=>N.value.expenses=e)},null,8,I)),[[n.e8,N.value.expenses]])])])))),128))]),N.value.expenses.length?((0,a.wg)(),(0,a.iD)("tbody",H,[(0,a._)("tr",null,[R,(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-sm btn-success",onClick:Y},"Approve")]),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-sm btn-secondary",onClick:E},"Reject")])])])):(0,a.kq)("",!0)])])])])])])])]))}};const q=Z;var M=q}}]);
//# sourceMappingURL=1394.a7dbe351.js.map