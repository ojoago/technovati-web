"use strict";(self["webpackChunkTechnovati"]=self["webpackChunkTechnovati"]||[]).push([[8365],{8365:function(e,t,l){l.r(t),l.d(t,{default:function(){return F}});l(560);var a=l(3396),s=l(7139),n=l(9242),u=l(2191),o=l(4870),i=l(2483);const r=e=>((0,a.dD)("data-v-38909cba"),e=e(),(0,a.Cn)(),e),c={class:"container mt-2"},d={class:"card"},m=r((()=>(0,a._)("div",{class:"card-header"},"Company Raw Materials",-1))),_={class:"card-body"},p={class:"row"},v={class:"col-md-8",id:"_main"},h=r((()=>(0,a._)("input",{type:"text",class:"form-control form-control-sm",placeholder:"search Item"},null,-1))),b={class:"table-responsive"},w={class:"table-hover table-stripped table-bordered table"},g=r((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"SN"),(0,a._)("th",null,"Request Note"),(0,a._)("th",null,"Requested By"),(0,a._)("th",null,"Items"),(0,a._)("th",null,"Receiver"),(0,a._)("th",null,"time"),(0,a._)("th",{align:"center"},[(0,a._)("i",{class:"bi bi-gear-fill"})])])],-1))),f=["onClick"],q=r((()=>(0,a._)("i",{class:"bi bi-plus"},null,-1))),y=[q],k={class:"col-md-4",id:"_side"},D={class:"border rounded-3 p-2 m-1"},z=r((()=>(0,a._)("legend",{class:"float-none w-auto px-2 h5"},"Request Item List",-1))),C={key:0,id:"itemForm"},I={class:"border rounded-3 p-2 m-1"},R={class:"form-label"},H={class:"input-group"},M={class:"bg-light p-1"},T=["onUpdate:modelValue"],x={class:"row"},U={class:"col-md-12"},V=r((()=>(0,a._)("label",{class:"form-label"},"Comment",-1))),Z={key:0,class:"text-danger"};var A={__name:"PendingMaterialRequestView",setup(e){const t=(0,i.tv)(),l=(0,o.iH)({}),r=(0,o.iH)({}),q=(0,o.iH)({request_pid:"",comment:"",items:[]});function A(){l.value=[],u.Z.dispatch("postMethod",{url:"/process-raw-material-request",param:q.value}).then((e=>{if(422==e?.status)l.value=e.data;else if(201==e?.status){let e=document.querySelector("#itemForm");e.reset(),S(q.value)}}))}function S(e){localStorage.setItem("TVATI_RAW_MAT_RQ_DETAIL",JSON.stringify(e,null,2)),q.value.items=[],q.value.comment="",t.push({path:"raw-material-request-details",query:{request:e.request_pid}})}function N(e){q.value.request_pid=e,u.Z.dispatch("getMethod",{url:"/load-raw-material-request-details/"+e}).then((e=>{q.value.items=200==e?.status?e.data:[]})).catch((e=>{console.log(e)}))}function F(){u.Z.dispatch("getMethod",{url:"/load-pending-raw-material-requests"}).then((e=>{200==e?.status&&(r.value=e.data)})).catch((e=>{console.log(e)}))}F();const K=(0,o.iH)({});function L(){u.Z.dispatch("loadDropdown","users").then((({data:e})=>{K.value=e})).catch((e=>{console.log(e)}))}return L(),(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",c,[(0,a._)("div",d,[m,(0,a._)("div",_,[(0,a._)("div",p,[(0,a._)("div",v,[h,(0,a._)("div",b,[(0,a._)("table",w,[g,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.value?.data,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,s.zw)(t+1),1),(0,a._)("td",null,(0,s.zw)(e.note),1),(0,a._)("td",null,(0,s.zw)(e?.user?.username),1),(0,a._)("td",null,(0,s.zw)(e.item_count),1),(0,a._)("td",null,(0,s.zw)(e?.receiver?.username??e?.user?.username),1),(0,a._)("td",null,(0,s.zw)(e.request_time),1),(0,a._)("td",null,[0==e.status?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t=>N(e.pid),type:"button",class:"btn btn-primary btn-sm"},y,8,f)):(0,a.kq)("",!0)])])))),128))])])])]),(0,a._)("div",k,[(0,a._)("fieldset",D,[z,q.value?.items.length?((0,a.wg)(),(0,a.iD)("form",C,[(0,a._)("fieldset",I,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(q.value?.items,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"col-md-12",key:t},[(0,a._)("label",R,(0,s.zw)(e.name),1),(0,a._)("div",H,[(0,a._)("span",M,"#"+(0,s.zw)(e.quantity),1),(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t=>e.quantity_requested=t,class:"form-control",placeholder:"e.g 5"},null,8,T),[[n.nr,e.quantity_requested]])])])))),128))]),(0,a._)("div",x,[(0,a._)("div",U,[V,(0,a.wy)((0,a._)("textarea",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>q.value.comment=e),class:"form-control form-control-sm",placeholder:"e.g UIU"},null,512),[[n.nr,q.value.comment]]),l.value?.comment?((0,a.wg)(),(0,a.iD)("p",Z,(0,s.zw)(l.value?.comment[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",{class:"float-end"},[(0,a._)("button",{type:"button",class:"btn btn-success btn-sm mt-2",onClick:A},"Process")])])):(0,a.kq)("",!0)])])])])])])]))}},S=l(89);const N=(0,S.Z)(A,[["__scopeId","data-v-38909cba"]]);var F=N}}]);
//# sourceMappingURL=8365.4331a316.js.map