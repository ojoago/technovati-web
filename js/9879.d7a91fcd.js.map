{"version":3,"file":"js/9879.d7a91fcd.js","mappings":"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","sources":["webpack://Technovati/./src/components/CardComponent.vue","webpack://Technovati/./src/components/shift/AttendanceComponent.vue","webpack://Technovati/./src/components/shift/AttendanceComponent.vue?c29c","webpack://Technovati/./src/views/dashboard/LogisticsDashboard.vue","webpack://Technovati/./src/views/dashboard/LogisticsDashboard.vue?72e5"],"sourcesContent":["import script from \"./CardComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CardComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CardComponent.vue?vue&type=style&index=0&id=30586156&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-30586156\"]])\n\nexport default __exports__","<template>\r\n    <div>\r\n        <div class=\"attendance-card shadow\">\r\n             <h5 class=\"card-title h6 text-center\">{{ date }} <span>| {{ time }}</span></h5>\r\n             <div class=\"col-outer\">\r\n                <div class=\"col-inner\">\r\n                    Time in\r\n                    <hr>\r\n                    {{timeIn}}\r\n                </div>\r\n                <div class=\"col-inner\">\r\n                    time out\r\n                    <hr>\r\n                    {{timeOut}}\r\n                </div>\r\n             </div>\r\n             <button @click=\"startCamera\" v-if=\"clockBtn == false\" class=\"btn btn-sm btn-primary actionBtn\">Clock In</button>\r\n             <button @click=\"clockOut\" v-if=\"clockBtn== true\" class=\"btn btn-sm btn-danger actionBtn\">Clock Out</button>\r\n\r\n        </div>\r\n\r\n        <o-modal  :isOpen=\"toggleModal\" modal-class=\"modal-sm\" title=\"Take Attendance\" @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <center><button @click=\"initCamera\" v-if=\"!stopStream\" class=\"btn btn-sm btn-success\">Retake</button></center>\r\n                <div class=\"container text-center\" v-if=\"startStream\">\r\n                    <video ref=\"video\" width=\"250\" v-if=\"stopStream\" height=\"250\" autoplay></video>\r\n                    <center><button @click=\"captureImage\" v-if=\"stopStream\" class=\"text-center btn btn-sm btn-success\">CAPTURE</button></center>\r\n                    <canvas ref=\"canvas\" width=\"250\" height=\"250\" style=\"display: none;\"></canvas>\r\n                    <img v-if=\"capturedImage\" :src=\"capturedImage\" alt=\"Captured Image\" />\r\n\r\n                    <!-- <p v-if=\"coordinates\">Coordinates: {{ coordinates.latitude }}, {{ coordinates.longitude }}</p>\r\n                    <p v-if=\"locationError\">{{ locationError }}</p> -->\r\n                </div>\r\n            </template>\r\n            <template #footer><div></div></template>\r\n        </o-modal>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport store from '@/store';\r\nimport OModal from '@/components/OModal.vue';\r\n\r\nimport { ref, onMounted } from 'vue'\r\nconst toggleModal = ref(false)\r\n\r\nconst date = ref(null);\r\ndate.value = new Date().toDateString();\r\nconst time = ref()\r\nfunction timer() {\r\n    time.value = new Date().toLocaleTimeString();\r\n}\r\nsetInterval(() => timer(), 1000)\r\nconst timeIn = ref('--:--')\r\nconst timeOut = ref('--:--')\r\nconst clockBtn = ref(null)\r\nconst closeModal = () => {\r\n    toggleModal.value = false;\r\n    stopCamera()\r\n};\r\nconst startCamera = () => {\r\n    toggleModal.value = true;\r\n    initCamera()\r\n};\r\nconst video = ref(null);\r\nconst canvas = ref(null);\r\nconst capturedImage = ref(null);\r\nconst startStream = ref(false);\r\nconst stopStream = ref(true);\r\nlet stream = null;\r\nconst attendance = ref({})\r\nconst initCamera = async () => {\r\n    try {\r\n        capturedImage.value = null\r\n        startStream.value = true\r\n        stopStream.value = true\r\n        stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n        video.value.srcObject = stream;\r\n    } catch (error) {\r\n        console.error('Error accessing webcam:', error);\r\n    }\r\n}\r\nconst captureImage = async () => {\r\n    platform();\r\n    agent();\r\n    const context = canvas.value.getContext('2d');\r\n    context.drawImage(video.value, 0, 0, canvas.value.width, canvas.value.height);\r\n    stopCamera()\r\n    // Convert the canvas image to a data URL\r\n    capturedImage.value = canvas.value.toDataURL('image/png');\r\n    attendance.value.image = capturedImage;\r\n    clockIn()\r\n};\r\n\r\n// Initialize the webcam when the component is mounted\r\n// initCamera();\r\n\r\nconst platform = () => {\r\n    const platform = navigator.platform;\r\n    let pf;\r\n    if (platform.toLowerCase().includes('win')) {\r\n        pf = 'Windows';\r\n    } else if (platform.toLowerCase().includes('mac')) {\r\n        pf = 'macOS';\r\n    } else if (platform.toLowerCase().includes('linux')) {\r\n        pf = 'Linux';\r\n    } else {\r\n        pf = 'Unknown OS';\r\n    }\r\n    attendance.value.platform = pf\r\n}\r\n\r\nconst agent = () => {\r\n    const userAgent = navigator.userAgent;\r\n    let brow;\r\n    if (userAgent.includes('Chrome')) {\r\n        brow = 'Google Chrome';\r\n    } else if (userAgent.includes('Firefox')) {\r\n        brow = 'Mozilla Firefox';\r\n    } else if (userAgent.includes('Safari')) {\r\n        brow = 'Apple Safari';\r\n    } else if (userAgent.includes('Edge')) {\r\n        brow = 'Microsoft Edge';\r\n    } else if (userAgent.includes('Opera') || userAgent.includes('OPR/')) {\r\n        brow = 'Opera';\r\n    } else if (userAgent.includes('Brave')) {\r\n        brow = 'Brave';\r\n    } else {\r\n        brow = 'Unknown Browser';\r\n    }\r\n    attendance.value.browser = brow\r\n}\r\n\r\n\r\n\r\nconst stopCamera = () => {\r\n    if (stream) {\r\n        stream.getTracks().forEach(track => track.stop());\r\n    }\r\n    stopStream.value = false\r\n}\r\n\r\n// coordinates\r\nconst coordinates = ref(null);\r\nconst locationError = ref(null);\r\n\r\nonMounted(() => {\r\n\r\n    getLocation()\r\n})\r\n\r\nconst getLocation = () => {\r\n    if (navigator.geolocation) {\r\n        navigator.geolocation.getCurrentPosition(\r\n            (position) => {\r\n                coordinates.value = {\r\n                    latitude: position.coords.latitude,\r\n                    longitude: position.coords.longitude,\r\n                    accuracy: position.coords.accuracy,\r\n                };\r\n                // coordinates.value = position.coords\r\n                attendance.value.coordinates = coordinates\r\n                console.log(position);\r\n            },\r\n            (error) => {\r\n                locationError.value = `Error getting location: ${error.message}`;\r\n                attendance.value.coordinates = null;\r\n            }, { enableHighAccuracy: true }\r\n        );\r\n    } else {\r\n        attendance.value.coordinates = null;\r\n        locationError.value = 'Geolocation is not supported by your browser.';\r\n    }\r\n};\r\n\r\n// function getLocationName(lat, lng) {\r\n    \r\n//     // Replace 'YOUR_API_KEY' with your Google Maps API key\r\n//     const apiKey = 'YOUR_API_KEY';\r\n//     const apiUrl = `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=${apiKey}`;\r\n//     return apiUrl\r\n//     // fetch(apiUrl)\r\n//     //     .then(response => response.json())\r\n//     //     .then(data => {\r\n//     //         const locationName = data.results[0].formatted_address;\r\n//     //         document.getElementById('locationName').textContent = `Location Name: ${locationName}`;\r\n//     //     })\r\n//     //     .catch(error => {\r\n//     //         console.log('Error fetching location data:', error);\r\n//     //     });\r\n// }\r\n\r\n// // Example coordinates (replace with your actual coordinates)\r\n// const latitude = 37.7749;\r\n// const longitude = -122.4194;\r\n\r\n// getLocationName(latitude, longitude);\r\n\r\n\r\nfunction clockIn() {\r\n    store.dispatch('postMethod', { url: '/clock-in', param: attendance.value }).then((data) => {\r\n        if (data?.status == 201) {\r\n            clockBtn.value = true;\r\n            timeIn.value = data?.data?.time_in;\r\n            toggleModal.value = false;\r\n        }\r\n    });\r\n}\r\n\r\n\r\nconst checkedInToday = () => {\r\n//last-check-in\r\n    store.dispatch('getMethod', { url: '/last-check-in' }).then((data) => {\r\n        if (data?.status == 200) {\r\n            clock(data?.data)\r\n        }\r\n    });\r\n}\r\n onMounted(()=>{\r\n    checkedInToday()\r\n })\r\n\r\n\r\nconst clockOut = () => {\r\n    store.dispatch('putMethod', { url: '/clock-out',prompt:\"are you sure you want to clock out?\" }).then((data) => {\r\n        if (data?.status == 201) {\r\n            clock(data?.data)\r\n        }\r\n    });\r\n}\r\nconst clock = (data) => {\r\n    if (data == null) {\r\n        clockBtn.value = false;\r\n    } else {\r\n        timeIn.value = data?.time_in;\r\n        clockBtn.value = true;\r\n        if (data.time_out != null) {\r\n            timeOut.value = data?.time_out;\r\n            clockBtn.value = null;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    .attendance-card{\r\n        max-width: 100%;\r\n        padding: 5px;\r\n        background-color: #f1f1f1;\r\n        /* box-shadow: #f1f1f1; */\r\n       /* box-shadow: inset 5em 1em #646363; */\r\n    }\r\n    .col-outer{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        padding: 5px;\r\n        text-transform: uppercase;\r\n    }\r\n    .actionBtn{\r\n        width: 100%;\r\n    }\r\n</style>","import script from \"./AttendanceComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AttendanceComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AttendanceComponent.vue?vue&type=style&index=0&id=4b9f5ed4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4b9f5ed4\"]])\n\nexport default __exports__","<template>\r\n    <div>\r\n        <div class=\"container mt-2\">\r\n            <!-- {{ logistics }} -->\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-4\">\r\n                            <AttendanceComponent />\r\n                        </div>\r\n                        <div class=\"col-md-8\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-6\">\r\n                                    <Card title=\"Number of Vehicle\" link=\"vehicle\" :count=\"logistics.vehicle\"  icon=\"bi-hash\" />\r\n                                </div>\r\n                                <div class=\"col-md-6\">\r\n                                    <Card title=\"Drivers\" :count=\"logistics.vehicle\"  icon=\"bi-hash\" />\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-3 mb-1\">\r\n                            <Card title=\"Number of Vehicles\" :count=\"logistics.vehicle\"  icon=\"bi-hash\" />\r\n                        </div>\r\n\r\n                        <div class=\"col-md-3 mb-1\">\r\n                            <Card title=\"Spent on Fuel, this month\" :count=\"logistics.fuel_month\"  icon=\"bi-cash\" />\r\n                        </div>\r\n\r\n                        <div class=\"col-md-3 mb-1\">\r\n                            <Card title=\"Spent on Fuel, this year\" :count=\"logistics.fuel_year\"  icon=\"bi-cash\" />\r\n                        </div>\r\n                        <div class=\"col-md-3 mb-1\">\r\n                            <Card title=\"Spent on Oil, this month\" :count=\"logistics.oil_month\"  icon=\"bi-cash\" />\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport AttendanceComponent from '@/components/shift/AttendanceComponent.vue';\r\nimport store from '@/store';\r\nimport { onMounted, ref } from 'vue';\r\nimport Card from '@/components/CardComponent.vue'\r\n\r\n\r\nconst logistics = ref({})\r\nconst logisticsCount = () => {\r\n    store.dispatch('getMethod', { url: '/load-logistics-count' }).then((data) => {\r\n        if (data?.status == 200) {\r\n            logistics.value = data.data;\r\n        }\r\n    })\r\n}\r\n\r\nonMounted(() => {\r\n    logisticsCount()\r\n})\r\n// const data = store?.state?.user?.roles;\r\n// const activeRole = store?.state?.activeRole;\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./LogisticsDashboard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LogisticsDashboard.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["__exports__","toggleModal","ref","date","value","Date","toDateString","time","timer","toLocaleTimeString","setInterval","timeIn","timeOut","clockBtn","closeModal","stopCamera","startCamera","initCamera","video","canvas","capturedImage","startStream","stopStream","stream","attendance","async","navigator","mediaDevices","getUserMedia","srcObject","error","console","captureImage","platform","agent","context","getContext","drawImage","width","height","toDataURL","image","clockIn","pf","toLowerCase","includes","userAgent","brow","browser","getTracks","forEach","track","stop","coordinates","locationError","onMounted","getLocation","geolocation","getCurrentPosition","position","latitude","coords","longitude","accuracy","log","message","enableHighAccuracy","store","dispatch","url","param","then","data","status","time_in","checkedInToday","clock","clockOut","prompt","time_out","logistics","logisticsCount"],"sourceRoot":""}