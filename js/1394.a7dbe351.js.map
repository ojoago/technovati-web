{"version":3,"file":"js/1394.a7dbe351.js","mappings":"g2DAMA,MAAMA,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,q4CCyHA,MAAMC,GAAUC,EAAAA,EAAAA,IAAI,CAAC,GAEfC,EAAS,CAAC,UAAU,WAAY,WAAW,UAE3CC,GAAWF,EAAAA,EAAAA,IAAI,CAAC,GAEhBG,GAAUH,EAAAA,EAAAA,IAAI,CAAC,IACrBI,EAAAA,EAAAA,KAAU,KACN,IAAIC,EAAMC,aAAaC,QAAQ,wBAA0BC,KAAKC,MAAMH,aAAaC,QAAQ,yBAA2B,OAEzG,QAAPF,IACAH,EAASQ,MAAQL,EAAIH,SACrBC,EAAQO,MAAQL,EAAIF,SAExBJ,EAAQW,MAAQL,CAAG,IASvB,MAAMM,EAAgBA,KAElBC,EAAAA,EAAMC,SAAS,YAAa,CAAEC,IAAK,kCAAmCC,OAAQ,2DAA4DC,MAAMb,EAAQO,QAASO,MAAMC,IAC/I,KAAhBA,GAAMjB,QAENkB,GACJ,GACF,EAaAA,EAAaA,KACfP,EAAAA,EAAMC,SAAS,YAAa,CAAEC,IAAK,gCAAiCf,EAAQW,MAAMU,MAAOH,MAAMC,IACvE,KAAhBA,GAAMjB,SACNE,EAAQO,MAAQQ,EAAKA,KACzB,GACF,EAGAG,GAASrB,EAAAA,EAAAA,IAAI,CACfsB,WAAYvB,EAAQW,MAAMU,IAC1BlB,SAAU,KAGRqB,EAAiBA,KACnBF,EAAOX,MAAMY,WAAavB,EAAQW,MAAMU,IACxCR,EAAAA,EAAMC,SAAS,YAAa,CAAEC,IAAK,0BAA2BC,OAAQ,4DAA6DC,MAAOK,EAAOX,QAASO,MAAMC,IACxI,KAAhBA,GAAMjB,SACNoB,EAAOX,MAAMR,SAAW,GACxBsB,IACJ,GACF,EAGAC,EAAgBA,KAClBJ,EAAOX,MAAMY,WAAavB,EAAQW,MAAMU,IACxCR,EAAAA,EAAMC,SAAS,YAAa,CAAEC,IAAK,yBAA0BC,OAAQ,2DAA4DC,MAAOK,EAAOX,QAASO,MAAMC,IACtI,KAAhBA,GAAMjB,SACNoB,EAAOX,MAAMR,SAAW,GACxBsB,IACJ,GACF,EAGAA,EAAcA,KAChBZ,EAAAA,EAAMC,SAAS,YAAa,CAAEC,IAAK,wBAA0Bf,EAAQW,MAAMU,MAAOH,MAAMC,IAChE,KAAhBA,GAAMjB,SACNC,EAASQ,MAAQQ,EAAKA,KAC1B,GACF,E,wgEC/MN,MAAMpB,EAAc,EAEpB,O","sources":["webpack://Technovati/./src/components/travel/RequestDetailComponent.vue","webpack://Technovati/./src/views/travel/TravelRequestDetailHrView.vue","webpack://Technovati/./src/views/travel/TravelRequestDetailHrView.vue?dc98"],"sourcesContent":["import script from \"./RequestDetailComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RequestDetailComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RequestDetailComponent.vue?vue&type=style&index=0&id=29ba58ae&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-29ba58ae\"]])\n\nexport default __exports__","<template>\r\n    <div>\r\n        <div class=\"container my-2\">\r\n\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                    <RequestDetail :data=\"details\" />\r\n\r\n                    <hr>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-6\">\r\n                            <label for=\"\" class=\"h4\">Budgets</label>\r\n                            <!-- <button class=\"btn btn-primary btn-sm m-1\">Add</button> -->\r\n                            {{ budget_status }}\r\n                            <div class=\"table-responsive\">\r\n                                <table class=\"table table-hover table-stripped table-bordered\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th width=\"5%\">S/N</th>\r\n                                            <th>Item</th>\r\n                                            <th>Amount</th>\r\n                                            <th>Approved Amount</th>\r\n                                            <th>Status</th>\r\n                                            <th> Approve? </th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr v-for=\"(budget,loop) in budgets\" :key=\"loop\">\r\n                                            <td>{{ loop + 1 }}</td>\r\n                                            <td>{{ budget.budget }}</td>\r\n                                            <td>{{ budget.amount }}</td>\r\n                                            <td> <input type=\"number\" step=\".5\" v-model=\"budget.approved\" class=\"form-control form-control-sm\"> </td>\r\n                                            <td>{{ status[budget.status] }}</td>\r\n                                            <td>\r\n\r\n                                                <div class=\"input-group\">\r\n                                                    <input type=\"radio\" id=\"yes\" :name=\"budget.id\" value=\"1\" v-model=\"budget.status\" />\r\n                                                    <label for=\"yes\">Yes</label> <i class=\"m-2\"></i>\r\n                                                    <input type=\"radio\" id=\"no\" :name=\"budget.id\" value=\"2\" v-model=\"budget.status\" />\r\n                                                    <label for=\"no\">No</label>\r\n                                                </div>\r\n\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                    <tbody >\r\n                                        <tr>\r\n                                            <td colspan=\"5\"></td>\r\n                                            <td>\r\n                                                <button class=\"btn btn-sm btn-success\"\r\n                                                    @click=\"approveBudget\">Update</button>\r\n\r\n                                            </td>\r\n                                           <!--  <td>\r\n                                                <button class=\"btn btn-sm btn-secondary\"\r\n                                                    @click=\"rejectBudget\">Reject</button>\r\n                                            </td> -->\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <label for=\"\" class=\"h4\">Expenses</label>\r\n                            <!-- <button class=\"btn btn-primary btn-sm m-1\">Add</button> -->\r\n                            <div class=\"table-responsive\">\r\n                                <table class=\"table table-hover table-stripped table-bordered\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th width=\"5%\">S/N</th>\r\n                                            <th>Item</th>\r\n                                            <th>Amount</th>\r\n                                            <th>Status</th>\r\n                                            <th> <i class=\"bi bi-gear-fill\"></i> </th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr v-for=\"(expense, loop) in expenses\" :key=\"loop\">\r\n                                            <td>{{ loop + 1 }}</td>\r\n                                            <td>{{ expense.expense }}</td>\r\n                                            <td>{{ expense.amount }}</td>\r\n                                            <td>{{ status[expense.status] }}</td>\r\n                                            <td>\r\n                                                <input type=\"checkbox\" v-if=\"!expense.status\" :value=\"expense.id\"\r\n                                                    v-model=\"reject.expenses\">\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                    <tbody v-if=\"reject.expenses.length\">\r\n                                        <tr>\r\n                                            <td colspan=\"3\"></td>\r\n                                            <td>\r\n                                                <button class=\"btn btn-sm btn-success\"\r\n                                                    @click=\"approveExpense\">Approve</button>\r\n                                            </td>\r\n                                            <td>\r\n                                                <button class=\"btn btn-sm btn-secondary\"\r\n                                                    @click=\"rejectExpense\">Reject</button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref , onMounted } from \"vue\";\r\nimport store from \"@/store\";\r\n\r\nimport RequestDetail from '@/components/travel/RequestDetailComponent.vue'\r\n// import { useRouter } from 'vue-router';\r\n\r\n// const router = useRouter()\r\n// let query = {}\r\n// router.push({ query: query })\r\n\r\nconst details = ref({});\r\n\r\nconst status = ['Pending','Approved', 'Rejected','Cancel'];\r\n\r\nconst expenses = ref({})\r\n\r\nconst budgets = ref({})\r\nonMounted(() => {\r\n    let rqs = localStorage.getItem('TVATI_TRV_RQS_DETAIL') ? JSON.parse(localStorage.getItem('TVATI_TRV_RQS_DETAIL')) : 'null'\r\n    // console.log(rqs);\r\n    if (rqs != 'null') {\r\n        expenses.value = rqs.expenses;\r\n        budgets.value = rqs.budgets;\r\n    }\r\n    details.value = rqs;\r\n});\r\n\r\n// approve and reject budgets\r\n// const approval = ref({\r\n//     travel_pid: '',\r\n//     budgets: []\r\n// })\r\n\r\nconst approveBudget = () =>{\r\n    // approval.value.travel_pid = details.value.pid;\r\n    store.dispatch('putMethod', { url: '/approve-travel-request-budget/', prompt: 'Are you sure you want to approve the selected budget(s)?', param:budgets.value }).then((data) => {\r\n        if (data?.status == 201) {\r\n            // approval.value.budgets = []\r\n            loadBudget()\r\n        }\r\n    })\r\n}\r\n\r\n// const rejectBudget = () =>{\r\n//     approval.value.travel_pid = details.value.pid;\r\n//     store.dispatch('putMethod', { url: '/reject-travel-request-budgets/', prompt: 'Are you sure you want to reject the selected budget(s)?', param:approval.value }).then((data) => {\r\n//         if (data?.status == 201) {\r\n//             approval.value.budgets = []\r\n//             loadBudget()\r\n//         }\r\n//     })\r\n// }\r\n\r\nconst loadBudget = () => {\r\n    store.dispatch('getMethod', { url: '/load-travel-request-budgets/'+ details.value.pid }).then((data) => {\r\n        if (data?.status == 200) {\r\n            budgets.value = data.data\r\n        }\r\n    })\r\n}\r\n\r\nconst reject = ref({\r\n    travel_pid: details.value.pid,\r\n    expenses: []\r\n})\r\n\r\nconst approveExpense = () => {\r\n    reject.value.travel_pid = details.value.pid;\r\n    store.dispatch('putMethod', { url: '/approve-travel-expense', prompt: 'Are you sure you want to approve the selected expense(s)?', param: reject.value }).then((data) => {\r\n        if (data?.status == 201) {\r\n            reject.value.expenses = []\r\n            loadExpense()\r\n        }\r\n    })\r\n}\r\n\r\nconst rejectExpense = () => {\r\n    reject.value.travel_pid = details.value.pid;\r\n    store.dispatch('putMethod', { url: '/reject-travel-expense', prompt: 'Are you sure you want to reject the selected expense(s)?', param: reject.value }).then((data) => {\r\n        if (data?.status == 201) {\r\n            reject.value.expenses = []\r\n            loadExpense()\r\n        }\r\n    })\r\n}\r\n\r\nconst loadExpense = () => {\r\n    store.dispatch('getMethod', { url: '/load-travel-expense/' + details.value.pid }).then((data) => {\r\n        if (data?.status == 200) {\r\n            expenses.value = data.data\r\n        }\r\n    })\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./TravelRequestDetailHrView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TravelRequestDetailHrView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["__exports__","details","ref","status","expenses","budgets","onMounted","rqs","localStorage","getItem","JSON","parse","value","approveBudget","store","dispatch","url","prompt","param","then","data","loadBudget","pid","reject","travel_pid","approveExpense","loadExpense","rejectExpense"],"sourceRoot":""}