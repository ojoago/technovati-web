{"version":3,"file":"js/5910.6f72aaeb.js","mappings":"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","sources":["webpack://Technovati/./src/components/PaginationLinks.vue","webpack://Technovati/./src/components/department/SubDepartment.vue","webpack://Technovati/./src/components/department/SubDepartment.vue?838c","webpack://Technovati/./src/views/department/DepartmentView.vue","webpack://Technovati/./src/views/department/DepartmentView.vue?5819"],"sourcesContent":["import script from \"./PaginationLinks.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PaginationLinks.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div>\r\n\r\n        <button class=\"btn btn-sm btn-primary mb-1\" @click=\"addNew\">Add New</button>\r\n        <div class=\"table-responsive\">\r\n            <table class=\"table-hover table-stripped table-bordered table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>SN</th>\r\n                        <th>DEPARTMENT</th>\r\n                        <th>Sub Department</th>\r\n                        <th>HEAD</th>\r\n                        <th> <i class=\"bi bi-gear-fill\"></i> </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(dp, loop) in sub_depts.data\" :key=\"dp.pid\">\r\n                        <td>{{ loop + 1 }}</td>\r\n                        <td>{{ dp?.department?.department }}</td>\r\n                        <td>{{ dp.name }}</td>\r\n                        <td>{{ dp?.head?.username }}</td>\r\n                        <td>\r\n                            <div class=\"dropdown\">\r\n                                <button type=\"button\" class=\"btn btn-primary btn-sm dropdown-toggle\"\r\n                                    data-bs-toggle=\"dropdown\">\r\n                                    <i class=\"bi bi-tools\"></i>\r\n                                </button>\r\n                                <ul class=\"dropdown-menu\">\r\n                                    <li><a class=\"dropdown-item pointer\" @click=\"editSubDept(dp)\">Edit</a></li>\r\n                                    <!-- <li><a class=\"dropdown-item pointer\" @click=\"showModal(dp.pid)\">Assign</a></li> -->\r\n                                </ul>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <o-modal :isOpen=\"toggleModal\" modal-class=\"modal-xs\" @submit=\"createSubDepartment\"\r\n            title=\"Create Sub Department\" @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <div>\r\n                    <form>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-group\">\r\n                                    <label class=\"form-label\">Department</label>\r\n                                    <Select2 v-model=\"sub.department_pid\" :options=\"deptDrop\"\r\n                                        :settings=\"{ width: '100%' }\" />\r\n                                    <p class=\"text-danger \" v-if=\"sub_error?.department_pid\">{{\r\n                                        sub_error?.department_pid[0] }}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-group\">\r\n                                    <label class=\"form-label\">Sub Department</label>\r\n                                    <input type=\"text\" v-model=\"sub.name\" class=\"form-control\"\r\n                                        placeholder=\"e.g sub operation\">\r\n                                    <p class=\"text-danger \" v-if=\"sub_error?.name\">{{ sub_error?.name[0] }}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-group\">\r\n                                    <label class=\"form-label\">Head of Department</label>\r\n                                    <Select2 v-model=\"sub.head_pid\" :options=\"users\" :settings=\"{ width: '100%' }\" />\r\n                                    <p class=\"text-danger \" v-if=\"sub_error?.head_pid\">{{ sub_error?.head_pid[0] }}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </template>\r\n        </o-modal>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import store from \"@/store\";\r\n    import { ref } from \"vue\";\r\n    import Select2 from 'vue3-select2-component';\r\n    import OModal from \"@/components/OModal.vue\";\r\n\r\nconst sub = ref({\r\n    'department_pid': '',\r\n    'name': '',\r\n    'description': '',\r\n    'head_pid': '',\r\n});\r\nconst toggleModal = ref(false)\r\n\r\nconst addNew = () => {\r\n    dropdownDepts()\r\n    toggleModal.value = true\r\n    resetAttr()\r\n\r\n}\r\n\r\nconst closeModal = () => {\r\n    toggleModal.value = false;\r\n};\r\nconst editSubDept = (data) => {\r\n    sub.value = {\r\n        department_pid: data.department_pid ,\r\n        name: data.name , \r\n        description: data.description , \r\n        head_pid: data.head_pid ,\r\n        pid: data.pid\r\n    }\r\n    toggleModal.value = true\r\n}\r\n\r\nconst resetAttr = () => {\r\n    sub.value = {\r\n        department_pid: '',\r\n        name: '',\r\n        description: '',\r\n        head_pid: '',\r\n    }\r\n}\r\n\r\nconst sub_error = ref({})\r\nfunction createSubDepartment() {\r\n    sub_error.value = []\r\n    store.dispatch('postMethod', { url: '/create-sub-department', param: sub.value }).then((data) => {\r\n        if (data?.status == 422) {\r\n            sub_error.value = data.data\r\n        } else if (data?.status == 201) {\r\n            toggleModal.value = false\r\n\r\n            resetAttr()\r\n        }\r\n    })\r\n}\r\n\r\n\r\nloadSubDepartment()\r\n\r\nconst sub_depts = ref({})\r\nfunction loadSubDepartment() {\r\n    store.dispatch('getMethod', { url: '/load-sub-departments' }).then((data) => {\r\n        if (data?.status == 200) {\r\n            sub_depts.value = data.data;\r\n        }\r\n    })\r\n}\r\n\r\n\r\nconst users = ref([]);\r\nfunction dropdownAllow() {\r\n    store.dispatch('loadDropdown', 'users').then(({ data }) => {\r\n        users.value = data;\r\n    }).catch(e => {\r\n        console.log(e);\r\n    })\r\n}\r\ndropdownAllow()\r\n\r\nconst deptDrop = ref([]);\r\nfunction dropdownDepts() {\r\n    store.dispatch('loadDropdown', 'departments').then(({ data }) => {\r\n        deptDrop.value = data;\r\n    })\r\n}\r\ndropdownDepts()\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./SubDepartment.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SubDepartment.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div>\r\n        <div class=\"container mt-2\">\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"card-header\">\r\n                        <h3>Departments</h3>\r\n                    </div>\r\n                     <!-- Default Tabs -->\r\n                      <ul class=\"nav nav-tabs d-flex\" id=\"myTabjustified\" role=\"tablist\">\r\n                        <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                          <button class=\"nav-link w-100 active\" id=\"department-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#department\" type=\"button\" role=\"tab\" aria-controls=\"department\" aria-selected=\"true\">Department</button>\r\n                        </li>\r\n\r\n                        <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                          <button class=\"nav-link w-100\" id=\"sub-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#sub\" type=\"button\" role=\"tab\" aria-controls=\"sub\" aria-selected=\"false\">Sub Department</button>\r\n                        </li>\r\n                        <li class=\"nav-item flex-fill\" role=\"presentation\">\r\n                          <button class=\"nav-link w-100\" id=\"desig-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#desig\" type=\"button\" role=\"tab\" aria-controls=\"desig\" aria-selected=\"false\">Designation</button>\r\n                        </li>\r\n                        \r\n                      </ul>\r\n                      <div class=\"tab-content pt-2\" id=\"myTabjustifiedContent\">\r\n                        <div class=\"tab-pane fade show active\" id=\"department\" role=\"tabpanel\" aria-labelledby=\"department-tab\">\r\n                            <button class=\"btn btn-sm btn-primary mb-1\" @click=\"toggleModal=true\">Add New</button>\r\n                            <div class=\"table-responsive\">\r\n                                <table class=\"table-hover table-stripped table-bordered table\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>SN</th>\r\n                                            <th>DEPARTMENT</th>\r\n                                            <th>Sub DEPARTMENT</th>\r\n                                            <th>DESCRIPTION</th>\r\n                                            <th>HEAD</th>\r\n                                            <th> <i class=\"bi bi-gear-fill\"></i> </th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr v-for=\"(dp, loop) in departments.data\" :key=\"dp.pid\">\r\n                                            <td>{{ loop + 1 }}</td>\r\n                                            <td>{{ dp.department }}</td>\r\n                                            <td>{{ dp.sub_count }}</td>\r\n                                            <td>{{ dp.description }}</td>\r\n                                            <td>{{ dp.head?.username }}</td>\r\n                                            <td>\r\n                                                <div class=\"dropdown\">\r\n                                                    <button type=\"button\" class=\"btn btn-primary btn-sm dropdown-toggle\" data-bs-toggle=\"dropdown\">\r\n                                                        <i class=\"bi bi-tools\"></i>\r\n                                                    </button>\r\n                                                    <ul class=\"dropdown-menu\">\r\n                                                        <li><a class=\"dropdown-item pointer\" @click=\"editDept(dp)\">Edit</a></li>\r\n                                                        <li><a class=\"dropdown-item pointer\" @click=\"openModal(dp.pid)\">Assign</a></li>\r\n                                                    </ul>\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                                <div class=\"flex justify-center mt-4\">\r\n                                        <nav class=\"relative justify-center rounded-md shadow pagination\">\r\n                                            <pagination-links v-for=\"(link, i) of departments.links\" :link=\"link\" :key=\"i\"\r\n                                                @next=\"nextPage($event,link)\"></pagination-links>\r\n                                        </nav>\r\n                                    </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"tab-pane fade\" id=\"sub\" role=\"tabpanel\" aria-labelledby=\"sub-tab\">\r\n                            <SubDepartment/>\r\n                        </div>\r\n                        <div class=\"tab-pane fade\" id=\"desig\" role=\"tabpanel\" aria-labelledby=\"desig-tab\">\r\n                            \r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-4\">\r\n                                    <fieldset class=\"border rounded-3 p-2 m-1\">\r\n                                    <legend class=\"float-none w-auto px-2 h5\">Create Designation</legend>\r\n                                <form >\r\n                                    <div class=\"row\">\r\n                                        <div class=\"col-md-12\">\r\n                                            <div class=\"form-group\">\r\n                                                <label class=\"form-label\">Designation</label>\r\n                                                <input type=\"text\" v-model=\"desig.name\" class=\"form-control\" placeholder=\"e.g graduate trainy\">\r\n                                                <p class=\"text-danger \" v-if=\"desig_error?.name\">{{ desig_error?.name[0] }}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div class=\"col-md-12\">\r\n                                        <div class=\"form-group\">\r\n                                            <label class=\"form-label\">Description</label>\r\n                                            <textarea type=\"text\" v-model=\"desig.description\" class=\"form-control\" placeholder=\"any description\"></textarea>\r\n                                            <p class=\"text-danger \" v-if=\"desig_error?.description\">{{ desig_error?.description[0] }}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    </div>\r\n                                    <button type=\"button\" class=\"btn btn-success btn-sm mt-2\" @click=\"createDesignation\">Submit</button>\r\n                                </form>\r\n                            </fieldset>\r\n                                </div>\r\n                                <div class=\"col-md-8\">\r\n                                    <div class=\"table-responsive\">\r\n                                    <table class=\"table-hover table-stripped table-bordered table\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>SN</th>\r\n                                                <th>DESIGNATION</th>\r\n                                                <th>STATUS</th>\r\n                                                <th>DESCRIPTION</th>\r\n                                                <th> <i class=\"bi bi-gear-fill\"></i> </th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr v-for=\"(dp, loop) in designations.data\" :key=\"dp.pid\">\r\n                                                <td>{{ loop + 1 }}</td>\r\n                                                <td>{{ dp.name }}</td>\r\n                                                <td>{{ dp.status == 1 ? 'ENABLED' : 'DISABLED' }}</td>\r\n                                                <td>{{ dp.description }}</td>\r\n                                                <td>\r\n                                                    <div class=\"dropdown\">\r\n                                                        <button type=\"button\" class=\"btn btn-primary btn-sm dropdown-toggle\" data-bs-toggle=\"dropdown\">\r\n                                                            <i class=\"bi bi-tools\"></i>\r\n                                                        </button>\r\n                                                        <ul class=\"dropdown-menu\">\r\n                                                            <li><a class=\"dropdown-item pointer\" @click=\"editDesig(dp)\">Edit</a></li>\r\n                                                            <li><a class=\"dropdown-item pointer bg-danger\" @click=\"deleteDeisg(dp.pid)\">Delete</a></li>\r\n                                                        </ul>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                    <div class=\"flex justify-center mt-4\">\r\n                                        <nav class=\"relative justify-center rounded-md shadow pagination\">\r\n                                            <pagination-links v-for=\"(link, i) of designations.links\" :link=\"link\" :key=\"i\"\r\n                                                @next=\"nextDPage($event,link)\"></pagination-links>\r\n                                        </nav>\r\n                                    </div>\r\n                                </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <o-modal :isOpen=\"toggleModal\" modal-class=\"modal-xs\" @submit=\"createDepartment\" title=\"Create Department\" @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <div>\r\n                    <p class=\"text-danger small\">Note Head of Department must have the role of [HOD]</p>\r\n                    <form >\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-group\">\r\n                                    <label class=\"form-label\">Department</label>\r\n                                    <input type=\"text\" v-model=\"dept.department\" class=\"form-control\" placeholder=\"Name of department\">\r\n                                    <p class=\"text-danger \" v-if=\"errors?.department\">{{ errors?.department[0] }}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-group\">\r\n                                    <label class=\"form-label\">Description</label>\r\n                                    <textarea type=\"text\" v-model=\"dept.description\" class=\"form-control\" placeholder=\"Name of department\"></textarea>\r\n                                    <p class=\"text-danger \" v-if=\"errors?.description\">{{ errors?.description[0] }}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-group\">\r\n                                    <label class=\"form-label\">Head of Department</label>\r\n                                    <Select2 v-model=\"dept.head_pid\" :options=\"users\" :settings=\"{ width: '100%' }\"  />\r\n                                    <p class=\"text-danger \" v-if=\"errors?.head\">{{ errors?.head[0] }}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </template>\r\n        </o-modal>\r\n\r\n        <o-modal :isOpen=\"isModalOpened\" modal-class=\"modal-xs\" @submit=\"assignDepartment\" title=\"Assign Department\" @modal-close=\"closeModal\">\r\n            <template #content>\r\n                <div>\r\n                    <form  >\r\n                        <div class=\"row\">\r\n\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-group\">\r\n                                    <label class=\"form-label\">Sub Department </label>\r\n                                    <Select2 v-model=\"dept.sub_department\" :options=\"sub\" :settings=\"{ width: '100%' }\"  />\r\n                                    <p class=\"text-danger \" v-if=\"a_errors?.sub_department\">{{ a_errors?.sub_department[0] }}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-group\">\r\n                                    <label class=\"form-label\">Staff  <span>*</span> </label>\r\n                                    <Select2 v-model=\"dept.user_pid\" :options=\"users\" :settings=\"{ width: '100%' }\"  />\r\n                                    <p class=\"text-danger \" v-if=\"a_errors?.user_pid\">{{ a_errors?.user_pid[0] }}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </form>\r\n                </div>\r\n            </template>\r\n        </o-modal>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport store from \"@/store\";\r\nimport { ref, onMounted } from \"vue\";\r\nimport Select2 from 'vue3-select2-component';\r\nimport OModal from \"@/components/OModal.vue\";\r\nimport SubDepartment from \"@/components/department/SubDepartment.vue\"\r\nimport PaginationLinks from \"@/components/PaginationLinks.vue\";\r\n\r\nconst isModalOpened = ref(false);\r\n\r\nconst openModal = (pid) => {\r\n    isModalOpened.value = true;\r\n    assign.value.department_pid = pid;\r\n    loadSubDept(pid)\r\n};\r\nconst closeModal = () => {\r\n    isModalOpened.value = false;\r\n    toggleModal.value = false;\r\n    resetDept()\r\n};\r\nconst toggleModal = ref(false);\r\n\r\n    \r\n    const departments = ref({});\r\n    const dept = ref({\r\n        'department':'' ,\r\n        'description':'' , \r\n        'head_pid':'' , \r\n    });\r\n    const resetDept = () => {\r\n        dept.value ={\r\n            'department': '',\r\n            'description': '',\r\n            'head_pid': '',\r\n        }\r\n    }\r\n    const assign = ref({\r\n        department_pid: '',\r\n        sub_department: '',\r\n        user_pid:''\r\n    });\r\n   \r\n \r\n    function editDept(data){\r\n        dept.value = {\r\n            'department': data.department ,\r\n            'description': data.description,\r\n            'head_pid': data.head_pid,\r\n            'pid': data.pid\r\n        }\r\n        toggleModal.value = true\r\n    }\r\n\r\n    const errors = ref({})\r\n    function createDepartment() {\r\n    errors.value = []\r\n    store.dispatch('postMethod', { url: '/create-department', param: dept.value }).then((data) => {\r\n        if (data?.status == 422) {\r\n            errors.value = data.data\r\n        } else if (data?.status == 201) {\r\n            closeModal();\r\n            loadDepartment()\r\n        }\r\n    })\r\n}\r\n\r\n\r\n     const assign_sub = ref({\r\n        sub_department: '',\r\n        user_pid: ''\r\n    });\r\n\r\n    const a_errors = ref({})\r\n    function assignDepartment() {\r\n        a_errors.value = []\r\n        store.dispatch('postMethod', { url: '/assign-department', param: dept.value }).then((data) => {\r\n            if (data?.status == 422) {\r\n                a_errors.value = data.data;\r\n            }\r\n        })\r\n    }\r\n    \r\n    \r\n\r\nconst desig = ref({\r\n    name : '' ,\r\n    description: '',\r\n})\r\n\r\nconst editDesig = (ds) => {\r\n    desig.value = {\r\n        name :ds.name ,\r\n        description:ds.description ,\r\n        pid: ds.pid ,\r\n        status : ds.status\r\n    }\r\n}\r\nconst deleteDeisg = (pid) =>{\r\n    if(confirm('are you sure you want to delete this ?')){\r\n       store.dispatch('deleteMethod', { url: '/delete-designation/'+pid }).then(() => {\r\n            loadDesignation()\r\n        })\r\n    }\r\n}\r\nconst desig_error = ref(false)\r\nfunction createDesignation(){\r\n    desig_error.value = []\r\n    store.dispatch('postMethod', { url: '/create-designation', param: desig.value }).then((data) => {\r\n        if (data?.status == 422) {\r\n            desig_error.value = data.data\r\n        } else if (data?.status == 201) {\r\n            assign_sub.value.name = '';\r\n            assign_sub.value.description = '';\r\n            loadDesignation()\r\n        }\r\n    })\r\n}\r\n\r\n    loadDepartment()\r\n    \r\n    function loadDepartment(url ='/load-departments') {\r\n        store.dispatch('getMethod', { url: url }).then((data) => {\r\n            if (data?.status == 200) {\r\n                departments.value = data.data;\r\n            }\r\n        })\r\n    }\r\n    // load-designation\r\n    const designations = ref({});\r\n    function loadDesignation(url = '/load-designation') {\r\n        store.dispatch('getMethod', { url: url }).then((data) => {\r\n            if (data?.status == 200) {\r\n                designations.value = data.data;\r\n            }else{\r\n                designations.value = {}\r\n            }\r\n        })\r\n    }\r\n\r\n    const users = ref([]);\r\n    function dropdownAllow() {\r\n        store.dispatch('loadDropdown', 'hod').then(({ data }) => {\r\n            users.value = data;\r\n        }).catch(e => {\r\n            console.log(e);\r\n        })\r\n    }\r\n    dropdownAllow()\r\n\r\n    const deptDrop = ref([]);\r\n    function dropdownDepts() {\r\n        store.dispatch('loadDropdown', 'departments').then(({ data }) => {\r\n            deptDrop.value = data;\r\n        })\r\n    }\r\n    dropdownDepts()\r\n\r\n    const sub = ref([]);\r\n    function loadSubDept(pid) {\r\n        store.dispatch('loadDropdown', 'sub-departments/' + pid).then(({ data }) => {\r\n            sub.value = data;\r\n        }).catch(e => {\r\n            console.log(e);\r\n        })\r\n    }\r\n\r\n     onMounted(() => {\r\n        // const subTab = document.querySelector('#sub-tab');\r\n        const desigTab = document.querySelector('#desig-tab');\r\n        // subTab.addEventListener('click',()=>{\r\n        //     loadSubDepartment()\r\n        // })\r\n        desigTab.addEventListener('click',()=>{\r\n            loadDesignation()\r\n        })\r\n     })\r\n\r\n    function nextPage(link) {\r\n        if (!link.url || link.active) {\r\n            return;\r\n        }\r\n        loadDepartment(link.url)\r\n    }\r\n    function nextDPage(link) {\r\n        if (!link.url || link.active) {\r\n            return;\r\n        }\r\n        loadDesignation(link.url)\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./DepartmentView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DepartmentView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["__exports__","sub","ref","toggleModal","addNew","dropdownDepts","value","resetAttr","closeModal","editSubDept","data","department_pid","name","description","head_pid","pid","sub_error","createSubDepartment","store","dispatch","url","param","then","status","loadSubDepartment","sub_depts","users","dropdownAllow","catch","e","console","log","deptDrop","isModalOpened","openModal","assign","loadSubDept","resetDept","departments","dept","sub_department","user_pid","editDept","department","errors","createDepartment","loadDepartment","assign_sub","a_errors","assignDepartment","desig","editDesig","ds","deleteDeisg","confirm","loadDesignation","desig_error","createDesignation","designations","nextPage","link","active","nextDPage","onMounted","desigTab","document","querySelector","addEventListener"],"sourceRoot":""}